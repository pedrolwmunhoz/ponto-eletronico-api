<!-- Chosen Palette: Warm Neutral Tech (Slate/Stone background, Blue/Emerald accents for technical elements) -->
<!-- Application Structure Plan: 
    The application acts as an interactive "Architectural Blueprint" viewer. 
    It is divided into 5 main distinct views (Tabs):
    1. Architecture Overview: Visualizes the Event-Driven Microservices flow using HTML/CSS diagrams.
    2. Data Models (Schema Explorer): Allows deep diving into the specific JSON structures (Employee, Company, Projects, Records) with syntax highlighting and field explanations.
    3. Projects Module: Specifically highlights the requested "Projects" feature, clarifying the separation between Legal Point and Managerial Project Hours using a comparison layout and a dummy allocation chart.
    4. Core Flow: A step-by-step interactive walkthrough of the "Clock In" process (Input -> Validation -> Kafka).
    5. Tech Stack: A grid view of the selected technologies.
    
    Why this structure? The source content is a technical spec. A linear document is hard to visualize. Breaking it into "Structure", "Data", and "Flow" allows stakeholders to understand the parts (Data), the whole (Architecture), and the behavior (Flow) separately.
-->
<!-- Visualization & Content Choices:
    - Architecture Diagram: HTML/CSS Flexbox/Grid with borders. Goal: Visualize component relationships.
    - Data Model Viewer: Two-column layout (Selector vs Code Block). Goal: Present complex JSON cleanly.
    - Project Allocation Chart (Chart.js): A Doughnut chart showing "Hours Declared per Project". Goal: Demonstrate the *purpose* of the Project entity (managerial insight).
    - Flow Simulator: Simple JS animation/state change in DOM. Goal: Explain the "Immutable Event" concept.
    - Tech Stack Grid: Simple cards.
    - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
-->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spec: Sistema de Ponto Eletr√¥nico SaaS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #F5F5F4; color: #1C1917; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom scrollbar for code blocks */
        .code-scroll::-webkit-scrollbar { width: 8px; height: 8px; }
        .code-scroll::-webkit-scrollbar-track { background: #292524; }
        .code-scroll::-webkit-scrollbar-thumb { background: #57534E; border-radius: 4px; }
        .code-scroll::-webkit-scrollbar-thumb:hover { background: #78716C; }

        /* Table scrollbar always visible top and bottom */
        .table-scroll-container {
            position: relative;
        }
        .table-scroll-top {
            overflow-x: auto;
            overflow-y: hidden;
            height: 20px;
            margin-bottom: -20px;
            scrollbar-width: thin;
            scrollbar-color: #D6D3D1 #F5F5F4;
        }
        .table-scroll-top::-webkit-scrollbar {
            height: 12px;
        }
        .table-scroll-top::-webkit-scrollbar-track {
            background: #F5F5F4;
            border-top: 1px solid #E7E5E4;
        }
        .table-scroll-top::-webkit-scrollbar-thumb {
            background: #D6D3D1;
            border-radius: 6px;
        }
        .table-scroll-top::-webkit-scrollbar-thumb:hover {
            background: #A8A29E;
        }
        .table-scroll-bottom {
            overflow-x: auto;
            overflow-y: hidden;
            scrollbar-width: thin;
            scrollbar-color: #D6D3D1 #F5F5F4;
        }
        .table-scroll-bottom::-webkit-scrollbar {
            height: 12px;
        }
        .table-scroll-bottom::-webkit-scrollbar-track {
            background: #F5F5F4;
            border-bottom: 1px solid #E7E5E4;
        }
        .table-scroll-bottom::-webkit-scrollbar-thumb {
            background: #D6D3D1;
            border-radius: 6px;
        }
        .table-scroll-bottom::-webkit-scrollbar-thumb:hover {
            background: #A8A29E;
        }
        .table-scroll-sync {
            overflow-x: auto;
            overflow-y: hidden;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            height: 300px;
        }

        /* Flow Animation Classes */
        .flow-step { transition: all 0.5s ease; opacity: 0.5; transform: scale(0.95); }
        .flow-step.active { opacity: 1; transform: scale(1); border-color: #3B82F6; box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1), 0 2px 4px -1px rgba(59, 130, 246, 0.06); }
        
        .tab-btn.active { border-bottom: 2px solid #3B82F6; color: #1D4ED8; font-weight: 600; }

        /* Code folding na tela: details/summary por controller */
        details.endpoint-controller summary { cursor: pointer; user-select: none; }
        details.endpoint-controller summary::-webkit-details-marker { display: none; }
        details.endpoint-controller[open] summary .fold-chevron { transform: rotate(90deg); }
        details.endpoint-controller summary .fold-chevron { display: inline-block; transition: transform 0.2s; margin-right: 0.5rem; }
        /* Documenta√ß√£o T√©cnica: fechadores iguais aos de endpoints, inicia fechado */
        details.doc-tecnica summary { cursor: pointer; user-select: none; }
        details.doc-tecnica summary::-webkit-details-marker { display: none; }
        details.doc-tecnica[open] summary .fold-chevron { transform: rotate(90deg); }
        details.doc-tecnica summary .fold-chevron { display: inline-block; transition: transform 0.2s; margin-right: 0.5rem; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header / Profile -->
    <header class="bg-white border-b border-stone-200 shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                <div>
                    <h1 class="text-2xl font-bold text-stone-900 tracking-tight">Sistema de Ponto Eletr√¥nico <span class="text-blue-600">SaaS</span></h1>
                    <p class="text-sm text-stone-500 mt-1">Especifica√ß√£o T√©cnica de Arquitetura</p>
                </div>
                <div class="flex items-center gap-3 bg-stone-50 px-4 py-2 rounded-lg border border-stone-200">
                    <div class="w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center text-white font-bold text-xs">ARCH</div>
                    <div class="text-xs">
                        <p class="font-semibold text-stone-800">Pedro Munhoz - Senior Software Architect</p>
                        <p class="text-stone-500" id="xp-info">XP: <span id="xp-anos"></span> Anos | Core: Java/AWS/Microservices</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white border-b border-stone-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-8 overflow-x-auto" id="nav-container">
                <button onclick="switchTab('overview')" class="tab-btn active py-4 px-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors whitespace-nowrap">Vis√£o Geral</button>
                <button onclick="switchTab('datamodels')" class="tab-btn py-4 px-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors whitespace-nowrap">Modelagem de Dados</button>
                <button onclick="switchTab('flow')" class="tab-btn py-4 px-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors whitespace-nowrap">Fluxo Core & Compliance</button>
                <button onclick="switchTab('stack')" class="tab-btn py-4 px-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors whitespace-nowrap">Tech Stack</button>
                <button onclick="switchTab('dependencias')" class="tab-btn py-4 px-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors whitespace-nowrap">Depend√™ncias</button>
                <button onclick="switchTab('prototipacao')" class="tab-btn py-4 px-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors whitespace-nowrap">Prototipa√ß√£o</button>
                <button onclick="switchTab('endpoints')" class="tab-btn py-4 px-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors whitespace-nowrap">Documenta√ß√£o de Endpoints</button>
                <button onclick="switchTab('doc-tecnica')" class="tab-btn py-4 px-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors whitespace-nowrap">Documenta√ß√£o T√©cnica</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- VIEW: OVERVIEW -->
        <section id="view-overview" class="block animate-fade-in">
            <div class="mb-8">
                <h2 class="text-xl font-bold text-stone-800">Arquitetura de Alto N√≠vel</h2>
                <p class="text-stone-600 mt-2 max-w-3xl">
                    O sistema adota uma arquitetura de <strong>Microservi√ßos Orientada a Eventos</strong>. O foco principal √© a integridade dos dados (Imutabilidade) e a escalabilidade (Kafka).
                </p>
            </div>

            <!-- Architecture Diagram (CSS Grid/Flex) -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 items-start">
                
                <!-- Diagram -->
                <div class="lg:col-span-8 bg-white p-6 rounded-xl border border-stone-200 shadow-sm relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded-bl-lg">AWS Infrastructure</div>
                    
                    <div class="flex flex-col gap-8 items-center py-8">
                        
                        <!-- Client Layer -->
                        <div class="w-full flex justify-center gap-4">
                            <div class="p-3 bg-stone-100 border border-stone-300 rounded text-center w-32 shadow-sm">
                                <div class="font-bold text-stone-700 text-sm">üì± Mobile App</div>
                            </div>
                            <div class="p-3 bg-stone-100 border border-stone-300 rounded text-center w-32 shadow-sm">
                                <div class="font-bold text-stone-700 text-sm">üíª Web Portal</div>
                            </div>
                        </div>

                        <!-- Gateway Layer -->
                        <div class="w-full max-w-lg border-t-2 border-stone-300 relative">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-white px-2 text-xs text-stone-400">HTTPS / JSON</div>
                        </div>
                        
                        <div class="p-4 bg-purple-50 border border-purple-200 rounded-lg w-full max-w-md text-center shadow-sm z-10">
                            <h3 class="font-bold text-purple-900">üåê API Gateway</h3>
                            <p class="text-xs text-purple-600">AWS API Gateway</p>
                            <p class="text-[10px] text-purple-500 mt-1">Rate Limiting ‚Ä¢ Routing</p>
                        </div>

                        <!-- Service Layer -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                            <!-- Auth -->
                            <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-center shadow-sm flex flex-col items-center">
                                <div class="text-2xl mb-1">üîê</div>
                                <h4 class="font-bold text-yellow-900 text-sm">Auth Service</h4>
                                <p class="text-xs text-yellow-700 mt-1">AWS EKS</p>
                                <p class="text-[10px] text-yellow-600 mt-1">Keycloak / OIDC</p>
                            </div>

                            <!-- Core -->
                            <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg text-center shadow-sm flex flex-col items-center ring-2 ring-blue-100">
                                <div class="text-2xl mb-1">‚öôÔ∏è</div>
                                <h4 class="font-bold text-blue-900 text-sm">Ponto Core</h4>
                                <p class="text-xs text-blue-700 mt-1">AWS EKS</p>
                                <p class="text-[10px] text-blue-600 mt-1">Java 21 ‚Ä¢ Spring Boot</p>
                                <span class="text-[10px] bg-blue-200 text-blue-800 px-1 rounded mt-1">Imut√°vel</span>
                            </div>
                            </div>

                        <!-- Kafka MSK -->
                        <div class="w-full bg-stone-800 text-white p-3 rounded-lg flex items-center justify-center px-6 shadow-md">
                            <span class="font-bold tracking-wider">AWS MSK</span>
                            <span class="font-mono text-xs text-orange-400 ml-4">Apache Kafka ‚Ä¢ partitioned</span>
                        </div>

                        <!-- Databases -->
                        <div class="w-full max-w-md">
                            <div class="p-3 bg-blue-50 border border-blue-200 rounded text-center shadow-sm">
                                <h5 class="font-bold text-blue-900 text-xs">üêò PostgreSQL</h5>
                                <p class="text-xs text-blue-700">AWS RDS</p>
                                <p class="text-[10px] text-blue-600">Registros de Ponto</p>
                            </div>
                        </div>

                        <!-- Consumers -->
                        <div class="flex gap-4 w-full justify-center">
                            <div class="p-3 bg-stone-50 border border-stone-200 rounded text-center w-32 border-l-4 border-l-red-500 shadow-sm">
                                <h5 class="font-bold text-stone-700 text-xs">üõ°Ô∏è Auditoria</h5>
                                <p class="text-xs text-stone-600">AWS EKS</p>
                                <p class="text-[10px] text-stone-500">DynamoDB</p>
                            </div>
                            <div class="p-3 bg-stone-50 border border-stone-200 rounded text-center w-32 border-l-4 border-l-emerald-500 shadow-sm">
                                <h5 class="font-bold text-stone-700 text-xs">üí∞ Folha/RH</h5>
                                <p class="text-xs text-stone-600">AWS EKS</p>
                                <p class="text-[10px] text-stone-500">Calcula Sal√°rio</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Key Metrics / Highlights -->
                <div class="lg:col-span-4 flex flex-col gap-4">
                    <div class="bg-white p-5 rounded-xl border border-stone-200 shadow-sm">
                        <h3 class="font-bold text-stone-800 mb-2">Destaques da Arquitetura</h3>
                        <ul class="space-y-3 text-sm text-stone-600">
                            <li class="flex items-start gap-2">
                                <span class="text-green-500 mt-0.5">‚úì</span>
                                <div>
                                    <strong class="text-stone-800">Clean Architecture:</strong>
                                    Regras de neg√≥cio isoladas de frameworks e drivers.
                                </div>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500 mt-0.5">‚úì</span>
                                <div>
                                    <strong class="text-stone-800">Event-Driven:</strong>
                                    Desacoplamento total entre o registro do ponto e o processamento de folha.
                                </div>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500 mt-0.5">‚úì</span>
                                <div>
                                    <strong class="text-stone-800">CQRS (Leve):</strong>
                                    Separa√ß√£o l√≥gica entre comandos (Registrar) e consultas (Relat√≥rios).
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="bg-stone-900 text-stone-300 p-5 rounded-xl shadow-lg">
                        <h3 class="font-bold text-white mb-2">Stack Principal</h3>
                        <div class="grid grid-cols-2 gap-2 text-xs">
                            <div class="bg-stone-800 p-2 rounded">Java 21</div>
                            <div class="bg-stone-800 p-2 rounded">Spring Boot 3</div>
                            <div class="bg-stone-800 p-2 rounded">PostgreSQL</div>
                            <div class="bg-stone-800 p-2 rounded">DynamoDB</div>
                            <div class="bg-stone-800 p-2 rounded">Kafka (MSK)</div>
                            <div class="bg-stone-800 p-2 rounded">Terraform</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: DATA MODELS -->
        <section id="view-datamodels" class="hidden">
            <div class="mb-6">
                <h2 class="text-xl font-bold text-stone-800">Modelagem de Dados (Schema)</h2>
                <p class="text-stone-600 mt-1">Explora√ß√£o interativa das entidades principais. O modelo √© estrito para garantir conformidade legal.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 h-[600px]">
                
                <!-- Entity Selector -->
                <div class="bg-white border border-stone-200 rounded-xl overflow-hidden shadow-sm flex flex-col">
                    <div class="bg-stone-50 px-4 py-3 border-b border-stone-200">
                        <h3 class="font-semibold text-stone-700 text-sm uppercase tracking-wide">Entidades</h3>
                    </div>
                    <div class="flex-grow overflow-y-auto p-2 space-y-1">
                        <button onclick="showEntity('usuario')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors" data-target="usuario">
                            üë• 0. Users (Usu√°rio Gen√©rico)
                        </button>
                        <button onclick="showEntity('funcionario')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors active" data-target="funcionario">
                            üë§ 1. Funcion√°rio (Employee)
                        </button>
                        <button onclick="showEntity('empresa')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors" data-target="empresa">
                            üè¢ 2. Empresa (Tenant)
                        </button>
                        <button onclick="showEntity('registro')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors border-l-4 border-blue-500 bg-blue-50" data-target="registro">
                            ‚è±Ô∏è 3. Registro de Ponto (Fato)
                        </button>
                        <button onclick="showEntity('credencial')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors" data-target="credencial">
                            üîê 4. Credencial (Login)
                        </button>
                        <button onclick="showEntity('alertas')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors" data-target="alertas">
                            ‚ö†Ô∏è 5. Alertas/Diverg√™ncias
                        </button>
                        <button onclick="showEntity('banco_horas')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors" data-target="banco_horas">
                            ‚è∞ 6. Banco de Horas
                        </button>
                        <button onclick="showEntity('auditoria')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors" data-target="auditoria">
                            üìã 7. Auditoria (Log de Atividades)
                        </button>
                        <button onclick="showEntity('notificacao')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors" data-target="notificacao">
                            üîî 8. Notifica√ß√µes
                        </button>
                        <button onclick="showEntity('feriado')" class="entity-btn w-full text-left px-4 py-3 rounded-lg hover:bg-stone-50 focus:bg-blue-50 focus:text-blue-700 text-sm font-medium transition-colors" data-target="feriado">
                            üìÖ 9. Feriado
                        </button>
                    </div>
                </div>

                <!-- JSON Viewer -->
                <div class="lg:col-span-2 bg-[#1E1E1E] rounded-xl overflow-hidden shadow-lg flex flex-col">
                    <div class="bg-[#2D2D2D] px-4 py-2 border-b border-[#3E3E3E] flex justify-between items-center">
                        <span id="json-title" class="text-stone-300 font-mono text-sm">Schema Viewer</span>
                        <div class="flex items-center gap-3">
                            <button onclick="copyJson()" id="copy-btn" class="text-stone-400 hover:text-stone-200 transition-colors text-xs font-medium flex items-center gap-1 px-2 py-1 rounded hover:bg-[#3E3E3E]">
                                <span id="copy-icon">üìã</span>
                                <span id="copy-text">Copiar</span>
                            </button>
                        <span class="text-xs text-stone-500 font-mono">JSON</span>
                        </div>
                    </div>
                    <div class="flex-grow overflow-auto p-4 code-scroll relative">
                        <pre class="font-mono text-sm leading-relaxed"><code id="json-content" class="language-json text-blue-300">
// Selecione uma entidade √† esquerda para visualizar o Schema...
                        </code></pre>
                    </div>
                    <div id="entity-explanation" class="bg-blue-900/30 p-4 border-t border-blue-800/50 text-blue-100 text-sm">
                        Selecione uma entidade para ver detalhes e regras de neg√≥cio.
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: NOTIFICA√á√ïES -->
        <section id="view-notificacao" class="hidden">
            <!-- Conte√∫do ser√° renderizado dinamicamente pelo JavaScript -->
        </section>

        <!-- VIEW: BANCO DE HORAS -->
        <section id="view-banco_horas" class="hidden">
            <!-- Conte√∫do ser√° renderizado dinamicamente pelo JavaScript -->
        </section>


        <!-- VIEW: CORE FLOW -->
        <section id="view-flow" class="hidden">
            <div class="mb-8">
                <h2 class="text-xl font-bold text-stone-800">Fluxo Core & Compliance (Portaria 671)</h2>
                <p class="text-stone-600">Visualiza√ß√£o passo-a-passo do processo de cria√ß√£o de um registro imut√°vel.</p>
            </div>

            <!-- Flow Container -->
            <div class="bg-white border border-stone-200 rounded-xl p-8 shadow-sm">
                
                <div class="flex flex-col md:flex-row justify-between items-center relative gap-8 md:gap-0">
                    <!-- Line connecting steps -->
                    <div class="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-stone-100 -z-0"></div>

                    <!-- Step 1 -->
                    <div id="step-1" class="flow-step active relative z-10 flex flex-col items-center bg-white p-4 rounded-xl border-2 border-stone-200 w-48 text-center cursor-pointer" onclick="simulateFlow(1)">
                        <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xl mb-3">üì±</div>
                        <h4 class="font-bold text-stone-800 text-sm">1. Input</h4>
                        <p class="text-xs text-stone-500 mt-1">Usu√°rio envia payload com JWT e Geo.</p>
                    </div>

                    <!-- Step 2 -->
                    <div id="step-2" class="flow-step relative z-10 flex flex-col items-center bg-white p-4 rounded-xl border-2 border-stone-200 w-48 text-center cursor-pointer" onclick="simulateFlow(2)">
                        <div class="w-12 h-12 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center text-xl mb-3">‚öôÔ∏è</div>
                        <h4 class="font-bold text-stone-800 text-sm">2. Valida√ß√£o & Assinatura</h4>
                        <p class="text-xs text-stone-500 mt-1">Backend valida regras e assina digitalmente o registro.</p>
                    </div>

                    <!-- Step 3 -->
                    <div id="step-3" class="flow-step relative z-10 flex flex-col items-center bg-white p-4 rounded-xl border-2 border-stone-200 w-48 text-center cursor-pointer" onclick="simulateFlow(3)">
                        <div class="w-12 h-12 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-xl mb-3">üì®</div>
                        <h4 class="font-bold text-stone-800 text-sm">3. Evento Kafka</h4>
                        <p class="text-xs text-stone-500 mt-1">Publicado no t√≥pico ponto.registrado.</p>
                    </div>

                    <!-- Step 4 -->
                    <div id="step-4" class="flow-step relative z-10 flex flex-col items-center bg-white p-4 rounded-xl border-2 border-stone-200 w-48 text-center cursor-pointer" onclick="simulateFlow(4)">
                        <div class="w-12 h-12 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-xl mb-3">üíæ</div>
                        <h4 class="font-bold text-stone-800 text-sm">4. Persist√™ncia</h4>
                        <p class="text-xs text-stone-500 mt-1">Consumer salva no Postgres (Imut√°vel).</p>
                    </div>
                </div>

                <!-- Simulation Controls -->
                <div class="mt-12 flex justify-center">
                    <button onclick="runSimulation()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors flex items-center gap-2">
                        <span>‚ñ∂Ô∏è</span> Simular Registro de Ponto
                    </button>
                </div>

                <!-- Console Output for Simulation -->
                <div class="mt-6 bg-stone-900 rounded-lg p-4 font-mono text-xs text-green-400 min-h-[100px]" id="simulation-console">
                    > Aguardando a√ß√£o...
                </div>
            </div>

            <!-- Compliance Box -->
            <div class="mt-6 bg-stone-50 border border-stone-200 p-6 rounded-xl">
                <h3 class="font-bold text-stone-800 mb-2">Conformidade Legal (Portaria 671)</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-stone-600">
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>Modelo:</strong> Eletr√¥nico (REP-E / Alternativo).</li>
                        <li><strong>Armazenamento:</strong> M√≠nimo 5 anos.</li>
                    </ul>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>Integridade:</strong> Assinatura Digital com certificado ICP-Brasil.</li>
                        <li><strong>Disponibilidade:</strong> Dados prontos para fiscaliza√ß√£o imediata.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- VIEW: TECH STACK -->
        <section id="view-stack" class="hidden">
            <div class="mb-8">
                <h2 class="text-xl font-bold text-stone-800">Stack Tecnol√≥gica & Decis√µes</h2>
                <p class="text-stone-600">Escolhas baseadas em: Alta Escala, Resili√™ncia e Mercado Enterprise.</p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <div class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-blue-500 transition-colors">
                    <span class="text-4xl">‚òï</span>
                    <span class="font-bold text-stone-800">Java 21</span>
                    <span class="text-xs text-stone-500">LTS Recent</span>
                </div>
                <div class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-green-500 transition-colors">
                    <span class="text-4xl">üçÉ</span>
                    <span class="font-bold text-stone-800">Spring Boot 3</span>
                    <span class="text-xs text-stone-500">Native Support</span>
                </div>
                <div class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-blue-300 transition-colors">
                    <span class="text-4xl">üêò</span>
                    <span class="font-bold text-stone-800">PostgreSQL</span>
                    <span class="text-xs text-stone-500">Relational Core</span>
                </div>
                <div class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-orange-500 transition-colors">
                    <span class="text-4xl">üì®</span>
                    <span class="font-bold text-stone-800">Kafka (MSK)</span>
                    <span class="text-xs text-stone-500">Event Broker</span>
                </div>
                <div class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-yellow-500 transition-colors">
                    <span class="text-4xl">‚òÅÔ∏è</span>
                    <span class="font-bold text-stone-800">AWS EKS</span>
                    <span class="text-xs text-stone-500">Kubernetes</span>
                </div>
                <div class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-purple-500 transition-colors">
                    <span class="text-4xl">üîë</span>
                    <span class="font-bold text-stone-800">Keycloak</span>
                    <span class="text-xs text-stone-500">OAuth2 / OIDC</span>
                </div>
                <div class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-red-500 transition-colors">
                    <span class="text-4xl">‚ö°</span>
                    <span class="font-bold text-stone-800">DynamoDB</span>
                    <span class="text-xs text-stone-500">Audit Logs</span>
                </div>
                <div class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-indigo-500 transition-colors">
                    <span class="text-4xl">üèóÔ∏è</span>
                    <span class="font-bold text-stone-800">Terraform</span>
                    <span class="text-xs text-stone-500">IaC</span>
                </div>
            </div>
        </section>

        <!-- VIEW: DEPEND√äNCIAS (Monolito Modular Backend) -->
        <section id="view-dependencias" class="hidden">
            <div class="mb-8">
                <h2 class="text-xl font-bold text-stone-800">Depend√™ncias do Projeto ‚Äî Backend Monolito Modular</h2>
                <p class="text-stone-600 mt-2 max-w-3xl">
                    Depend√™ncias Maven para o backend em <strong>Java 21 + Spring Boot 3</strong>, organizado em m√≥dulos (auth, core, ponto, projetos, notifica√ß√µes) dentro de um √∫nico deploy√°vel.
                </p>
            </div>

            <div class="space-y-6">
                <!-- Core / Runtime -->
                <div class="bg-white border border-stone-200 rounded-xl shadow-sm overflow-hidden">
                    <div class="bg-stone-100 px-4 py-2 border-b border-stone-200">
                        <h3 class="font-bold text-stone-800 text-sm">Core &amp; Runtime</h3>
                    </div>
                    <div class="p-4 overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left text-stone-500 border-b border-stone-200">
                                    <th class="py-2 pr-4">Depend√™ncia</th>
                                    <th class="py-2 pr-4">Escopo</th>
                                    <th class="py-2">Prop√≥sito</th>
                                </tr>
                            </thead>
                            <tbody class="text-stone-700">
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">spring-boot-starter-web</td><td class="py-2 pr-4">‚Äî</td><td>REST API, embedded Tomcat</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">spring-boot-starter-data-jpa</td><td class="py-2 pr-4">‚Äî</td><td>JPA/Hibernate, reposit√≥rios</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">spring-boot-starter-validation</td><td class="py-2 pr-4">‚Äî</td><td>Bean Validation (JSR 380)</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">spring-boot-starter-security</td><td class="py-2 pr-4">‚Äî</td><td>Seguran√ßa, OAuth2/OIDC (Keycloak)</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">spring-kafka</td><td class="py-2 pr-4">‚Äî</td><td>Produ√ß√£o/consumo de eventos (MSK)</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">postgresql</td><td class="py-2 pr-4">runtime</td><td>Driver JDBC PostgreSQL</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Dev &amp; Utilit√°rios -->
                <div class="bg-white border border-stone-200 rounded-xl shadow-sm overflow-hidden">
                    <div class="bg-stone-100 px-4 py-2 border-b border-stone-200">
                        <h3 class="font-bold text-stone-800 text-sm">Dev &amp; Utilit√°rios</h3>
                    </div>
                    <div class="p-4 overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left text-stone-500 border-b border-stone-200">
                                    <th class="py-2 pr-4">Depend√™ncia</th>
                                    <th class="py-2 pr-4">Escopo</th>
                                    <th class="py-2">Prop√≥sito</th>
                                </tr>
                            </thead>
                            <tbody class="text-stone-700">
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">lombok</td><td class="py-2 pr-4">optional</td><td>Redu√ß√£o de boilerplate (getters, builders)</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">mapstruct</td><td class="py-2 pr-4">‚Äî</td><td>Mapeamento entidade ‚Üî DTO</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">springdoc-openapi-starter-webmvc-ui</td><td class="py-2 pr-4">‚Äî</td><td>OpenAPI 3 / Swagger UI</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">spring-boot-devtools</td><td class="py-2 pr-4">optional</td><td>Restart autom√°tico em dev</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Teste -->
                <div class="bg-white border border-stone-200 rounded-xl shadow-sm overflow-hidden">
                    <div class="bg-stone-100 px-4 py-2 border-b border-stone-200">
                        <h3 class="font-bold text-stone-800 text-sm">Teste</h3>
                    </div>
                    <div class="p-4 overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left text-stone-500 border-b border-stone-200">
                                    <th class="py-2 pr-4">Depend√™ncia</th>
                                    <th class="py-2 pr-4">Escopo</th>
                                    <th class="py-2">Prop√≥sito</th>
                                </tr>
                            </thead>
                            <tbody class="text-stone-700">
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">spring-boot-starter-test</td><td class="py-2 pr-4">test</td><td>JUnit 5, Mockito, AssertJ</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">spring-security-test</td><td class="py-2 pr-4">test</td><td>Testes com contexto de seguran√ßa</td></tr>
                                <tr class="border-b border-stone-100"><td class="py-2 pr-4 font-mono text-xs">testcontainers</td><td class="py-2 pr-4">test</td><td>PostgreSQL, Kafka em containers para testes</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- BOM / Vers√£o -->
                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                    <p class="text-sm text-blue-900"><strong>Nota:</strong> Use o <span class="font-mono">spring-boot-dependencies</span> BOM no POM (ou o plugin do Gradle) para versionar todas as depend√™ncias Spring; vers√£o recomendada: <span class="font-mono">3.2.x</span> ou superior com Java 21.</p>
                </div>
            </div>
        </section>

        <!-- VIEW: PROTOTIPACAO -->
        <section id="view-prototipacao" class="hidden">
            <div class="mb-8">
                <h2 class="text-xl font-bold text-stone-800">Prototipa√ß√£o de Telas</h2>
                <p class="text-stone-600">Wireframes e mockups das principais telas do sistema.</p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <div onclick="openPrototypeModal('login')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-blue-500 transition-colors cursor-pointer">
                    <span class="text-4xl">üì±</span>
                    <span class="font-bold text-stone-800">Login</span>
                    <span class="text-xs text-stone-500">Autentica√ß√£o</span>
                </div>
                <div onclick="openPrototypeModal('registro-ponto')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-green-500 transition-colors cursor-pointer">
                    <span class="text-4xl">‚è±Ô∏è</span>
                    <span class="font-bold text-stone-800">Registro de Ponto</span>
                    <span class="text-xs text-stone-500">Marca√ß√£o</span>
                </div>
                <div onclick="openPrototypeModal('dashboard')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-blue-300 transition-colors cursor-pointer">
                    <span class="text-4xl">üìä</span>
                    <span class="font-bold text-stone-800">Dashboard</span>
                    <span class="text-xs text-stone-500">Vis√£o Geral</span>
                </div>
                <div onclick="openPrototypeModal('perfil')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-orange-500 transition-colors cursor-pointer">
                    <span class="text-4xl">üë§</span>
                    <span class="font-bold text-stone-800">Perfil</span>
                    <span class="text-xs text-stone-500">Dados Pessoais</span>
                </div>
                <div onclick="openPrototypeModal('espelho-ponto')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-yellow-500 transition-colors cursor-pointer">
                    <span class="text-4xl">üìÖ</span>
                    <span class="font-bold text-stone-800">Espelho de Ponto</span>
                    <span class="text-xs text-stone-500">Consulta</span>
                </div>
                <div onclick="openPrototypeModal('alertas')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-purple-500 transition-colors cursor-pointer">
                    <span class="text-4xl">‚ö†Ô∏è</span>
                    <span class="font-bold text-stone-800">Alertas</span>
                    <span class="text-xs text-stone-500">Diverg√™ncias</span>
                </div>
                <div onclick="openPrototypeModal('funcionarios')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-teal-500 transition-colors cursor-pointer">
                    <span class="text-4xl">üë•</span>
                    <span class="font-bold text-stone-800">Funcion√°rios</span>
                    <span class="text-xs text-stone-500">Cadastro RH</span>
                </div>
                <div onclick="openPrototypeModal('banco-horas')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-pink-500 transition-colors cursor-pointer">
                    <span class="text-4xl">‚è∞</span>
                    <span class="font-bold text-stone-800">Banco de Horas</span>
                    <span class="text-xs text-stone-500">Saldo</span>
                </div>
                <div onclick="openPrototypeModal('relatorios')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-cyan-500 transition-colors cursor-pointer">
                    <span class="text-4xl">üìà</span>
                    <span class="font-bold text-stone-800">Relat√≥rios</span>
                    <span class="text-xs text-stone-500">An√°lises</span>
                </div>
                <div onclick="openPrototypeModal('geofence')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-amber-500 transition-colors cursor-pointer">
                    <span class="text-4xl">üó∫Ô∏è</span>
                    <span class="font-bold text-stone-800">Geofence</span>
                    <span class="text-xs text-stone-500">Localiza√ß√£o</span>
                </div>
                <div onclick="openPrototypeModal('auditoria')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-rose-500 transition-colors cursor-pointer">
                    <span class="text-4xl">üìã</span>
                    <span class="font-bold text-stone-800">Auditoria</span>
                    <span class="text-xs text-stone-500">Logs</span>
                </div>
                <div onclick="openPrototypeModal('notificacoes')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-violet-500 transition-colors cursor-pointer">
                    <span class="text-4xl">üîî</span>
                    <span class="font-bold text-stone-800">Notifica√ß√µes</span>
                    <span class="text-xs text-stone-500">Alertas</span>
                </div>
                <div onclick="openPrototypeModal('recuperacao-senha')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-blue-600 transition-colors cursor-pointer">
                    <span class="text-4xl">üîê</span>
                    <span class="font-bold text-stone-800">Recupera√ß√£o de Senha</span>
                    <span class="text-xs text-stone-500">Reset</span>
                </div>
                <div onclick="openPrototypeModal('solicitacoes-ponto')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-green-600 transition-colors cursor-pointer">
                    <span class="text-4xl">‚úèÔ∏è</span>
                    <span class="font-bold text-stone-800">Solicita√ß√µes de Ponto</span>
                    <span class="text-xs text-stone-500">Cria√ß√£o/Remo√ß√£o</span>
                </div>
                <div onclick="openPrototypeModal('ferias-afastamentos')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-orange-600 transition-colors cursor-pointer">
                    <span class="text-4xl">üèñÔ∏è</span>
                    <span class="font-bold text-stone-800">F√©rias/Afastamentos</span>
                    <span class="text-xs text-stone-500">Controle</span>
                </div>
                <div onclick="openPrototypeModal('sessoes-ativas')" class="p-6 bg-white border border-stone-200 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-gray-600 transition-colors cursor-pointer">
                    <span class="text-4xl">üñ•Ô∏è</span>
                    <span class="font-bold text-stone-800">Sess√µes Ativas</span>
                    <span class="text-xs text-stone-500">Seguran√ßa</span>
                </div>
            </div>
        </section>

        <!-- VIEW: ENDPOINTS -->
        <section id="view-endpoints" class="hidden">
            <div class="mb-8">
                <h2 class="text-xl font-bold text-stone-800">Documenta√ß√£o de Endpoints</h2>
                <p class="text-stone-600">Documenta√ß√£o completa de todos os endpoints da API com m√©todos HTTP, URLs, par√¢metros e bodies baseados nas tabelas do banco de dados.</p>
            </div>

            <div class="space-y-8" id="endpoints-container">
                <!-- Endpoints ser√£o renderizados dinamicamente -->
            </div>
        </section>

        <!-- VIEW: DOCUMENTA√á√ÉO T√âCNICA -->
        <section id="view-doc-tecnica" class="hidden">
            <div class="mb-8">
                <h2 class="text-xl font-bold text-stone-800">Documenta√ß√£o T√©cnica</h2>
                <p class="text-stone-600">Documenta√ß√£o de regras de neg√≥cio e rec√°lculo (entrada manual e soft delete). Clique para expandir cada se√ß√£o.</p>
            </div>

            <div class="space-y-4">
                <details class="doc-tecnica border border-stone-200 rounded-xl overflow-hidden shadow-sm">
                    <summary class="flex items-center justify-between bg-stone-100 hover:bg-stone-200 px-5 py-4 font-semibold text-stone-800 list-none transition-colors">
                        <span class="flex items-center gap-2">
                            <span class="fold-chevron">‚ñ∂</span>
                            Recalculo Banco Horas Registro Manual
                        </span>
                    </summary>
                    <div class="p-5 border-t border-stone-200 space-y-4 text-sm text-stone-700">
                        <p>empresa_jornada_config e funcionario_jornada_config essas duas tabelas tem os campos abaixo para controle de jornada onde se tiver em funcionario sobrescreve empresa.</p>
                        <pre class="bg-stone-100 p-4 rounded-lg overflow-x-auto text-xs font-mono">   @Column(name = "tipo_escala_jornada_id", nullable = false)
    private Integer tipoEscalaJornadaId;

    @Column(name = "carga_horaria_diaria", nullable = false, length = 20)
    private Duration cargaHorariaDiaria = Duration.ZERO;

    @Column(name = "carga_horaria_semanal", nullable = false, length = 20)
    private Duration cargaHorariaSemanal = Duration.ZERO;

    @Column(name = "tolerancia_padrao", nullable = false, length = 20)
    private Duration toleranciaPadrao = Duration.ZERO;

    @Column(name = "intervalo_padrao", nullable = false, length = 20)
    private Duration intervaloPadrao = Duration.ZERO;

    @Column(name = "entrada_padrao", nullable = false)
    private LocalTime entradaPadrao;

    @Column(name = "saida_padrao", nullable = false)
    private LocalTime saidaPadrao;</pre>
                        <p>falta s√≥ criar campo tempoDescansoEntreJornada  Duration na tabela empresa_jornada_config e funcionario_jornada_config</p>
                        <p>Criar nova tabela xrefPontoResumo que guarda o vinculo entre registroPonto e resumo da jornada<br>
A Jornada √© a tabela resumo_ponto_dia</p>
                        <pre class="bg-stone-100 p-4 rounded-lg overflow-x-auto text-xs font-mono">@Entity
@Table(name = "resumo_ponto_dia")
public class ResumoPontoDia {
    @Id @Column(name = "id") private UUID id;
    @Column(name = "funcionario_id", nullable = false) private UUID funcionarioId;
    @Column(name = "empresa_id", nullable = false) private UUID empresaId;
    @Column(name = "primeira_batida") private LocalDateTime primeiraBatida;
    @Column(name = "ultima_batida") private LocalDateTime ultimaBatida;
    @Column(name = "total_horas_trabalhadas", nullable = false, length = 20) private Duration totalHorasTrabalhadas = Duration.ZERO;
    @Column(name = "total_horas_esperadas", nullable = false, length = 20) private Duration totalHorasEsperadas = Duration.ZERO;
    @Column(name = "inconsistente", nullable = false) private Boolean inconsistente = false;
    @Column(name = "motivo_inconsistencia", length = 50) private String motivoInconsistencia;
    @Column(name = "created_at", nullable = false) private LocalDateTime createdAt;
}</pre>
                        <p>jornada - &gt; conjunto de registros com intervalos entre eles menor que o descanso da jornada(11horas, ou 36 depende da escala) - ou seja os registro estao em um intervalo menor q o descanso entre eles - 08:00; 12:00 ;13:00 ;18:00  - quando o intervalo e maior ou igual ao descanso e visto como nova jornada</p>
                        <p>jornada - &gt; conjunto de registros de uma jornada<br>
jornada afetada -&gt;  jornada q vai inserir o ponto<br>
jornada posterior - &gt; jornada posterior a afetada<br>
jornada anterior  -&gt; jornada anterior a afetada</p>
                        <p>na jornada existem duas varaiveis<br>
primeiraBatida<br>
ultimaBatida</p>

                        <details class="doc-tecnica mt-4 border border-stone-200 rounded-lg">
                            <summary class="flex items-center gap-2 bg-stone-50 hover:bg-stone-100 px-4 py-3 font-medium text-stone-800 list-none cursor-pointer">
                                <span class="fold-chevron">‚ñ∂</span>
                                1. ServiceCalcularBancoHorasEntradaManual (somente entrada)
                            </summary>
                            <div class="p-5 border-t border-stone-200 space-y-4 text-sm text-stone-700">
                                <p>busca  jornadaConfigEmpresa ou sobrepor jornadaConfigFuncionario caso existe e pegar a quantidade de horas esperadas por dia, a quantidade de descanso entre jornada e guardar em uma variavel</p>
                                <p>logica inicio:<br>
buscar se novo registro tem uma jornada afetada - por range de datas - se existir um registro que a distancia dataNovoPontoManual entre o registro posterior ou inferior seja seja menor que a quantidade de descanso - encontrou jornada - guarda em vari√°vel (jornadaAfetada)</p>
                                <p>Query - variavel lista registrosAnteriorPontoDentroRangeDenscanso - buscar se existe registro a partir da data atual at√© (dataAtual - horasDescanso) - subtrair a quantidade de horasDescanso da dataAtual<br>
Reutilizar Query - variavel lista registrosPosteriorPontoDentroRangeDescanso - buscar se existe registro a partir da data atual at√© (dataAtual + horasDescanso) - adicionar a quantidade de horasDescanso da dataAtual</p>
                                <p>Retorna as duas lista dos registros no range</p>
                                <p>Variavel registroAnterior: se existir ListaregistroAnterior, pega o reigstroAnterior por data a partir do pontoManual (o exato registro anterior)<br>
Variavel registroPosterior: se existir ListaRegistroPosterior, pega o proximo por data a partir do pontoManual (o exato registro posterior)</p>
                                <p>se nao encontrar registros, criar nova jornada e finalizar o processo<br>
se existir registroAnterior, entao existe jornadaAfetada</p>
                                <p>Logica buscarJornadaAfetada:<br>
Sempre comeca pelo registroAnterior(senao tiver null)<br>
NovaQuery  - buscar xref jornadaAfetada por registroAnterior.pontoId na tabela xrefPontoResumo<br>
where registroAnterior.pontoId == xrefPontoResumo.pontoId</p>
                                <p>senao existir jornada para registroAnterior.pontoId - buscar xref jornada afetada por registroPosterior.idPonto(senao tiver null) na tabela xrefPontoResumo<br>
where registroPosterior.pontoId == xrefPontoResumo.pontoId</p>
                                <p>- Quando existir xref definir variavel id com xref.idResuomDia( jornada)<br>
Se nao exsitir  somente nesse caso buscar novamente a xref pelo registroPosterior.pontoid)</p>
                                <p>se nao achar xref cria uma nova Jornada e encerra.</p>
                                <p>Se encontrou xref ele ter√° o id da jornadaAfetada - puxar o registro da jornada pelo idResumoDia do xref<br>
Query -  buscarResumoPontoDia(Jornada) por id - tabela resumo_ponto_dia<br>
Atribui a variavel JornadaAfetada</p>
                                <p>Se existe jornadaAfetada. - buscar listaRegistro da jornadaAfetada e atribuir a variavel List registrosJornadaAfetada - buscar lista de registrosPonto da JornadaAfetada - pelo range de datas da primeiraBatida e UltimaBatida do pontoResumo(JornadaAfetada)</p>
                                <p>Se tem uma jornadaAfetada Obrigatoriamente existe uma jornada anterior<br>
NovaQuery  - buscar jornadaAnterior pelo id JornadaAfetada(ResumoPontoDia.id) - usar dataRef para achar a exata anterior com ativo:true como filtro - Tabela resumoPontoDia(Jornada)</p>
                                <p>verificar se existe jornada posterior:<br>
NovaQuery - buscar jornada posterior a partir JornadaAfetada(ResumoPontoDia.id) na tabela xref - - usar dataRef para achar a exata posterior com ativo:true como filtro - Tabela resumoPontoDia(Jornada)</p>
                                <p>Incluir registro manual<br>
Logica de Recalculo:<br>
Incluir novo registro manual<br>
( apos incluir o registro - reordenar lista registrosJornadaAfetada por data e reordenar os tipos a partir da novaEntrada - pegar tipo da anterior) - Recalcular o ResumoDoDia( totalEsperado, totalTrabalhado, etc ) SE NOVO REGISTRO √â O PRIMEIRO DA LISTA =  TIPO ENTRADA OBRIGATORIAMENTE<br>
Guarda em uma lista o id e os tipoASerMudado(entrada, saida) dos registroPonto que vao mudar de tipo</p>
                                <p>Se existe jornadaAfetada:<br>
- validar se vai impactar JornadaAnterior<br>
pegar ultimaBatida da JornadaAnterior comparar com a primeiraBatida(recalculada) da jornadaAfetada<br>
se tiver diferenca de horas maior ou igual ao tempoDescansoEntreJornada - nao fazer nada<br>
se tiver no range do tempoDescansoEntreJornada - buscar lista Registro da jornadaAnterior e atribuir a variavel List registrosJornadaAnterior - Buscar lista de registrosPonto da JornadaAnterior<br>
Query - pelo rangeData da primeiraBatida e UltimaBatida da JornadaAnterior<br>
juntar jornadaAnterior na variavel jornadaAfetada<br>
( apos juntar os registros - reordenar lista registrosJornadaAfetada por data e reordenar os tipos a partir da novaEntrada -pegar tipo da anterior) - Recalcular o ResumoDoDia( totalEsperado, totalTrabalhado, etc )<br>
Guarda em uma lista o id e os tipoASerMudado(entrada, saida) dos registroPonto que vao mudar de tipo - se ja existir um id nessa lista do recalculo passado atualize-o.<br>
Ao juntar jornadas, desative (resumoPonto) antigo e fa√ßa update em cima da JornadaAfetada<br>
oque vem antes do novoRegistro nao muda os tipos(entrada ou saida). Oque vem depois reordena. recalcula tudo</p>
                                <p>Por fim, se existe jornadaAfetada entao validar se vai impactar posterior<br>
Pega primeiraBatida da jornadaPosterior e compara com o ultimaBatida da JornadaAfetada(recalculada) confere se vai ter a quantidade de horas previstas entre as jornadas<br>
se o descanso for maior ou igual ao tempoDescansoEntreJornada - nao faz nada<br>
se for menor buscar lista de registrosPonto da JornadaPosterior - buscar lista Registro da jornadaPosterior e atribuir a variavel List registrosJornadaPosterior<br>
Query - pelo rangeData da primeiraBatida e UltimaBatida da JornadaPosterior<br>
juntar jornadaPosterior na variavel jornadaAfetada<br>
( apos juntar os registros - reordenar lista registrosJornadaAfetada por data e reordenar os tipos a partir da novaEntrada -pegar tipo da anterior) - Recalcular o ResumoDoDia( totalEsperado, totalTrabalhado, etc )<br>
Guarda em uma lista o id e os tipoASerMudado(entrada, saida) dos registroPonto que vao mudar de tipo - se ja existir um id nessa lista do recalculo passado atualize-o.<br>
Ao juntar jornadas, desative (resumoPonto) antiga e fa√ßa update em cima da JornadaAfetada</p>
                                <p>salvar registros afetados no banco</p>
                            </div>
                        </details>

                        <details class="doc-tecnica mt-4 border border-stone-200 rounded-lg">
                            <summary class="flex items-center gap-2 bg-stone-50 hover:bg-stone-100 px-4 py-3 font-medium text-stone-800 list-none cursor-pointer">
                                <span class="fold-chevron">‚ñ∂</span>
                                2. Service calcular banco horas soft delete
                            </summary>
                            <div class="p-5 border-t border-stone-200 space-y-4 text-sm text-stone-700">
                                <p>buscar QUAL jornada vai ser afetada - por range de datas - se existir um registro que a distancia dataNovoPontoManual entre o registro posterior ou inferior seja seja menor que a quantidade de descanso - encontrou jornada - guarda em vari√°vel (jornadaAfetada)</p>
                                <p>Pegar lista registroPonto da jornadaAfetada por range data primeiraBatida e ultimaBatida e guardar em variavel</p>
                                <p>remover o registro da listaJornadaAfetada<br>
Reordenar e recalcular a lista de todo registros da jornadaAfetada ja com o ponto removido<br>
pegar o registro imediatamente anterior ao deletado<br>
pegar o registro imediatamente posterior ao deletado<br>
calcular a distancia entre o anterior e o posterior<br>
se a distancia for menor que 11 horas permanece na mesma jornada<br>
se a distancia for maior ou igual a tempoDescansoJornada separar em duas exatamente nesse ponto</p>
                                <p>SE SEPARAR entre jornadas teremos entao:<br>
jornadaNova1Afetada - pega os registros antes do delete daquela jornada<br>
jornadaNova2Afetada - pega os registros depois do delete daquela jornada<br>
O primeiro registro da jornadaNova2Afetada  OBRIGATORIAMENTE VIRA UMA ENTRADA - Reordenar e recalcular a partir desse ponto ate acabar os registros da jornadaNova2Afetada e encerraExecucao<br>
isso pode deixar a nova jornada inconsistente (impar)</p>
                                <p>SE N√£o SEPARAR entre jornadas teremos entao:<br>
uma unica jornada afetada que precisa reordenar os tipos a partir do registro anterior ao deletado, encerraExecucao<br>
(nenhum registro anterior ao deletado muda  -  apenas posterior)</p>
                                <p>OBS: Nao precisamos buscar a jornadaAnterior ou jornadaPosterior<br>
isso nunca impacta jornadas, somente a que o registro sera deletado<br>
isso nunca impacta jornada anterior<br>
isso nunca impacta jornada posterior<br>
Nao impactas jornadas posterior e anterior, somente a jornadaAfetada. A unica coisa q pode acontecer √© aumentar o tempo entre registros e rasgar a jornadaAfetado nos meio em duas</p>
                                <p>porque na delecao voce nao cria continuidade no tempo<br>
voce apenas aumenta a distancia entre dois registros<br>
e essa nova distancia so pode causar uma unica separacao exatamente no ponto removido<br>
Todas as jornadas alteradas precisam recalcular as quantidades de horas esperadas totais e trabalhadas</p>
                            </div>
                        </details>

                        <details class="doc-tecnica mt-4 border border-stone-200 rounded-lg">
                            <summary class="flex items-center gap-2 bg-stone-50 hover:bg-stone-100 px-4 py-3 font-medium text-stone-800 list-none cursor-pointer">
                                <span class="fold-chevron">‚ñ∂</span>
                                3. Calculo Banco Horas Aplicativo
                            </summary>
                            <div class="p-5 border-t border-stone-200 space-y-4 text-sm text-stone-700">
                                <p>Logica para registro via aplicativo (tablet publico ou app funcionario). Usa EstadoJornadaFuncionario (ultimaBatida, tipoUltimaBatida, ultimaJornadaId) e tempoDescansoEntreJornada. Se o novo registro e o ultimo registro estao no mesmo range (diff &lt; tempoDescansoEntreJornada) - mesma jornada. Caso contrario - nova jornada com tipo do ponto ENTRADA.</p>
                                <p>Buscar tempoDescansoEntreJornada - jornadaConfig empresa ou funcionario (funcionario sobrescreve empresa). Guardar em variavel (minutos).</p>
                                <p>Buscar estado do funcionario - EstadoJornadaFuncionario - findByFuncionarioIdForUpdate(funcionarioId).</p>
                                <p>Se existe estado e estado.ultimaJornadaId nao e null:<br>
buscar ResumoPontoDia (jornadaAtual) por id = ultimaJornadaId.<br>
Calcular diff em minutos entre estado.ultimaBatida e created_at do novo ponto.<br>
Se diff &gt;= 0 e diff &lt;= tempoDescanso (em minutos) - mesmaJornada = true.</p>
                                <p>Se mesmaJornada e jornadaAtual != null - vincularAResumoERecalcular. Senao - criarNovaJornadaEAtualizarEstado.</p>
                                <p>vincularAResumoERecalcular:<br>
Criar xref (XrefPontoResumo) registroPontoId = idRegistro, resumoPontoDiaId = resumo.id - save.<br>
Buscar lista xref por resumoPontoDiaId. Pegar ids dos registros. Buscar registros por ids ordenados por dataRegistro asc.<br>
obterJornadaConfig (funcionario ou empresa). recalcularResumo(resumo, registros, config).<br>
Recalcular resumo: ordenar registros por createdAt. primeiraBatida = primeiro registro, ultimaBatida = ultimo. Somar minutos entre pares entrada-saida - totalHorasTrabalhadas. totalHorasEsperadas = config.cargaDiaria. Se quantidade de registros impar - inconsistente true, motivoInconsistencia IMPAR. Senao inconsistente false.<br>
Save resumo. Atualizar estado: ultimaBatida = createdAt, ultimaJornadaId = resumo.id, tipoUltimaBatida = tipoEntradaNovo ? ENTRADA : SAIDA - save estado.</p>
                                <p>criarNovaJornadaEAtualizarEstado:<br>
Buscar registro por id e funcionarioId. Setar tipoEntrada = true (primeiro da nova jornada e ENTRADA obrigatoriamente). Save registro.<br>
obterJornadaConfig. Criar novo ResumoPontoDia: primeiraBatida e ultimaBatida = dataRegistro, totalHorasTrabalhadas = ZERO, totalHorasEsperadas = config.cargaDiaria, inconsistente = true, motivoInconsistencia = IMPAR, ativo = true - save.<br>
Criar xref vinculando idRegistro ao novo resumo - save.<br>
Estado: se estadoExistente null criar novo (funcionarioId, empresaId). ultimaBatida = created_at, tipoUltimaBatida = ENTRADA, ultimaJornadaId = resumo.id - save estado.</p>
                            </div>
                        </details>

                        <details class="doc-tecnica mt-4 border border-stone-200 rounded-lg">
                            <summary class="flex items-center gap-2 bg-stone-50 hover:bg-stone-100 px-4 py-3 font-medium text-stone-800 list-none cursor-pointer">
                                <span class="fold-chevron">‚ñ∂</span>
                                4. M√©tricas di√°rias e lock
                            </summary>
                            <div class="p-5 border-t border-stone-200 space-y-4 text-sm text-stone-700">
                                <p><strong>MetricasDiariaEmpresaContadorService</strong> atualiza snapshot di√°rio (quantidadeFuncionarios, solicitacoesPendentes, totalDoDia, totalPontoHoje). Para evitar race: o lock √© por <strong>(empresa_id, data_ref)</strong>, n√£o por ID da m√©trica.</p>
                                <p><strong>Ordem obrigat√≥ria:</strong> (1) Adquirir lock(empresaId, dataRef); (2) Obter ou criar m√©trica para dataRef; (3) Alterar e salvar; (4) Liberar lock(empresaId, dataRef). Assim ningu√©m carrega a m√©trica desatualizada enquanto outro thread est√° alterando.</p>
                                <p>Tabela <code>metricas_diaria_empresa_lock</code>: PK (empresa_id, data_ref). INSERT ON CONFLICT DO NOTHING para tentar adquirir; DELETE para liberar. Retries com backoff se n√£o conseguir inserir.</p>
                            </div>
                        </details>
                    </div>
                </details>
            </div>
        </section>

    </main>

    <!-- Modal de Prototipa√ß√£o -->
    <div id="prototype-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <div class="bg-stone-50 px-6 py-4 border-b border-stone-200 flex justify-between items-center">
                <h3 id="modal-title" class="text-xl font-bold text-stone-800"></h3>
                <button onclick="closePrototypeModal()" class="text-stone-500 hover:text-stone-700 text-2xl font-bold">&times;</button>
            </div>
            <div class="flex-grow overflow-y-auto p-6">
                <div id="modal-content" class="space-y-4">
                    <!-- Conte√∫do ser√° preenchido dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-sm">Sistema de Ponto SaaS Spec ‚Ä¢ Generated from Senior Architect Brief</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Definitions (from Markdown Source) ---
        const schemas = {
            usuario: {
                title: "0. Users (Entidade Usu√°rio)",
                desc: "Entidade gen√©rica de usu√°rio do sistema (funcion√°rio, empresa, etc). Centraliza o tipo de usu√°rio.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: users ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "username": "String (NOT NULL, UNIQUE)",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "dataDesativacao": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "tipoUsuarioId": "Integer (FK ‚Üí tipo_usuario.id, NOT NULL)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELAS DE DOM√çNIO (Usu√°rio) ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_usuario ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: FUNCIONARIO, EMPRESA
  "ativo": "Boolean (NOT NULL, Default: true)"
}`
            },
            funcionario: {
                title: "1. Funcion√°rio (Employee)",
                desc: "Dados completos para opera√ß√£o, folha e regras individuais. Inclui controle de jornada e banco de horas.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: identificacao_funcionario ‚îÄ‚îÄ‚îÄ
// Listagens exibem apenas primeiroNome + ultimoNome. Cadastro: nomeCompleto primeiro; front auto-preenche primeiro/ultimo em tempo real.
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL, UNIQUE)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "nomeCompleto": "String (NOT NULL)",
  "primeiroNome": "String (NOT NULL) - primeira palavra do nome_completo",
  "ultimoNome": "String (NOT NULL) - √∫ltima palavra do nome_completo",
  "cpf": "String (NOT NULL, UNIQUE)",
  "codigoPonto": "Integer (NOT NULL, Max: 999999)",
  "dataNascimento": "DATE (Nullable), ex: yyyy-MM-dd",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "UNIQUE(empresaId, funcionarioId)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: funcionario_registro_lock ‚îÄ‚îÄ‚îÄ
// Lock por funcion√°rio para serializar registro de ponto (evitar race em batida).
{
  "funcionarioId": "UUID (PK, FK ‚Üí users.id, ON DELETE CASCADE)",
  "empresaId": "UUID (NOT NULL, FK ‚Üí users.id, ON DELETE CASCADE)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: usuario_telefone ‚îÄ‚îÄ‚îÄ (Delete f√≠sico)
// Nota: Compartilhada entre funcion√°rios e empresas.
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "codigoPais": "String (NOT NULL)",
  "ddd": "String (NOT NULL)",
  "numero": "String (NOT NULL)",
  "UNIQUE(codigoPais, ddd, numero)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: contrato_funcionario ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "matricula": "String (Nullable, UNIQUE)",
  "pisPasep": "String (Nullable, UNIQUE)",
  "cargo": "String (NOT NULL)",
  "departamento": "String (Nullable)",
  "tipoContratoId": "Integer (FK ‚Üí tipo_contrato.id, NOT NULL)", // Valores: CLT, PJ, ESTAGIO
  "ativo": "Boolean (NOT NULL, Default: true)",
  "dataAdmissao": "DATE (NOT NULL), ex: yyyy-MM-dd",
  "dataDemissao": "DATE (Nullable), ex: yyyy-MM-dd",
  "salarioMensal": "BigDecimal (NOT NULL)",
  "salarioHora": "BigDecimal (Calculado, NOT NULL)",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: xref_contrato_adicionais ‚îÄ‚îÄ‚îÄ
// Tabela de relacionamento N:N: Um contrato pode ter m√∫ltiplos adicionais (NOTURNO, PERICULOSIDADE, INSALUBRIDADE)
{
  "id": "UUID (PK)",
  "contratoId": "UUID (FK ‚Üí contrato_funcionario.id, NOT NULL)",
  "tipoAdicionalTrabalhoId": "Integer (FK ‚Üí tipo_adicional_trabalho.id, NOT NULL)", // Valores: NOTURNO, PERICULOSIDADE, INSALUBRIDADE
  "UNIQUE(contratoId, tipoAdicionalTrabalhoId)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: jornada_funcionario_config ‚îÄ‚îÄ‚îÄ
// Se existir, sobrescreve empresa_jornada_config para esse funcion√°rio. Mesmos campos de controle de jornada.
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL, UNIQUE)",
  "tipoEscalaJornadaId": "Integer (FK ‚Üí tipo_escala_jornada.id, NOT NULL)", // Valores: 5x2, 6x1, 12x36
  "cargaHorariaDiaria": "TIME (NOT NULL), ex: HH:mm:ss",
  "cargaHorariaSemanal": "Integer (NOT NULL)",
  "toleranciaPadrao": "Duration ISO-8601 (NOT NULL, Default: PT0S), ex: PT0S, PT15M",
  "intervaloPadrao": "Duration ISO-8601 (NOT NULL), ex: PT1H",
  "entradaPadrao": "TIME (NOT NULL), ex: HH:mm:ss",
  "saidaPadrao": "TIME (NOT NULL), ex: HH:mm:ss",
  "tempoDescansoEntreJornada": "Duration ISO-8601 (NOT NULL, Default: PT11H), ex: PT11H (CLT art. 66)",
  "gravaGeoObrigatoria": "Boolean (NOT NULL, Default: false)",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: usuario_geofence ‚îÄ‚îÄ‚îÄ
// Nota: Esta tabela √© compartilhada entre funcion√°rios e empresas. Duplicada aqui apenas para visualiza√ß√£o.
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "descricao": "String (NOT NULL)",
  "latitude": "BigDecimal (NOT NULL)",
  "longitude": "BigDecimal (NOT NULL)",
  "raioMetros": "Integer (NOT NULL, Default: 100)",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(usuarioId)"
}

// ‚îÄ‚îÄ‚îÄ TABELAS DE DOM√çNIO (Funcion√°rio) ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_contrato ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: CLT, PJ, ESTAGIO
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_adicional_trabalho ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: NOTURNO, PERICULOSIDADE, INSALUBRIDADE
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_escala_jornada ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: 5x2, 6x1, 12x36
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_dispositivo ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: WEB, MOBILE, BIOMETRIA
  "ativo": "Boolean (NOT NULL, Default: true)"
}

`
            },
            empresa: {
                title: "2. Empresa (Tenant)",
                desc: "Configura√ß√µes globais e fiscais. Define as regras padr√£o que os funcion√°rios herdam. Cadastro cria users, empresa_dados_fiscal, empresa_endereco, usuario_telefone, user_credential (email) e user_password.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: empresa_dados_fiscal ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL, UNIQUE)",
  "razaoSocial": "String (NOT NULL)",
  "cnpj": "String (NOT NULL, UNIQUE)",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: usuario_telefone ‚îÄ‚îÄ‚îÄ (Delete f√≠sico)
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "codigoPais": "String (NOT NULL)",
  "ddd": "String (NOT NULL)",
  "numero": "String (NOT NULL)",
  "UNIQUE(codigoPais, ddd, numero)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: empresa_endereco ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL, UNIQUE)",
  "rua": "String (NOT NULL)",
  "numero": "String (NOT NULL)",
  "complemento": "String (Nullable)",
  "bairro": "String (NOT NULL)",
  "cidade": "String (NOT NULL)",
  "uf": "String (NOT NULL, Length: 2)",
  "cep": "String (NOT NULL, Length: 8)",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: usuario_geofence ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "descricao": "String (NOT NULL)",
  "latitude": "BigDecimal (NOT NULL)",
  "longitude": "BigDecimal (NOT NULL)",
  "raioMetros": "Integer (NOT NULL, Default: 100)",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(usuarioId)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: geofence_empresa_config ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "geofenceId": "UUID (FK ‚Üí usuario_geofence.id, NOT NULL, UNIQUE)",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: xref_geofence_funcionarios ‚îÄ‚îÄ‚îÄ
// Tabela de relacionamento N:N: Um geofence pode ter m√∫ltiplos funcion√°rios permitidos e um funcion√°rio pode ter acesso a m√∫ltiplos geofences
{
  "id": "UUID (PK)",
  "geofenceId": "UUID (FK ‚Üí usuario_geofence.id, NOT NULL)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "UNIQUE(geofenceId, funcionarioId)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: empresa_jornada_config ‚îÄ‚îÄ‚îÄ
// Jornada padr√£o da empresa. Funcion√°rio pode sobrescrever via jornada_funcionario_config.
{
  "id": "UUID (PK)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL, UNIQUE)",
  "tipoEscalaJornadaId": "Integer (FK ‚Üí tipo_escala_jornada.id, NOT NULL)", // Valores: 5x2, 6x1, 12x36
  "cargaHorariaDiaria": "TIME (NOT NULL), ex: HH:mm:ss",
  "cargaHorariaSemanal": "Integer (NOT NULL)",
  "toleranciaPadrao": "Duration ISO-8601 (NOT NULL, Default: PT0S), ex: PT0S, PT15M",
  "intervaloPadrao": "Duration ISO-8601 (NOT NULL), ex: PT1H",
  "entradaPadrao": "TIME (NOT NULL), ex: HH:mm:ss",
  "saidaPadrao": "TIME (NOT NULL), ex: HH:mm:ss",
  "tempoDescansoEntreJornada": "Duration ISO-8601 (NOT NULL, Default: PT11H), ex: PT11H (CLT art. 66)",
  "timezone": "String (NOT NULL, Default: 'America/Sao_Paulo')",
  "gravaGeoObrigatoria": "Boolean (NOT NULL, Default: false)",
  "gravaPontoApenasEmGeofence": "Boolean (NOT NULL, Default: false)",
  "permiteAjustePonto": "Boolean (NOT NULL, Default: false)", // false = precisa solicita√ß√£o/aprova√ß√£o, true = permite cria√ß√£o/remo√ß√£o direta
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: empresa_compliance ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL, UNIQUE)",
  "controlePontoObrigatorio": "Boolean (NOT NULL, Default: true)", // Regra autom√°tica: acima de 20 funcion√°rios = true
  "tipoModeloPontoId": "Integer (FK ‚Üí tipo_modelo_ponto.id, NOT NULL)", // Valores: ELETRONICO 
  "tempoRetencaoAnos": "Integer (NOT NULL, Min: 5)",
  "auditoriaAtiva": "Boolean (NOT NULL, Default: true)",
  "assinaturaDigitalObrigatoria": "Boolean (NOT NULL, Default: true)",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: empresa_banco_horas_config ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL, UNIQUE)",
  "ativo": "Boolean (NOT NULL, Default: false)",
  "totalDiasVencimento": "Integer (NOT NULL), total de dias para vencimento do banco de horas",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: metricas_diaria_empresa ‚îÄ‚îÄ‚îÄ
// Snapshot di√°rio por empresa (um registro por dia). total_ponto_hoje reseta a cada dia;
// total_do_dia = total de horas trabalhadas no dia (Duration).
// quantidade_funcionarios evolui no tempo; solicitacoes_pendentes sobe/desce.
{
  "id": "UUID (PK)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "dataRef": "DATE (NOT NULL), dia do snapshot",
  "anoRef": "SMALLINT (NOT NULL)",
  "mesRef": "SMALLINT (NOT NULL, 1-12)",
  "quantidadeFuncionarios": "Integer (NOT NULL, Default: 0). Evolu√ß√£o di√°ria no tempo (ex: 100 dia 10, 105 dia 2). N√£o reseta.",
  "solicitacoesPendentes": "Integer (NOT NULL, Default: 0). Sobe ou desce.",
  "totalDoDia": "Duration VARCHAR(20) (NOT NULL, Default: PT0S). Total de horas trabalhadas no dia.",
  "totalPontoHoje": "Integer (NOT NULL, Default: 0). √önico que reseta a zero a cada dia.",
  "UNIQUE(empresaId, dataRef)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: metricas_diaria_empresa_lock ‚îÄ‚îÄ‚îÄ
// Lock por (empresa_id, data_ref): adquirir ANTES de obter/criar a m√©trica do dia para evitar race.
// Sem FK para metricas_diaria_empresa; serializa atualiza√ß√£o por dia.
{
  "empresaId": "UUID (PK, FK ‚Üí users.id, NOT NULL)",
  "dataRef": "DATE (PK, NOT NULL). Dia do snapshot a ser atualizado.",
  "PRIMARY KEY (empresaId, dataRef)"
}

// ‚îÄ‚îÄ‚îÄ TABELAS DE DOM√çNIO (Empresa) ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_modelo_ponto ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: ELETRONICO
  "ativo": "Boolean (NOT NULL, Default: true)"
}`
            },
            registro: {
                title: "3. Registro de Ponto (Imut√°vel)",
                desc: "A verdade fiscal. Tabela de fatos base para auditoria. Momento do registro = created_at (LocalDateTime). O backend grava dia_semana no INSERT a partir de created_at. Batida (app, tablet): created_at = instante da requisi√ß√£o. Registro manual: created_at = hor√°rio enviado pelo front. Jornada: conjunto de registros com intervalo entre eles menor que tempoDescansoEntreJornada (resumo_ponto_dia); v√≠nculo registro‚Üîjornada em xref_ponto_resumo. Entrada manual: ServiceCalcularBancoHorasEntradaManual busca jornada afetada por range (descanso), inclui novo registro, reordena tipos (entrada/sa√≠da), valida impacto em jornada anterior/posterior e junta se intervalo \u003c descanso.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: registro_ponto ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "idempotencyKey": "UUID (NOT NULL, UNIQUE). Chave enviada no header Idempotency-Key na batida (app/tablet); gravada para evitar duplicidade.",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "diaSemana": "String (NOT NULL), gravado pelo backend no INSERT a partir de created_at. Valores: SEG, TER, QUA, QUI, SEX, SAB, DOM",
  "dispositivoId": "UUID (FK ‚Üí dispositivo.id, NOT NULL)",
  "tipoMarcacaoId": "Integer (FK ‚Üí tipo_marcacao.id, NOT NULL)", // Valores: MANUAL, SISTEMA
  "descricao": "String (Nullable)",
  "createdAt": "TIMESTAMP (NOT NULL). LocalDateTime. Momento do registro. Batida: backend. Manual: hor√°rio enviado pelo front.",
  "INDEX(usuarioId, createdAt)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: registro_metadados ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "registroId": "UUID (FK ‚Üí registro_ponto.id, NOT NULL, UNIQUE)",
  "geoLatitude": "Double (Nullable)",
  "geoLongitude": "Double (Nullable)",
  "assinaturaDigital": "String (NOT NULL, Base64)",
  "certificadoSerial": "String (NOT NULL)",
  "timestampAssinatura": "TIMESTAMP (NOT NULL). LocalDateTime, ex: yyyy-MM-ddTHH:mm:ss",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: resumo_ponto_dia (Jornada) ‚îÄ‚îÄ‚îÄ
// Jornada = conjunto de registros de ponto cujo intervalo entre eles √© menor que tempoDescansoEntreJornada (ex: 11h).
// Quando o intervalo entre dois registros √© >= descanso, √© considerada nova jornada. Campos primeiraBatida e ultimaBatida delimitam a jornada.
// Atualizado no write (batida app ou entrada manual). Dura√ß√£o em VARCHAR(20) serializado (ex: PT8H30M).
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "primeiraBatida": "TIMESTAMP (Nullable). LocalDateTime",
  "ultimaBatida": "TIMESTAMP (Nullable). LocalDateTime",
  "totalHorasTrabalhadas": "VARCHAR(20) (NOT NULL, Default: PT0S)",
  "totalHorasEsperadas": "VARCHAR(20) (NOT NULL, Default: PT0S)",
  "quantidadeRegistros": "Integer (NOT NULL, Default: 0). N√∫mero de registros de ponto da jornada.",
  "inconsistente": "Boolean (NOT NULL, Default: false)",
  "motivoInconsistencia": "String (Nullable, length 50)",
  "dataRef": "TIMESTAMP (NOT NULL). Data de refer√™ncia da jornada.",
  "INDEX(funcionario_id, primeira_batida)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: estado_jornada_funcionario ‚îÄ‚îÄ‚îÄ
// Estado vivo: √∫ltima batida, tipo e √∫ltima jornada para decidir pr√≥xima (batida app).
{
  "funcionarioId": "UUID (PK, FK ‚Üí users.id, ON DELETE CASCADE)",
  "empresaId": "UUID (NOT NULL, FK ‚Üí users.id, ON DELETE CASCADE)",
  "ultimaBatida": "TIMESTAMP (NOT NULL)",
  "tipoUltimaBatida": "VARCHAR(7) (NOT NULL), ENTRADA | SAIDA",
  "ultimaJornadaId": "UUID (Nullable, FK ‚Üí resumo_ponto_dia.id, ON DELETE SET NULL)",
  "updatedAt": "TIMESTAMP (NOT NULL)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: xref_ponto_resumo ‚îÄ‚îÄ‚îÄ
// V√≠nculo entre registro_ponto e resumo_ponto_dia (jornada). Um registro de ponto pertence a uma √∫nica jornada.
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "registroPontoId": "UUID (FK ‚Üí registro_ponto.id, NOT NULL, UNIQUE)",
  "resumoPontoDiaId": "UUID (FK ‚Üí resumo_ponto_dia.id, NOT NULL)",
  "dataRef": "TIMESTAMP (NOT NULL), data de refer√™ncia do registro na jornada",
  "UNIQUE(registro_ponto_id)",
  "UNIQUE(funcionario_id, data_ref)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_solicitacao_ponto ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Valores: CRIAR, REMOVER
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: solicitacao_ponto (unificada: criar ou remover registro) ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "idempotencyKey": "UUID (NOT NULL, UNIQUE). Chave enviada no header Idempotency-Key ao criar solicita√ß√£o; evita duplicidade.",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "tipoSolicitacaoId": "Integer (FK ‚Üí tipo_solicitacao_ponto.id, NOT NULL)", // 1=CRIAR, 2=REMOVER
  "dataHoraRegistro": "TIMESTAMP (Nullable)", // Preenchido quando tipo=CRIAR
  "registroPontoId": "UUID (Nullable, FK ‚Üí registro_ponto.id)", // Preenchido quando tipo=REMOVER
  "tipoJustificativaId": "Integer (FK ‚Üí tipo_justificativa.id, NOT NULL)",
  "aprovado": "Boolean (Nullable)",
  "empresaAprovacaoId": "UUID (Nullable, FK ‚Üí users.id da empresa que aprovou)",
  "observacaoAprovacao": "String (Nullable)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "dataAprovacao": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(usuarioId)",
  "INDEX(tipoSolicitacaoId)",
  "INDEX(aprovado)"
}

// ‚îÄ‚îÄ‚îÄ TABELAS DE DOM√çNIO (Registro) ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_marcacao ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: MANUAL, SISTEMA
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_justificativa ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: ESQUECI_BATER, FALHA_SISTEMA, REGISTRO_ERRADO, OUTROS, ATRASO_TRANSPORTE, etc.
  "ativo": "Boolean (NOT NULL, Default: true)"
}`
            },
            credencial: {
                title: "4. User Credential (Login)",
                desc: "Armazena credenciais de autentica√ß√£o para funcion√°rios e empresas. Senha sempre em hash. categoriaCredentialId indica se √© PRIMARIO (principal) ou SECUNDARIO (adicional).",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: user_credential ‚îÄ‚îÄ‚îÄ (Delete f√≠sico)
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "tipoCredencialId": "Integer (FK ‚Üí tipo_credential.id, NOT NULL)", // Valores em tipo_credential: EMAIL, TELEFONE, CPF, CNPJ, USERNAME
  "categoriaCredentialId": "Integer (FK ‚Üí tipo_categoria_credential.id, NOT NULL, Default: PRIMARIO)", // Valores: PRIMARIO, SECUNDARIO
  "valor": "String (NOT NULL, UNIQUE)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: user_password ‚îÄ‚îÄ‚îÄ (Senha √∫nica por usu√°rio, n√£o por credencial. Nunca UPDATE. Desativar antiga + inserir nova.)
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "senhaHash": "String (NOT NULL)",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "dataExpiracao": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "dataDesativacao": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss"
}

// ‚îÄ‚îÄ‚îÄ TABELA: historico_bloqueio (usuarioId NAO e UNIQUE - um usuario pode ter varios registros ao longo do tempo) ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "dataBloqueio": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "motivoBloqueio": "String (Nullable)",
  "dataDesativacao": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(usuarioId, ativo)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: credencial_token_recuperacao ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "tipoTokenRecuperacaoId": "Integer (FK ‚Üí tipo_token_recuperacao.id, NOT NULL)", // Valores: CODIGO_EMAIL, TOKEN_RESET
  "token": "String (NOT NULL, UNIQUE)",
  "dataExpiracao": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "dataDesativacao": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(usuarioId, dataExpiracao)",
  "INDEX(token)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: dispositivo ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "nomeDispositivo": "String (Nullable)",
  "sistemaOperacional": "String (Nullable)",
  "versaoApp": "String (Nullable)",
  "modeloDispositivo": "String (Nullable)",
  "ipAddress": "String (Nullable)",
  "userAgent": "String (Nullable)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: historico_login ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "credencialId": "UUID (FK ‚Üí user_credential.id, NOT NULL)",
  "dataLogin": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "dispositivoId": "UUID (FK ‚Üí dispositivo.id, Nullable)",
  "sucesso": "Boolean (NOT NULL)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(credencialId, dataLogin)",
  "INDEX(dispositivoId)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: sessao_ativa ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "credencialId": "UUID (FK ‚Üí user_credential.id, NOT NULL)",
  "token": "String (NOT NULL, UNIQUE)",
  "dispositivoId": "UUID (FK ‚Üí dispositivo.id, Nullable)",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "dataExpiracao": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "dataDesativacao": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(credencialId)",
  "INDEX(token)",
  "INDEX(dataExpiracao)"
}

// ‚îÄ‚îÄ‚îÄ TABELAS DE DOM√çNIO (Credencial) ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_credential ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Valores: EMAIL, TELEFONE, CPF, CNPJ, USERNAME
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_categoria_credential ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Valores: PRIMARIO, SECUNDARIO (indica se credencial √© principal ou secund√°ria do usu√°rio)
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_token_recuperacao ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: CODIGO_EMAIL, TOKEN_RESET
  "ativo": "Boolean (NOT NULL, Default: true)"
}`
            },
            alertas: {
                title: "5. Alertas/Diverg√™ncias",
                desc: "Sistema de alertas e diverg√™ncias para espelhamento de ponto e valida√ß√£o de registros.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: alerta_divergencia ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "dataDivergencia": "DATE (NOT NULL), ex: yyyy-MM-dd",
  "tipoAlertaId": "Integer (FK ‚Üí tipo_alerta.id, NOT NULL)", // Valores: ATRASO, SAIDA_ANTECIPADA, HORAS_EXCEDIDAS, FALTA_REGISTRO, DIVERGENCIA_ESPELHAMENTO
  "registroPontoId": "UUID (FK ‚Üí registro_ponto.id, Nullable)",
  "descricao": "String (NOT NULL)",
  "severidade": "String (NOT NULL)", // Valores: BAIXA, MEDIA, ALTA, CRITICA
  "ativo": "Boolean (NOT NULL, Default: true)",
  "dataResolucao": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "usuarioResolucaoId": "UUID (Nullable)",
  "observacaoResolucao": "String (Nullable)",
  "tipoJustificativaId": "Integer (FK ‚Üí tipo_justificativa.id, Nullable)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(funcionarioId, dataDivergencia)",
  "INDEX(tipoAlertaId, ativo)",
  "INDEX(ativo, createdAt)"
}

// ‚îÄ‚îÄ‚îÄ TABELAS DE DOM√çNIO (Alertas) ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_alerta ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: ATRASO, SAIDA_ANTECIPADA, HORAS_EXCEDIDAS, FALTA_REGISTRO, DIVERGENCIA_ESPELHAMENTO
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_justificativa ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: ATRASO_TRANSPORTE, EMERGENCIA_MEDICA, PROBLEMA_TECNICO, OUTROS
  "ativo": "Boolean (NOT NULL, Default: true)"
}`
            },
            banco_horas: {
                title: "6. Banco de Horas (fechamento mensal)",
                desc: "Fechamento mensal gravado em banco_horas_historico. Endpoint fechamento grava; relat√≥rio ponto resumo l√™.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: banco_horas_historico ‚îÄ‚îÄ‚îÄ
// Fechamento mensal por funcion√°rio.
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "anoReferencia": "Integer (NOT NULL)",
  "mesReferencia": "Integer (NOT NULL)",
  "totalHorasEsperadas": "Integer (NOT NULL, Default: 0) - minutos",
  "totalHorasTrabalhadas": "Integer (NOT NULL, Default: 0) - minutos",
  "totalBancoHorasFinal": "Integer (NOT NULL, Default: 0) - minutos, pode ser negativo",
  "status": "VARCHAR(20) - ABERTO | FECHADO | REABERTO | AJUSTADO",
  "createdAt": "TIMESTAMP (NOT NULL)",
  "UNIQUE(funcionarioId, anoReferencia, mesReferencia)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: banco_horas_mensal ‚îÄ‚îÄ‚îÄ
// Totais mensais por funcion√°rio; recalculado ao alterar ponto (entrada manual / soft delete).
// totalHoras* em VARCHAR(20) serializado (ex: PT8H30M), como em resumo_ponto_dia.
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "empresaId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "mesRef": "Integer (NOT NULL)",
  "anoRef": "Integer (NOT NULL)",
  "totalHorasEsperadas": "VARCHAR(20) (NOT NULL, Default: PT0S) - Duration",
  "totalHorasTrabalhadas": "VARCHAR(20) (NOT NULL, Default: PT0S) - Duration",
  "totalHorasTrabalhadasFeriado": "VARCHAR(20) (NOT NULL, Default: PT0S) - Duration",
  "inconsistente": "Boolean (NOT NULL, Default: false)",
  "motivoInconsistencia": "String (Nullable, length 255)",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "dataDesativacao": "TIMESTAMP (Nullable)",
  "createdAt": "TIMESTAMP (NOT NULL)",
  "UNIQUE(funcionarioId, anoRef, mesRef)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: afastamento ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "funcionarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "tipoAfastamentoId": "Integer (FK ‚Üí tipo_afastamento.id, NOT NULL)",
  "dataInicio": "DATE (NOT NULL), ex: yyyy-MM-dd",
  "dataFim": "DATE (Nullable), ex: yyyy-MM-dd",
  "observacao": "String (Nullable)",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "updatedAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(funcionarioId, dataInicio)",
  "INDEX(ativo, dataInicio)"
}

// ‚îÄ‚îÄ‚îÄ TABELAS DE DOM√çNIO (Banco de Horas) ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_afastamento ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: FERIAS, LICENCA_MEDICA, ATESTADO, LICENCA_MATERNIDADE, FALTA_JUSTIFICADA
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_status_pagamento ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Valores: PENDENTE, PARCIAL, PAGO (status de pagamento/compensa√ß√£o do banco de horas)
  "ativo": "Boolean (NOT NULL, Default: true)"
}`
            },
            auditoria: {
                title: "7. Auditoria (Log de Atividades)",
                desc: "Registro imut√°vel de todas as a√ß√µes realizadas no sistema para compliance e rastreabilidade.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: auditoria_log ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "acao": "String (NOT NULL)", // Ex: CREATE, UPDATE, DELETE, LOGIN, LOGOUT
  "descricao": "String (Nullable)",
  "dadosAntigos": "JSONB (Nullable)",
  "dadosNovos": "JSONB (Nullable)",
  "dispositivoId": "UUID (FK ‚Üí dispositivo.id, Nullable)",
  "sucesso": "Boolean (NOT NULL)",
  "mensagemErro": "String (Nullable)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(usuarioId, createdAt)",
  "INDEX(dispositivoId)",
  "INDEX(acao, createdAt)"
}`
            },
            notificacao: {
                title: "8. Notifica√ß√µes",
                desc: "Sistema de notifica√ß√µes para alertas, avisos e comunica√ß√µes do sistema.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: notificacao ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)",
  "titulo": "String (NOT NULL)",
  "mensagem": "String (NOT NULL)",
  "tipoNotificacaoId": "Integer (FK ‚Üí tipo_notificacao.id, NOT NULL)",
  "lida": "Boolean (NOT NULL, Default: false)",
  "dataLeitura": "TIMESTAMP (Nullable), ex: DD-MM-YYYY HH:mm:ss",
  "linkAcao": "String (Nullable)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(usuarioId, lida)",
  "INDEX(lida, createdAt)"
}

// ‚îÄ‚îÄ‚îÄ TABELAS DE DOM√çNIO (Notifica√ß√µes) ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ‚îÄ TABELA: tipo_notificacao ‚îÄ‚îÄ‚îÄ
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL)", // Exemplos: ALERTA_DIVERGENCIA, AJUSTE_APROVADO, BANCO_HORAS_VENCIDO, SISTEMA
  "ativo": "Boolean (NOT NULL, Default: true)"
}`
            },
            feriado: {
                title: "9. Feriado",
                desc: "Cadastro de feriados com tipo (Nacional, Estadual, Municipal). Usado para c√°lculo de ocorr√™ncia do dia (ex.: FERIADO no resumo de ponto) e regras de jornada. usuario_id = usu√°rio que criou (empresa ou admin). Listagem empresa: feriados da empresa + feriados criados por Admin (join users.tipo_usuario_id = ADMIN). Restri√ß√£o: Empresa s√≥ pode cadastrar ESTADUAL ou MUNICIPAL; NACIONAL √© exclusivo do admin.",
                json: `// ‚îÄ‚îÄ‚îÄ TABELA: tipo_feriado ‚îÄ‚îÄ‚îÄ
// Cat√°logo: NACIONAL | ESTADUAL | MUNICIPAL (abrang√™ncia do feriado).
{
  "id": "Integer (PK, Auto Increment)",
  "descricao": "String (NOT NULL, UNIQUE)", // Valores: NACIONAL, ESTADUAL, MUNICIPAL
  "ativo": "Boolean (NOT NULL, Default: true)"
}

// ‚îÄ‚îÄ‚îÄ TABELA: feriado ‚îÄ‚îÄ‚îÄ
{
  "id": "UUID (PK)",
  "data": "DATE (NOT NULL), ex: yyyy-MM-dd - dia do feriado",
  "descricao": "String (NOT NULL)", // Ex.: Natal, Ano Novo, Feriado Municipal
  "tipoFeriadoId": "Integer (FK ‚Üí tipo_feriado.id, NOT NULL)", // NACIONAL, ESTADUAL ou MUNICIPAL
  "usuarioId": "UUID (FK ‚Üí users.id, NOT NULL)", // Usu√°rio que criou (empresa ou admin). Preenchido no service a partir do JWT.",
  "ativo": "Boolean (NOT NULL, Default: true)",
  "createdAt": "TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss",
  "INDEX(data)",
  "INDEX(usuarioId, data)"
}`
            }
        };

        // --- Navigation Logic ---
        function switchTab(viewId) {
            // Update Tab Styles
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Hide all views
            document.querySelectorAll('main > section').forEach(el => el.classList.add('hidden'));

            // Show selected view
            const selectedView = document.getElementById(`view-${viewId}`);
            selectedView.classList.remove('hidden');
            
            // Re-render chart if navigating to projects to ensure size is correct
            if(viewId === 'projects') {
                renderChart();
            }
            
            // Render endpoints if navigating to endpoints view
            if(viewId === 'endpoints') {
                renderEndpoints();
            }
        }

        // --- Endpoints Documentation (por controller ‚Äî use code folding) ---
        const endpointsByController = {
            // #region Auth
            auth: [
                {
                    id: 0,
                    method: 'POST',
                    url: '/api/auth',
                    description: 'Login de usu√°rio',
                    auth: false,
                    statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                    body: {
                        valor: 'String (NOT NULL) ‚Äî valor da credencial (email, CPF ou username conforme tipoCredencial)',
                        tipoCredencial: 'EMAIL | TELEFONE | CPF | CNPJ | USERNAME (NOT NULL)',
                        senha: 'String (NOT NULL, min 6 chars, mai√∫scula + n√∫mero/s√≠mbolo)'
                    },
                    response: {
                        jwt: 'String (token de acesso)',
                        jwtExpires: 'String (expira√ß√£o do JWT)',
                        refreshToken: 'String (token de refresh)',
                        refreshTokenExpires: 'String (expira√ß√£o do refresh token)'
                    }
                },
            {
                id: 1,
                method: 'POST',
                url: '/api/auth/recuperar-senha',
                description: 'Gerar c√≥digo de recupera√ß√£o de senha',
                auth: false,
                statusCode: '200 (OK). 400 Bad Request, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    email: 'String (NOT NULL)'
                },
                notes: 'Backend gera c√≥digo e envia por email.'
            },
            {
                id: 2,
                method: 'POST',
                url: '/api/auth/validar-codigo',
                description: 'Validar c√≥digo de recupera√ß√£o',
                auth: false,
                statusCode: '200 (OK). 400 Bad Request, 404 Not Found',
                body: {
                    codigo: 'String (NOT NULL)'
                },
                response: {
                    token: 'String (token tempor√°rio para usar no resetar-senha)'
                }
            },
            {
                id: 3,
                method: 'POST',
                url: '/api/auth/resetar-senha',
                description: 'Resetar senha com token tempor√°rio',
                auth: false,
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    token: 'String (NOT NULL)',
                    senhaNova: 'String (NOT NULL)'
                },
                notes: 'Token obtido no endpoint validar-codigo (id 3).'
            },
            {
                id: 4,
                method: 'POST',
                url: '/api/auth/refresh',
                description: 'Refresh token: recebe refresh token do usu√°rio',
                auth: false,
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                body: {
                    refreshToken: 'String (NOT NULL)'
                },
                response: {
                    token: 'String (JWT acesso)',
                    expiresToken: 'LocalDateTime (expira√ß√£o do JWT)',
                    refreshToken: 'String (novo refresh token)',
                    expiresRefreshToken: 'LocalDateTime (expira√ß√£o do refresh token)'
                }
            },
            {
                id: 5,
                method: 'POST',
                url: '/api/auth/logout',
                description: 'Logout (invalida sess√£o)',
                auth: true,
                observacao: 'JWT do usu√°rio no header Authorization',
                statusCode: '200 (OK). 401 Unauthorized',
                response: 'Sem corpo. Mensagem de sucesso ou erro.'
            },
            ],
            // #endregion
            // #region Empresa
            empresa: [
            {
                id: 6,
                method: 'POST',
                url: '/api/empresa',
                description: 'Cadastro de empresa',
                auth: false,
                statusCode: '201 (Created). 400 Bad Request, 409 Conflict (username/email/cnpj j√° cadastrado)',
                response: 'Sem corpo ou ID criado. Mensagem de sucesso ou erro.',
                body: {
                    username: 'String (NOT NULL)',
                    email: 'String (NOT NULL, UNIQUE). Credencial de login.',
                    senha: 'String (NOT NULL, min 6 chars, mai√∫scula + n√∫mero/s√≠mbolo)',
                    razaoSocial: 'String (NOT NULL)',
                    cnpj: 'String (NOT NULL)',
                    empresaEndereco: {
                        rua: 'String (NOT NULL)',
                        numero: 'String (NOT NULL)',
                        complemento: 'String (Nullable)',
                        bairro: 'String (NOT NULL)',
                        cidade: 'String (NOT NULL)',
                        uf: 'String (NOT NULL, Length: 2)',
                        cep: 'String (NOT NULL, Length: 8)'
                    },
                    usuarioTelefone: {
                        codigoPais: 'String (NOT NULL)',
                        ddd: 'String (NOT NULL)',
                        numero: 'String (NOT NULL)'
                    }
                }
            },
            {
                id: 7,
                method: 'PUT',
                url: '/api/empresa/endereco',
                description: 'Atualizar endere√ßo da empresa',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    rua: 'String (NOT NULL)',
                    numero: 'String (NOT NULL)',
                    complemento: 'String (Nullable)',
                    bairro: 'String (NOT NULL)',
                    cidade: 'String (NOT NULL)',
                    uf: 'String (NOT NULL, Length: 2)',
                    cep: 'String (NOT NULL, Length: 8)'
                }
            },
            {
                id: 8,
                method: 'POST',
                url: '/api/empresa/config-inicial',
                description: 'Configura√ß√£o inicial da empresa',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    empresaJornadaConfig: {
                        tipoEscalaJornadaId: 'Integer (FK ‚Üí tipo_escala_jornada.id, NOT NULL)',
                        cargaHorariaDiaria: 'Duration (ISO-8601, NOT NULL), ex: PT8H',
                        cargaHorariaSemanal: 'Duration (ISO-8601, NOT NULL), ex: PT44H',
                        toleranciaPadrao: 'Duration (ISO-8601, NOT NULL), ex: PT0S',
                        intervaloPadrao: 'Duration (ISO-8601, NOT NULL), ex: PT1H',
                        tempoDescansoEntreJornada: 'Duration (ISO-8601, opcional), ex: PT11H',
                        entradaPadrao: 'LocalTime (NOT NULL), ex: 08:00',
                        saidaPadrao: 'LocalTime (NOT NULL), ex: 17:00',
                        timezone: 'String (NOT NULL, Default: \'America/Sao_Paulo\')',
                        gravaGeoObrigatoria: 'Boolean (NOT NULL, Default: false)',
                        gravaPontoApenasEmGeofence: 'Boolean (NOT NULL, Default: false)',
                        permiteAjustePonto: 'Boolean (NOT NULL, Default: false)'
                    },
                    empresaBancoHorasConfig: {
                        ativo: 'Boolean (NOT NULL, Default: false)',
                        totalDiasVencimento: 'Integer (NOT NULL), total de dias para vencimento do banco de horas'
                    },
                    usuarioGeofence: [
                        {
                            descricao: 'String (NOT NULL)',
                            latitude: 'BigDecimal (NOT NULL)',
                            longitude: 'BigDecimal (NOT NULL)',
                            raioMetros: 'Integer (NOT NULL, Default: 100)',
                            ativo: 'Boolean (NOT NULL, Default: true)'
                        }
                    ]
                },
                notes: 'usuarioGeofence √© opcional (lista, pode ser vazia)'
            },
            {
                id: 9,
                method: 'POST',
                url: '/api/empresa/resetar-senha',
                description: 'Resetar senha da empresa',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    senhaAntiga: 'String (NOT NULL)',
                    senhaNova: 'String (NOT NULL)'
                },
                notes: 'Desativa senha antiga e insere nova. Senha √© por usu√°rio, n√£o por credencial. Nunca excluir.'
            },
            {
                id: 10,
                method: 'PUT',
                url: '/api/empresa/jornada-padrao',
                description: 'Atualizar jornada padr√£o da empresa',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    tipoEscalaJornadaId: 'Integer (FK ‚Üí tipo_escala_jornada.id, NOT NULL)',
                    cargaHorariaDiaria: 'Duration (ISO-8601, NOT NULL), ex: PT8H',
                    cargaHorariaSemanal: 'Duration (ISO-8601, NOT NULL), ex: PT44H',
                    toleranciaPadrao: 'Duration (ISO-8601, NOT NULL), ex: PT0S',
                    intervaloPadrao: 'Duration (ISO-8601, NOT NULL), ex: PT1H',
                    tempoDescansoEntreJornada: 'Duration (ISO-8601, opcional), ex: PT11H',
                    entradaPadrao: 'LocalTime (NOT NULL), ex: 08:00',
                    saidaPadrao: 'LocalTime (NOT NULL), ex: 17:00',
                    timezone: 'String (NOT NULL, Default: \'America/Sao_Paulo\')',
                    gravaGeoObrigatoria: 'Boolean (NOT NULL, Default: false)',
                    gravaPontoApenasEmGeofence: 'Boolean (NOT NULL, Default: false)',
                    permiteAjustePonto: 'Boolean (NOT NULL, Default: false)'
                }
            },
            {
                id: 11,
                method: 'PUT',
                url: '/api/empresa/banco-horas-config',
                description: 'Atualizar configura√ß√£o de banco de horas da empresa',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    empresaBancoHorasConfig: {
                        ativo: 'Boolean (NOT NULL). Ex: false ou true',
                        totalDiasVencimento: 'Integer (NOT NULL, positivo). Total de dias para vencimento do banco de horas. Ex: 365'
                    }
                },
                notes: 'Insere registro em empresa_banco_horas_config se a empresa ainda n√£o tiver config; caso contr√°rio atualiza ativo e total_dias_vencimento.'
            },
            {
                id: 12,
                method: 'GET',
                url: '/api/empresa/metricas-dia',
                description: 'M√©trica di√°ria da empresa (hoje ou √∫ltima cadastrada)',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 401 Unauthorized, 404 Not Found',
                response: 'Objeto MetricasDiariaEmpresaResponse (id, dataRef, anoRef, mesRef, quantidadeFuncionarios, solicitacoesPendentes, totalDoDia Duration, totalPontoHoje).'
            },
            {
                id: 13,
                method: 'GET',
                url: '/api/empresa/metricas-dia/por-periodo',
                description: 'Listar m√©tricas di√°rias da empresa por per√≠odo (data in√≠cio e fim)',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'dataInicio (query, LocalDate yyyy-MM-dd, obrigat√≥rio), dataFim (query, LocalDate yyyy-MM-dd, obrigat√≥rio)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: 'Array de MetricasDiariaEmpresaResponse ordenado por data_ref ASC.'
            },
            {
                id: 13.1,
                method: 'GET',
                url: '/api/empresa/atividades-recentes',
                description: 'Atividades recentes (√∫ltimos 4 registros de ponto da empresa)',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT. Mesmo dado do card da landing: nome do funcion√°rio + hor√°rio do registro. M√°ximo 4 itens.',
                statusCode: '200 (OK). 401 Unauthorized',
                response: 'Array de AtividadeRecenteResponse: { nomeCompleto: string, registradoEm: LocalDateTime ISO }.'
            },
            ],
            // #endregion
            // #region Funcionario
            funcionario: [
            {
                id: 14,
                method: 'POST',
                url: '/api/empresa/funcionario',
                description: 'Cadastro de funcion√°rio',
                auth: true,
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 409 Conflict',
                response: 'Sem corpo ou funcionarioId. Mensagem de sucesso ou erro.',
                body: {
                    username: 'String (NOT NULL)',
                    nomeCompleto: 'String (NOT NULL)',
                    cpf: 'String (NOT NULL)',
                    dataNascimento: 'DATE (Nullable), ex: yyyy-MM-dd',
                    email: 'String (NOT NULL)',
                    senha: 'String (NOT NULL, min 6 chars, mai√∫scula + n√∫mero/s√≠mbolo). Senha inicial de login.',
                    usuarioTelefone: {
                        codigoPais: 'String (NOT NULL)',
                        ddd: 'String (NOT NULL)',
                        numero: 'String (NOT NULL)'
                    },
                    contratoFuncionario: {
                        matricula: 'String (Nullable, UNIQUE)',
                        pisPasep: 'String (Nullable, UNIQUE)',
                        cargo: 'String (NOT NULL)',
                        departamento: 'String (Nullable)',
                        tipoContratoId: 'Integer (FK ‚Üí tipo_contrato.id, NOT NULL)',
                        ativo: 'Boolean (NOT NULL, Default: true)',
                        dataAdmissao: 'DATE (NOT NULL), ex: yyyy-MM-dd',
                        dataDemissao: 'DATE (Nullable), ex: yyyy-MM-dd',
                        salarioMensal: 'BigDecimal (NOT NULL)',
                        salarioHora: 'BigDecimal (Calculado, NOT NULL)'
                    },
                    jornadaFuncionarioConfig: {
                        tipoEscalaJornadaId: 'Integer (FK ‚Üí tipo_escala_jornada.id, NOT NULL)',
                        cargaHorariaDiaria: 'Duration (ISO-8601, NOT NULL), ex: PT8H',
                        cargaHorariaSemanal: 'Duration (ISO-8601, NOT NULL), ex: PT44H',
                        toleranciaPadrao: 'Duration (ISO-8601, opcional), ex: PT0S',
                        intervaloPadrao: 'Duration (ISO-8601, NOT NULL), ex: PT1H',
                        tempoDescansoEntreJornada: 'Duration (ISO-8601, opcional), ex: PT11H',
                        entradaPadrao: 'LocalTime (NOT NULL), ex: 08:00',
                        saidaPadrao: 'LocalTime (NOT NULL), ex: 17:00',
                        gravaGeoObrigatoria: 'Boolean (NOT NULL, Default: false)'
                    },
                    geofenceIds: 'Array<UUID> (opcional). IDs dos geofences j√° cadastrados pela empresa. Funcion√°rio n√£o cadastra geofence; apenas associa-se aos geofences da empresa (grava em xref_geofence_funcionarios).'
                },
                notes: 'Obrigat√≥rios: username, nomeCompleto, cpf, email, senha. Cadastro: nomeCompleto primeiro; backend extrai primeiro_nome e ultimo_nome (primeira/√∫ltima palavra). Front pode auto-preencher inputs de primeiro/√∫ltimo em tempo real. Opcionais: dataNascimento, usuarioTelefone, contratoFuncionario, jornadaFuncionarioConfig, geofenceIds (podem ser omitidos no cadastro inicial). Quando enviados, s√£o validados antes do insert (ex: tipoContratoId/tipoEscalaJornadaId existem, telefone/matr√≠cula/PIS n√£o duplicados). Geofences: apenas IDs dos geofences cadastrados pela empresa (tabela xref_geofence_funcionarios).'
            },
            {
                id: 15,
                method: 'POST',
                url: '/api/empresa/funcionario/:funcionarioId/resetar-senha',
                description: 'Resetar senha de funcion√°rio',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'funcionarioId (UUID) no path',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    senhaNova: 'String (NOT NULL)'
                },
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma. Desativa senha antiga e insere nova. Senha √© por usu√°rio. Nunca excluir.'
            },
            {
                id: 16,
                method: 'POST',
                url: '/api/empresa/funcionario/:funcionarioId/resetar-email',
                description: 'Resetar email de funcion√°rio',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'funcionarioId (UUID) no path',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    emailNovo: 'String (NOT NULL)'
                },
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma.'
            },
            {
                id: 17,
                method: 'POST',
                url: '/api/empresa/funcionario/:funcionarioId/desbloquear',
                description: 'Desbloquear funcion√°rio bloqueado (brute force ou manual)',
                auth: true,
                observacao: 'JWT da empresa no header Authorization. usuarioId da empresa extra√≠do do token no backend.',
                params: 'funcionarioId (UUID) no path ‚Äî usuario_id do funcion√°rio em users',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {},
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma. Desativa o registro em historico_bloqueio (ativo=false, dataDesativacao=now). Nunca excluir.'
            },
            {
                id: 18,
                method: 'PUT',
                url: '/api/empresa/funcionario/:funcionarioId',
                description: 'Alterar dados de funcion√°rio (mesmo corpo do cadastro)',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'funcionarioId (UUID) no path',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma.',
                body: {
                    username: 'String (NOT NULL)',
                    nomeCompleto: 'String (NOT NULL)',
                    cpf: 'String (NOT NULL)',
                    dataNascimento: 'DATE (Nullable), ex: yyyy-MM-dd',
                    email: 'String (NOT NULL)',
                    usuarioTelefone: {
                        codigoPais: 'String (NOT NULL)',
                        ddd: 'String (NOT NULL)',
                        numero: 'String (NOT NULL)'
                    },
                    contratoFuncionario: {
                        matricula: 'String (Nullable, UNIQUE)',
                        pisPasep: 'String (Nullable, UNIQUE)',
                        cargo: 'String (NOT NULL)',
                        departamento: 'String (Nullable)',
                        tipoContratoId: 'Integer (FK ‚Üí tipo_contrato.id, NOT NULL)',
                        ativo: 'Boolean (NOT NULL, Default: true)',
                        dataAdmissao: 'DATE (NOT NULL), ex: yyyy-MM-dd',
                        dataDemissao: 'DATE (Nullable), ex: yyyy-MM-dd',
                        salarioMensal: 'BigDecimal (NOT NULL)',
                        salarioHora: 'BigDecimal (Calculado, NOT NULL)'
                    },
                    jornadaFuncionarioConfig: {
                        tipoEscalaJornadaId: 'Integer (FK ‚Üí tipo_escala_jornada.id, NOT NULL)',
                        cargaHorariaDiaria: 'Duration (ISO-8601, NOT NULL), ex: PT8H',
                        cargaHorariaSemanal: 'Duration (ISO-8601, NOT NULL), ex: PT44H',
                        toleranciaPadrao: 'Duration (ISO-8601, opcional), ex: PT0S',
                        intervaloPadrao: 'Duration (ISO-8601, NOT NULL), ex: PT1H',
                        tempoDescansoEntreJornada: 'Duration (ISO-8601, opcional), ex: PT11H',
                        entradaPadrao: 'LocalTime (NOT NULL), ex: 08:00',
                        saidaPadrao: 'LocalTime (NOT NULL), ex: 17:00',
                        gravaGeoObrigatoria: 'Boolean (NOT NULL, Default: false)'
                    },
                    geofenceIds: 'Array<UUID> (opcional). IDs dos geofences j√° cadastrados pela empresa. Funcion√°rio n√£o cadastra geofence; apenas associa-se aos geofences da empresa (grava em xref_geofence_funcionarios).'
                }
            },
            {
                id: 19,
                method: 'DELETE',
                url: '/api/empresa/funcionario/:funcionarioId',
                description: 'Deletar funcion√°rio',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'funcionarioId no path',
                statusCode: '204 (No Content). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. 204 No Content.',
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma. Funcion√°rio (users) usa soft delete (ativo=false + dataDesativacao).'
            },
            {
                id: 20,
                method: 'GET',
                url: '/api/empresa/funcionario',
                description: 'Listar funcion√°rios da empresa com pagina√ß√£o e filtro por nome',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'page, pageSize, nome (query)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: {
                    paginacao: {
                        totalPaginas: 'Integer',
                        totalElementos: 'Long',
                        totalElementosPaginaAtual: 'Integer',
                        paginaAtual: 'Integer'
                    },
                    conteudo: [
                        { usuarioId: 'UUID', primeiroNome: 'String', ultimoNome: 'String', username: 'String', emails: 'List<String>', telefones: 'List<{codigoPais, ddd, numero}>' }
                    ]
                },
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma. Listagens exibem apenas primeiroNome + ultimoNome.'
            },
            ],
            // #endregion
            // #region Usuarios
            usuarios: [
            {
                id: 21,
                method: 'PUT',
                url: '/api/usuario/perfil',
                description: 'Atualizar username',
                auth: true,
                observacao: 'usuarioId extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                notes: 'Usu√°rio (users) usa soft delete (ativo=false + dataDesativacao).',
                body: {
                    username: 'String (NOT NULL)'
                }
            },
            {
                id: 22,
                method: 'POST',
                url: '/api/usuario/email',
                description: 'Adicionar novo email',
                auth: true,
                observacao: 'usuarioId do usu√°rio logado extra√≠do do token JWT no backend (n√£o empresaId).',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                body: {
                    novoEmail: 'String (NOT NULL)'
                }
            },
            {
                id: 23,
                method: 'DELETE',
                url: '/api/usuario/email',
                description: 'Remover email (soft delete)',
                auth: true,
                observacao: 'usuarioId do usu√°rio logado extra√≠do do token JWT no backend (n√£o empresaId).',
                statusCode: '204 (No Content). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. 204 No Content.',
                body: {
                    novoEmail: 'String (NOT NULL)'
                },
                notes: 'Soft delete (ativo=false + dataDesativacao).'
            },
            {
                id: 24,
                method: 'POST',
                url: '/api/usuario/telefone',
                description: 'Adicionar novo telefone',
                auth: true,
                observacao: 'usuarioId extra√≠do do token JWT no backend',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                body: {
                    codigoPais: 'String (NOT NULL)',
                    ddd: 'String (NOT NULL)',
                    numero: 'String (NOT NULL)'
                }
            },
            {
                id: 25,
                method: 'DELETE',
                url: '/api/usuario/telefone/:telefoneId',
                description: 'Deletar telefone',
                auth: true,
                observacao: 'usuarioId extra√≠do do token JWT no backend',
                params: 'telefoneId no path',
                statusCode: '204 (No Content). 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. 204 No Content.'
            },
            {
                id: 26,
                method: 'POST',
                url: '/api/usuario/credential',
                description: 'Adicionar novo tipo de login',
                auth: true,
                observacao: 'usuarioId extra√≠do do token JWT no backend',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                body: {
                    tipoCredencialId: 'Integer (FK ‚Üí tipo_credential.id, NOT NULL)',
                    valor: 'String (NOT NULL, UNIQUE)'
                }
            },
            {
                id: 27,
                method: 'DELETE',
                url: '/api/usuario/credential/:credentialId',
                description: 'Deletar tipo de login',
                auth: true,
                observacao: 'usuarioId extra√≠do do token JWT no backend',
                params: 'credentialId no path',
                statusCode: '204 (No Content). 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. 204 No Content.',
                notes: 'Credencial: delete f√≠sico (n√£o existe desativa√ß√£o).'
            },
            ],
            // #endregion
            // #region Usuario (banco-horas)
            usuarioBancoHoras: [
            {
                id: 46,
                method: 'GET',
                url: '/api/usuario/banco-horas/resumo',
                description: 'Resumo banco de horas do pr√≥prio funcion√°rio',
                auth: true,
                observacao: 'funcionarioId = userId do JWT. SCOPE_FUNCIONARIO. Resolve empresa pela identifica√ß√£o ativa.',
                statusCode: '200 (OK). 401 Unauthorized, 404 Funcion√°rio n√£o vinculado',
                response: {
                    totalHorasVencidas: 'String (HH:mm ou -HH:mm)',
                    totalHorasEsperadas: 'String (HH:mm)',
                    totalHorasTrabalhadas: 'String (HH:mm)',
                    totalFinalBanco: 'String (HH:mm ou -HH:mm)'
                }
            },
            {
                id: 47,
                method: 'GET',
                url: '/api/usuario/banco-horas/historico',
                description: 'Hist√≥rico de fechamentos mensais do banco de horas do pr√≥prio funcion√°rio',
                auth: true,
                observacao: 'funcionarioId = userId do JWT. SCOPE_FUNCIONARIO. Paginado.',
                params: 'page (default 0), size (default 10)',
                statusCode: '200 (OK). 401 Unauthorized, 404 Funcion√°rio n√£o vinculado',
                response: {
                    paginacao: 'Object (totalPaginas, totalElementos, tamanhoPagina, paginaAtual)',
                    conteudo: 'Array<{ id, funcionarioId, anoReferencia, mesReferencia, totalHorasEsperadas, totalHorasTrabalhadas, totalBancoHorasFinal, status, ... }>'
                }
            },
            ],
            // #endregion
            // #region Perfil (empresa, funcion√°rio)
            perfil: [
            {
                id: 28,
                method: 'GET',
                url: '/api/funcionario/perfil',
                description: 'Recuperar informa√ß√µes do funcion√°rio',
                auth: true,
                observacao: 'usuarioId extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 401 Unauthorized, 404 Not Found',
                response: {
                    username: 'String',
                    funcionarioAtivo: 'Boolean',
                    nomeCompleto: 'String',
                    cpf: 'String',
                    dataNascimento: 'Date',
                    matricula: 'String',
                    email: 'String',
                    codigoPais: 'String',
                    ddd: 'String',
                    numero: 'String',
                    contratoAtivo: 'Boolean',
                    cargo: 'String',
                    departamento: 'String',
                    tipoContrato: 'String',
                    dataAdmissao: 'Date',
                    dataDemissao: 'Date',
                    salarioMensal: 'BigDecimal',
                    salarioHora: 'BigDecimal',
                    tipoEscala: 'String',
                    cargaHorariaDiaria: 'Duration ISO-8601',
                    cargaHorariaSemanal: 'Duration ISO-8601',
                    entradaPadrao: 'Time',
                    saidaPadrao: 'Time',
                    toleranciaPadrao: 'Duration ISO-8601 (ex: PT0S, PT15M)',
                    intervaloPadrao: 'Duration ISO-8601 (ex: PT1H)'
                }
            },
            {
                id: 29,
                method: 'GET',
                url: '/api/empresa/perfil',
                description: 'Recuperar informa√ß√µes da empresa',
                auth: true,
                observacao: 'usuarioId extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 401 Unauthorized, 404 Not Found',
                response: {
                    username: 'String',
                    cnpj: 'String',
                    razaoSocial: 'String',
                    email: 'String',
                    codigoPais: 'String',
                    ddd: 'String',
                    numero: 'String',
                    rua: 'String',
                    numeroEndereco: 'String',
                    complemento: 'String',
                    bairro: 'String',
                    cidade: 'String',
                    uf: 'String',
                    cep: 'String',
                    timezone: 'String',
                    cargaDiariaPadrao: 'Duration ISO-8601 (ex: PT8H)',
                    cargaSemanalPadrao: 'Duration ISO-8601 (ex: PT44H)',
                    toleranciaPadrao: 'Duration ISO-8601 (ex: PT0S, PT15M)',
                    intervaloPadrao: 'Duration ISO-8601 (ex: PT1H)',
                    controlePontoObrigatorio: 'Boolean',
                    tipoModeloPonto: 'String',
                    tempoRetencao: 'Integer',
                    auditoriaAtiva: 'Boolean',
                    assinaturaDigitalObrigatoria: 'Boolean',
                    gravarGeolocalizacaoObrigatoria: 'Boolean',
                    permitirAjustePontoDireto: 'Boolean'
                }
            },
            ],
            // #endregion
            // #region Registro-ponto (funcion√°rio)
            registroPonto: [
            {
                id: 30,
                method: 'GET',
                url: '/api/funcionario/:funcionarioId/ponto',
                description: 'Listar informa√ß√µes de ponto do funcion√°rio (ano/m√™s)',
                auth: true,
                observacao: 'usuarioId (funcion√°rio) extra√≠do do token JWT no backend',
                params: 'funcionarioId (UUID) no path; ano, mes (query)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: {
                    items: [
                        {
                            data: 'LocalDate',
                            diaSemana: 'String',
                            status: 'String',
                            marcacoes: [
                                { registroId: 'UUID', horario: 'LocalDateTime' }
                            ],
                            totalHoras: 'String'
                        }
                    ]
                }
            },
            {
                id: 31,
                method: 'POST',
                url: '/api/funcionario/registro-ponto/manual',
                description: 'Criar novo registro de ponto manualmente (funcion√°rio)',
                auth: true,
                observacao: 'Registro manual: √∫nico fluxo em que o front envia hor√°rio (LocalDateTime, sem timezone).',
                params: 'Header: Idempotency-Key (UUID, recomendado quando gera solicita√ß√£o). Valor gravado em solicitacao_ponto.idempotency_key.',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 409 Conflict (idempot√™ncia ao criar solicita√ß√£o)',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                body: {
                    horario: 'LocalDateTime (NOT NULL), ex: 2026-02-07T09:00:00',
                    justificativa: 'String (NOT NULL), valor do motivo: ESQUECI_BATER, FALHA_SISTEMA, OUTROS, etc.',
                    observacao: 'String (Nullable)'
                },
                notes: 'Registro manual: √∫nico que recebe hor√°rio do front. justificativa = valor (tipo_justificativa.descricao). Se a empresa n√£o permite ajuste direto, cria solicita√ß√£o (idempotency_key evita duplicidade).'
            },
            {
                id: 32,
                method: 'POST',
                url: '/api/empresa/registro-ponto/publico',
                description: 'Registro de ponto p√∫blico (tablet da empresa)',
                auth: true,
                observacao: 'Batida: data/hora definida pelo backend (instante da requisi√ß√£o). Front n√£o envia hor√°rio.',
                params: 'Header: Idempotency-Key (UUID, obrigat√≥rio). Valor gravado em registro_ponto.idempotency_key.',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 409 Conflict (idempot√™ncia)',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                body: {
                    codigoPonto: 'Integer (NOT NULL, Max: 999999)',
                    registroMetadados: {
                        geoLatitude: 'Double (Nullable)',
                        geoLongitude: 'Double (Nullable)',
                        assinaturaDigital: 'String (Nullable, Base64)',
                        certificadoSerial: 'String (Nullable)',
                        timestampAssinatura: 'LocalDateTime (Nullable), ex: yyyy-MM-ddTHH:mm:ss'
                    }
                },
                notes: 'Batida: backend grava created_at = instante da requisi√ß√£o (LocalDateTime). Front n√£o envia data/hora.'
            },
            {
                id: 33,
                method: 'POST',
                url: '/api/empresa/funcionario/registro-ponto',
                description: 'Registro de ponto pelo aplicativo',
                auth: true,
                observacao: 'Batida: data/hora definida pelo backend (instante da requisi√ß√£o). Front n√£o envia hor√°rio.',
                params: 'Header: Idempotency-Key (UUID, opcional). Valor gravado em registro_ponto.idempotency_key.',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 409 Conflict (idempot√™ncia)',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                body: {
                    registroMetadados: {
                        geoLatitude: 'Double (Nullable)',
                        geoLongitude: 'Double (Nullable)',
                        assinaturaDigital: 'String (Nullable, Base64)',
                        certificadoSerial: 'String (Nullable)',
                        timestampAssinatura: 'LocalDateTime (Nullable), ex: yyyy-MM-ddTHH:mm:ss'
                    }
                },
                notes: 'Batida: backend grava created_at = instante da requisi√ß√£o (LocalDateTime). Front n√£o envia data/hora.'
            },
            {
                id: 34,
                method: 'DELETE',
                url: '/api/empresa/registro-ponto/:idRegistro',
                description: 'Deletar registro de ponto (funcion√°rio)',
                auth: true,
                observacao: 'usuarioId (funcion√°rio) extra√≠do do token JWT no backend',
                params: 'idRegistro no path. Header: Idempotency-Key (UUID, recomendado quando gera solicita√ß√£o). Valor gravado em solicitacao_ponto.idempotency_key.',
                statusCode: '204 (No Content). 401 Unauthorized, 404 Not Found. Se criar solicita√ß√£o: 201/409 (idempot√™ncia).',
                response: 'Sem corpo. 204 No Content.',
                notes: 'Remo√ß√£o de registro de ponto √© feita por DELETE f√≠sico. Se a empresa n√£o permite ajuste direto, cria solicita√ß√£o de remo√ß√£o (idempotency_key evita duplicidade).'
            },
            ],
            // #endregion
            // #region Empresa (solicita√ß√µes de ponto)
            empresaSolicitacoes: [
            {
                id: 35,
                method: 'GET',
                url: '/api/empresa/funcionario/:funcionarioId/ponto',
                description: 'Listar informa√ß√µes de ponto de um funcion√°rio (ano/m√™s)',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'funcionarioId (UUID) no path; ano, mes (query)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: {
                    items: [
                        {
                            data: 'LocalDate',
                            diaSemana: 'String',
                            status: 'String',
                            marcacoes: [
                                { registroId: 'UUID', horario: 'LocalDateTime' }
                            ],
                            totalHoras: 'String'
                        }
                    ]
                },
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma.'
            },
            {
                id: 36,
                method: 'DELETE',
                url: '/api/empresa/funcionario/:funcionarioId/registro-ponto/:registroId',
                description: 'Deletar registro de ponto de um funcion√°rio',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'funcionarioId (UUID), registroId no path',
                statusCode: '204 (No Content). 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. 204 No Content.',
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma. Registro de ponto √© exclu√≠do fisicamente (DELETE).'
            },
            {
                id: 37,
                method: 'POST',
                url: '/api/empresa/funcionario/:funcionarioId/registro-ponto',
                description: 'Criar registro de ponto para um funcion√°rio (manual)',
                auth: true,
                observacao: 'Registro manual: √∫nico fluxo em que o front envia hor√°rio (LocalDateTime, sem timezone).',
                params: 'funcionarioId (UUID) no path',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                notes: 'Registro manual: √∫nico que recebe hor√°rio do front. justificativa = valor (tipo_justificativa.descricao). Empresa s√≥ tem acesso aos funcion√°rios dela mesma.',
                body: {
                    horario: 'LocalDateTime (NOT NULL), ex: 2026-02-07T09:00:00',
                    justificativa: 'String (NOT NULL), valor do motivo: ESQUECI_BATER, FALHA_SISTEMA, OUTROS, etc.',
                    observacao: 'String (Nullable)'
                }
            },
            {
                id: 38,
                method: 'GET',
                url: '/api/empresa/solicitacoes-ponto',
                description: 'Listar todas as solicita√ß√µes de ponto dos funcion√°rios (criar/excluir registro manual). Filtro opcional por nome do funcion√°rio.',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'page, size, nome (opcional, query)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: {
                    items: [
                        {
                            id: 'UUID',
                            tipo: 'String',
                            data: 'Date',
                            motivo: 'String',
                            nomeFuncionario: 'String',
                            status: 'String'
                        }
                    ],
                    total: 'Long',
                    page: 'Integer',
                    size: 'Integer'
                }
            },
            {
                id: 39,
                method: 'POST',
                url: '/api/empresa/solicitacoes-ponto/:idRegistroPendente/aprovar',
                description: 'Aprovar solicita√ß√£o de ponto pendente',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'idRegistroPendente no path',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.'
            },
            {
                id: 40,
                method: 'POST',
                url: '/api/empresa/solicitacoes-ponto/:idRegistroPendente/reprovar',
                description: 'Reprovar solicita√ß√£o de ponto pendente',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'idRegistroPendente no path',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    motivo: 'String (NOT NULL)',
                    observacao: 'String (Nullable)'
                }
            },
            {
                id: '40b',
                method: 'GET',
                url: '/api/empresa/espelho-ponto/listagem',
                description: 'Listagem espelho de ponto ‚Äî funcion√°rios da empresa com nome e todos os totais mensais',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend. Somente para empresa.',
                params: 'page, pageSize, nome (opcional), ano (opcional, default m√™s atual), mes (opcional, default m√™s atual)',
                statusCode: '200 (OK). 401 Unauthorized, 500 Erro interno',
                response: {
                    paginacao: '{ totalPaginas, totalElementos, totalElementosPaginaAtual, paginaAtual }',
                    conteudo: [
                        {
                            usuarioId: 'UUID',
                            nomeCompleto: 'String (exibi√ß√£o: primeiro + √∫ltimo nome)',
                            totalHorasEsperadas: 'String (HH:mm)',
                            totalHorasTrabalhadas: 'String (HH:mm)',
                            totalHorasTrabalhadasFeriado: 'String (HH:mm)'
                        }
                    ]
                },
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma. Totais do m√™s refer√™ncia (ano/mes).'
            },
            ],
            // #endregion
            // #region F√©rias e afastamentos
            feriasAfastamentos: [
            {
                id: 41,
                method: 'GET',
                url: '/api/funcionario/ferias-afastamentos',
                description: 'Listar f√©rias e afastamentos do funcion√°rio',
                auth: true,
                observacao: 'usuarioId (funcion√°rio) extra√≠do do token JWT no backend',
                params: 'page, size (query)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: {
                    items: [
                        {
                            nomeAfastamento: 'String',
                            inicio: 'Date',
                            fim: 'Date',
                            status: 'String'
                        }
                    ],
                    total: 'Integer',
                    page: 'Integer',
                    size: 'Integer'
                }
            },
            {
                id: 42,
                method: 'GET',
                url: '/api/empresa/funcionario/:funcionarioId/ferias-afastamentos',
                description: 'Listar f√©rias e afastamentos de um funcion√°rio por id',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'funcionarioId (UUID) no path; page, size (query)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma.',
                response: {
                    items: [
                        {
                            nomeAfastamento: 'String',
                            inicio: 'Date',
                            fim: 'Date',
                            status: 'String'
                        }
                    ],
                    total: 'Integer',
                    page: 'Integer',
                    size: 'Integer'
                }
            },
            {
                id: 43,
                method: 'GET',
                url: '/api/empresa/ferias-afastamentos',
                description: 'Listar f√©rias e afastamentos da empresa. Filtro opcional por nome do funcion√°rio.',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'page, size, nome (opcional, query)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: {
                    items: [
                        {
                            nomeFuncionario: 'String',
                            nomeAfastamento: 'String',
                            inicio: 'Date',
                            fim: 'Date',
                            status: 'String'
                        }
                    ],
                    total: 'Integer',
                    page: 'Integer',
                    size: 'Integer'
                }
            },
            {
                id: 44,
                method: 'POST',
                url: '/api/empresa/funcionario/:funcionarioId/afastamentos',
                description: 'Criar afastamento para um funcion√°rio',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'funcionarioId (UUID) no path',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                notes: 'Empresa s√≥ tem acesso aos funcion√°rios dela mesma.',
                body: {
                    tipoAfastamentoId: 'Integer (FK ‚Üí tipo_afastamento.id, NOT NULL)',
                    dataInicio: 'DATE (NOT NULL), ex: yyyy-MM-dd',
                    dataFim: 'DATE (Nullable), ex: yyyy-MM-dd',
                    observacao: 'String (Nullable)',
                    ativo: 'Boolean (NOT NULL, Default: true)'
                }
            },
            ],
            // #endregion
            // #region Funcionario (banco-horas)
            funcionarioBancoHoras: [
            {
                id: 45,
                method: 'GET',
                url: '/api/empresa/funcionario/:funcionarioId/resumo-banco-horas',
                description: 'Resumo banco de horas',
                auth: true,
                observacao: 'JWT empresa + funcionarioId. Soma m√™s atual + hist√≥rico.',
                params: 'funcionarioId (UUID) no path',
                statusCode: '200 (OK). 401 Unauthorized, 404 Not Found',
                response: {
                    totalHorasVencidas: 'String (HH:mm)',
                    totalHorasEsperadas: 'String (HH:mm)',
                    totalHorasTrabalhadas: 'String (HH:mm)',
                    totalFinalBanco: 'String (HH:mm, pode ser negativo)'
                }
            },
            {
                id: 46,
                method: 'GET',
                url: '/api/empresa/funcionario/:funcionarioId/banco-horas-historico',
                description: 'Listar hist√≥rico banco de horas (fechamentos mensais)',
                auth: true,
                observacao: 'JWT empresa + funcionarioId. Paginado.',
                params: 'funcionarioId (UUID) no path; page, size (query)',
                statusCode: '200 (OK). 401 Unauthorized, 404 Not Found',
                response: {
                    paginacao: { totalPaginas: 'Integer', totalElementos: 'Long', totalElementosPaginaAtual: 'Integer', paginaAtual: 'Integer' },
                    conteudo: 'Array<{ id, funcionarioId, anoReferencia, mesReferencia, totalHorasEsperadas (HH:mm), totalHorasTrabalhadas (HH:mm), totalBancoHorasFinal (HH:mm), status }>'
                }
            },
            {
                id: 47,
                method: 'POST',
                url: '/api/empresa/funcionario/:funcionarioId/banco-horas/fechamento',
                description: 'Fechamento do m√™s - grava na tabela banco_horas_historico',
                auth: true,
                observacao: 'JWT empresa + funcionarioId',
                params: 'funcionarioId (UUID) no path',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo.',
                body: { anoReferencia: 'Integer', mesReferencia: 'Integer' }
            },
            ],
            // #endregion
            // #region Geofences
            // Apenas a empresa cadastra geofences (usuario_geofence). O funcion√°rio nunca cadastra; apenas grava na tabela xref_geofence_funcionarios os IDs dos geofences que a empresa cadastrou (no cadastro/atualiza√ß√£o do funcion√°rio, campo geofenceIds).
            geofences: [
            {
                id: 48,
                method: 'GET',
                url: '/api/empresa/geofences',
                description: 'Listar geofences da empresa',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                statusCode: '200 (OK). 401 Unauthorized',
                response: [
                    {
                        nome: 'String',
                        ativo: 'Boolean',
                        coordenadas: 'String', // latitude,longitude
                        raio: 'Integer', // metros
                        createdAt: 'LocalDateTime',
                        updatedAt: 'LocalDateTime'
                    }
                ]
            },
            {
                id: 49,
                method: 'POST',
                url: '/api/empresa/geofences',
                description: 'Criar novo geofence para a empresa',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo ou id. Mensagem de sucesso ou erro.',
                body: {
                    nome: 'String (NOT NULL)', // Nome do geofence
                    descricao: 'String (NOT NULL)',
                    latitude: 'BigDecimal (NOT NULL)',
                    longitude: 'BigDecimal (NOT NULL)',
                    raioMetros: 'Integer (NOT NULL)',
                    ativo: 'Boolean (NOT NULL, Default: true)'
                }
            },
            ],
            // #endregion
            // #region Feriados
            feriados: [
            {
                id: 57,
                method: 'GET',
                url: '/api/empresa/feriados',
                description: 'Listar feriados da empresa',
                auth: true,
                observacao: 'Inclui feriados criados pela empresa + feriados criados por Admin (join users). empresaId do JWT.',
                params: 'page (default 0), size (default 20)',
                statusCode: '200 (OK). 401 Unauthorized',
                response: {
                    paginacao: 'Object (totalPaginas, totalElementos, totalElementosPaginaAtual, paginaAtual)',
                    conteudo: 'Array<{ id, data, descricao, tipoFeriadoId, tipoFeriadoDescricao, ativo, createdAt }>'
                }
            },
            {
                id: 58,
                method: 'POST',
                url: '/api/empresa/feriados',
                description: 'Criar novo feriado para a empresa',
                auth: true,
                observacao: 'empresaId extra√≠do do token JWT no backend',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    data: 'LocalDate (NOT NULL), ex: yyyy-MM-dd',
                    descricao: 'String (NOT NULL, max 255)',
                    tipoFeriadoId: 'Integer (NOT NULL, FK ‚Üí tipo_feriado.id)',
                    tipoUsuarioId: 'Integer (Nullable, FK ‚Üí tipo_usuario.id)',
                    ativo: 'Boolean (Default: true)'
                },
                notes: 'Empresa pode cadastrar apenas ESTADUAL ou MUNICIPAL. NACIONAL √© exclusivo do admin.'
            },
            {
                id: 59,
                method: 'PUT',
                url: '/api/empresa/feriados/:feriadoId',
                description: 'Editar feriado existente',
                auth: true,
                observacao: 'Empresa s√≥ edita feriados criados por ela (usuario_id = usu√°rio do token)',
                params: 'feriadoId (UUID) no path',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {
                    data: 'LocalDate (NOT NULL)',
                    descricao: 'String (NOT NULL, max 255)',
                    tipoFeriadoId: 'Integer (NOT NULL)',
                    ativo: 'Boolean (Default: true)'
                },
                notes: 'Empresa pode editar apenas para ESTADUAL ou MUNICIPAL.'
            },
            {
                id: 60,
                method: 'DELETE',
                url: '/api/empresa/feriados/:feriadoId',
                description: 'Excluir feriado (soft delete)',
                auth: true,
                observacao: 'Feriado deve pertencer √† empresa do token. Define ativo=false.',
                params: 'feriadoId (UUID) no path',
                statusCode: '204 (No Content). 401 Unauthorized, 404 Not Found',
                response: 'Sem corpo.'
            },
            ],
            // #endregion
            // #region Relat√≥rios
            relatorios: [
            {
                id: 50,
                method: 'POST',
                url: '/api/empresa/relatorios/ponto-detalhado',
                description: 'Gerar relat√≥rio de ponto mensal detalhado por per√≠odo (todos os pontos da empresa)',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend. Resposta comprimida com GZIP (Content-Encoding: gzip).',
                params: 'Query: ano (n√∫mero), mes (n√∫mero), formato (enum: PDF | EXCEL)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: {
                    periodo: { inicio: 'YYYY-MM-DD', fim: 'YYYY-MM-DD' },
                    funcionarios: [
                        {
                            funcionarioId: 'UUID',
                            nome: 'string',
                            jornadaPrevistaDia: 'HH:mm',
                            registros: [
                                {
                                    data: 'YYYY-MM-DD',
                                    diaSemana: 'SEG | TER | QUA | QUI | SEX | SAB | DOM',
                                    batidas: {
                                        entrada1: 'HH:mm | null',
                                        saida1: 'HH:mm | null',
                                        entrada2: 'HH:mm | null',
                                        saida2: 'HH:mm | null'
                                    },
                                    horasDia: 'HH:mm',
                                    extrasDia: 'HH:mm',
                                    faltaDia: 'HH:mm',
                                    ocorrencia: 'OK | HORA_EXTRA | FALTA | ATRASO | FOLGA | FERIADO | ATESTADO | FERIAS'
                                }
                            ]
                        }
                    ]
                },
                notes: 'Resposta: arquivo bin√°rio (PDF ou Excel conforme formato). Content-Encoding: gzip. Content-Disposition: attachment; filename=\"ponto-detalhado-YYYY-MM.pdf\" ou \".xlsx\".'
            },
            {
                id: 51,
                method: 'POST',
                url: '/api/empresa/relatorios/ponto-resumo',
                description: 'Gerar relat√≥rio de ponto resumo da empresa',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend. Resposta comprimida com GZIP (Content-Encoding: gzip).',
                params: 'Query: ano (n√∫mero), mes (n√∫mero), formato (enum: PDF | EXCEL)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: {
                    periodo: 'YYYY-MM',
                    funcionarios: [
                        {
                            funcionarioId: 'UUID',
                            nome: 'string',
                            horasPrevistas: 'HH:mm',
                            horasTrabalhadas: 'HH:mm',
                            horasExtras: 'HH:mm',
                            horasFaltas: 'HH:mm',
                            bancoHorasFinal: 'HH:mm (pode ser negativo)',
                            status: 'ABERTO | FECHADO | REABERTO | AJUSTADO'
                        }
                    ]
                },
                notes: 'Resposta: arquivo bin√°rio (PDF ou Excel conforme formato). Content-Encoding: gzip. Content-Disposition: attachment; filename=\"ponto-resumo-YYYY-MM.pdf\" ou \".xlsx\".'
            },
            ],
            // #endregion
            // #region Auditoria
            auditoria: [
            {
                id: 52,
                method: 'GET',
                url: '/api/empresa/auditoria',
                description: 'Listar log de auditoria',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'page, size (query)',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized',
                response: {
                    items: [
                        {
                            acao: 'String',
                            descricao: 'String',
                            data: 'LocalDateTime',
                            nomeUsuario: 'String',
                            sucesso: 'Boolean'
                        }
                    ],
                    total: 'Integer',
                    page: 'Integer',
                    size: 'Integer'
                }
            },
            {
                id: 53,
                method: 'GET',
                url: '/api/empresa/auditoria/:logId',
                description: 'Detalhar log de auditoria',
                auth: true,
                observacao: 'usuarioId da empresa extra√≠do do token JWT no backend',
                params: 'logId (UUID) no path',
                statusCode: '200 (OK). 401 Unauthorized, 404 Not Found',
                response: {
                    usuarioId: 'UUID (FK ‚Üí users.id, NOT NULL)',
                    acao: 'String (NOT NULL)',
                    descricao: 'String (NOT NULL)',
                    dadosAntigos: 'JSONB (Nullable)',
                    dadosNovos: 'JSONB (Nullable)',
                    dispositivoId: 'UUID (FK ‚Üí dispositivo.id, Nullable)',
                    sucesso: 'Boolean (NOT NULL)',
                    mensagemErro: 'String (Nullable)',
                    createdAt: 'TIMESTAMP (NOT NULL), ex: DD-MM-YYYY HH:mm:ss'
                }
            },
            ],
            // #endregion
            // #region Admin Feriados
            adminFeriados: [
            {
                id: 61,
                method: 'GET',
                url: '/api/admin/feriados',
                description: 'Admin: Listar feriados de abrang√™ncia',
                auth: true,
                observacao: 'JWT admin. Feriados criados por Admin (join users.tipo_usuario_id = ADMIN). NACIONAL, ESTADUAL, MUNICIPAL.',
                params: 'page (default 0), size (default 20)',
                statusCode: '200 (OK). 401 Unauthorized, 403 Forbidden',
                response: { paginacao: 'Object', conteudo: 'Array<FeriadoItemResponse>' }
            },
            {
                id: 62,
                method: 'POST',
                url: '/api/admin/feriados',
                description: 'Admin: Criar feriado de abrang√™ncia',
                auth: true,
                observacao: 'JWT admin. usuarioId preenchido no backend a partir do JWT. Qualquer tipo: NACIONAL, ESTADUAL, MUNICIPAL.',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 403 Forbidden',
                response: 'Sem corpo.',
                body: { data: 'LocalDate', descricao: 'String', tipoFeriadoId: 'Integer', ativo: 'Boolean' }
            },
            {
                id: 63,
                method: 'PUT',
                url: '/api/admin/feriados/:feriadoId',
                description: 'Admin: Editar feriado de abrang√™ncia',
                auth: true,
                params: 'feriadoId (UUID) no path',
                statusCode: '200 (OK). 401 Unauthorized, 403 Forbidden, 404 Not Found',
                response: 'Sem corpo.',
                body: { data: 'LocalDate', descricao: 'String', tipoFeriadoId: 'Integer', ativo: 'Boolean' }
            },
            {
                id: 64,
                method: 'DELETE',
                url: '/api/admin/feriados/:feriadoId',
                description: 'Admin: Excluir feriado de abrang√™ncia',
                auth: true,
                params: 'feriadoId (UUID) no path',
                statusCode: '204 (No Content). 401 Unauthorized, 403 Forbidden, 404 Not Found',
                response: 'Sem corpo.'
            },
            {
                id: 65,
                method: 'GET',
                url: '/api/admin/empresas/:empresaId/feriados',
                description: 'Admin: Listar feriados por empresa',
                auth: true,
                observacao: 'JWT admin. empresaId no path.',
                params: 'empresaId (UUID) no path; page, size (query)',
                statusCode: '200 (OK). 401 Unauthorized, 403 Forbidden, 404 Empresa n√£o encontrada',
                response: { paginacao: 'Object', conteudo: 'Array<FeriadoItemResponse>' }
            },
            {
                id: 66,
                method: 'POST',
                url: '/api/admin/empresas/:empresaId/feriados',
                description: 'Admin: Criar feriado por empresa',
                auth: true,
                params: 'empresaId (UUID) no path. usuario_id = empresaId.',
                statusCode: '201 (Created). 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Empresa n√£o encontrada',
                response: 'Sem corpo.',
                body: { data: 'LocalDate', descricao: 'String', tipoFeriadoId: 'Integer', ativo: 'Boolean' }
            },
            {
                id: 67,
                method: 'PUT',
                url: '/api/admin/empresas/:empresaId/feriados/:feriadoId',
                description: 'Admin: Editar feriado por empresa',
                auth: true,
                params: 'empresaId, feriadoId (UUID) no path',
                statusCode: '200 (OK). 401 Unauthorized, 403 Forbidden, 404 Not Found',
                response: 'Sem corpo.',
                body: { data: 'LocalDate', descricao: 'String', tipoFeriadoId: 'Integer', ativo: 'Boolean' }
            },
            {
                id: 68,
                method: 'DELETE',
                url: '/api/admin/empresas/:empresaId/feriados/:feriadoId',
                description: 'Admin: Excluir feriado por empresa',
                auth: true,
                params: 'empresaId, feriadoId (UUID) no path',
                statusCode: '204 (No Content). 401 Unauthorized, 403 Forbidden, 404 Not Found',
                response: 'Sem corpo.'
            },
            ],
            // #endregion
            // #region Admin
            admin: [
            {
                id: 54,
                method: 'POST',
                url: '/api/admin/usuarios',
                description: 'Criar administrador',
                auth: false,
                observacao: 'P√∫blico. N√£o requer autentica√ß√£o. Cria users + user_credential + user_password.',
                params: 'Nenhum',
                statusCode: '201 (Created). 400 Bad Request, 409 Conflict',
                response: 'usuarioId (UUID) no body',
                body: { username: 'String', valor: 'String (credencial de login)', tipoCredencial: 'EMAIL|USERNAME', senha: 'String' },
                notes: 'Valida username e valor √∫nicos. Usado para criar o primeiro admin ou novos admins sem JWT.'
            },
            {
                id: 55,
                method: 'GET',
                url: '/api/admin/usuarios',
                description: 'Listar usu√°rios (admin)',
                auth: true,
                observacao: 'JWT admin no header Authorization. Retorna usuarioId, username e tipo (descri√ß√£o de tipo_usuario).',
                params: 'page, size (query)',
                statusCode: '200 (OK). 401 Unauthorized, 403 Forbidden (n√£o admin)',
                response: {
                    paginacao: {
                        totalPaginas: 'Integer',
                        totalElementos: 'Long',
                        totalElementosPaginaAtual: 'Integer',
                        paginaAtual: 'Integer'
                    },
                    conteudo: [
                        { usuarioId: 'UUID', username: 'String', tipo: 'String', emails: 'List<String>', telefones: 'List<{codigoPais, ddd, numero}>' }
                    ]
                },
                notes: 'Requer tipo_usuario = ADMIN.'
            },
            {
                id: 56,
                method: 'POST',
                url: '/api/admin/usuario/:usuarioId/desbloquear',
                description: 'Desbloquear qualquer usu√°rio (apenas admin)',
                auth: true,
                observacao: 'JWT admin no header Authorization. usuarioId no path ‚Äî pode ser qualquer usu√°rio bloqueado (funcion√°rio, empresa, etc).',
                params: 'usuarioId (UUID) no path ‚Äî usuario_id em users',
                statusCode: '200 (OK). 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found',
                response: 'Sem corpo. Mensagem de sucesso ou erro.',
                body: {},
                notes: 'Requer tipo_usuario = ADMIN. Desativa o registro em historico_bloqueio (ativo=false, dataDesativacao=now). Nunca excluir.'
            },
            ],
            // #endregion
        };
        const endpoints = Object.values(endpointsByController).flat();

        function formatBodyForDisplay(body) {
            if (!body) return '';
            return JSON.stringify(body, null, 2);
        }

        const controllerLabels = {
            auth: 'Auth',
            admin: 'Admin',
            empresa: 'Empresa',
            funcionario: 'Funcion√°rio',
            empresaSolicitacoes: 'Empresa (solicita√ß√µes de ponto)',
            feriasAfastamentos: 'F√©rias e afastamentos',
            registroPonto: 'Registro-ponto (funcion√°rio)',
            funcionarioBancoHoras: 'Funcion√°rio (banco-horas)',
            geofences: 'Geofences',
            feriados: 'Feriados',
            relatorios: 'Relat√≥rios',
            auditoria: 'Auditoria',
            adminFeriados: 'Admin - Feriados',
            perfil: 'Perfil (empresa, funcion√°rio)',
            usuarios: 'Usu√°rios',
            usuarioBancoHoras: 'Usuario (banco-horas)'
        };

        function renderEndpointCard(endpoint) {
            const methodColor = {
                'GET': 'bg-blue-100 text-blue-800',
                'POST': 'bg-green-100 text-green-800',
                'PUT': 'bg-yellow-100 text-yellow-800',
                'DELETE': 'bg-red-100 text-red-800'
            }[endpoint.method] || 'bg-stone-100 text-stone-800';

            let bodyHtml = '';
            if (endpoint.body) {
                const formattedBody = formatBodyForDisplay(endpoint.body);
                bodyHtml = `
                    <div class="mt-4">
                        <h4 class="font-semibold text-stone-800 mb-2">Body:</h4>
                        <pre class="bg-stone-50 p-4 rounded-lg overflow-x-auto text-sm font-mono"><code>${formattedBody}</code></pre>
                    </div>
                `;
            }

            let observacaoHtml = '';
            if (endpoint.observacao) {
                observacaoHtml = `
                    <div class="mt-4">
                        <h4 class="font-semibold text-stone-800 mb-2">Observa√ß√£o:</h4>
                        <p class="text-stone-600 text-sm">${endpoint.observacao}</p>
                    </div>
                `;
            }

            let paramsHtml = '';
            if (endpoint.params) {
                paramsHtml = `
                    <div class="mt-4">
                        <h4 class="font-semibold text-stone-800 mb-2">Par√¢metros:</h4>
                        <p class="text-stone-600 text-sm">${endpoint.params}</p>
                    </div>
                `;
            }

            let statusCodeHtml = '';
            if (endpoint.statusCode) {
                statusCodeHtml = `
                    <div class="mt-4">
                        <h4 class="font-semibold text-stone-800 mb-2">Status code:</h4>
                        <p class="text-stone-600 text-sm font-mono">${endpoint.statusCode}</p>
                    </div>
                `;
            }

            let responseHtml = '';
            if (endpoint.response) {
                if (typeof endpoint.response === 'object') {
                    responseHtml = `
                        <div class="mt-4">
                            <h4 class="font-semibold text-stone-800 mb-2">Response:</h4>
                            <pre class="bg-stone-50 p-4 rounded-lg overflow-x-auto text-sm"><code>${JSON.stringify(endpoint.response, null, 2)}</code></pre>
                        </div>
                    `;
                } else {
                    responseHtml = `
                        <div class="mt-4">
                            <h4 class="font-semibold text-stone-800 mb-2">Response:</h4>
                            <p class="text-stone-600 text-sm">${endpoint.response}</p>
                        </div>
                    `;
                }
            }

            let notesHtml = '';
            if (endpoint.notes) {
                notesHtml = `
                    <div class="mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded">
                        <p class="text-sm text-yellow-800"><strong>Nota:</strong> ${endpoint.notes}</p>
                    </div>
                `;
            }

            const authBadge = endpoint.auth 
                ? '<span class="ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">Requer Autentica√ß√£o</span>'
                : '<span class="ml-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded">P√∫blico</span>';

            const accessTag = getAccessTagForEndpoint(endpoint);
            const accessClass = accessTag === 'Empresa' ? 'bg-blue-100 text-blue-800' : accessTag === 'Funcion√°rio' ? 'bg-emerald-100 text-emerald-800' : accessTag === 'Ambos' ? 'bg-amber-100 text-amber-800' : accessTag === 'Admin' ? 'bg-red-100 text-red-800' : 'bg-stone-200 text-stone-600';
            const accessTagHtml = accessTag ? `<span class="px-2 py-0.5 rounded text-xs font-medium whitespace-nowrap ${accessClass}">${accessTag}</span>` : '';

            return `
                <div class="bg-white border border-stone-200 rounded-xl p-6 shadow-sm">
                    <div class="flex items-start justify-between gap-4 mb-4">
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-3 mb-2 flex-wrap">
                                <span class="px-3 py-1 ${methodColor} text-sm font-bold rounded">${endpoint.method}</span>
                                <code class="text-lg font-mono text-stone-800 break-all">${endpoint.url}</code>
                                ${authBadge}
                            </div>
                            <p class="text-stone-600">${endpoint.id}. ${endpoint.description}</p>
                        </div>
                        <div class="flex-shrink-0 self-start">${accessTagHtml}</div>
                    </div>
                    ${observacaoHtml}
                    ${paramsHtml}
                    ${statusCodeHtml}
                    ${bodyHtml}
                    ${responseHtml}
                    ${notesHtml}
                </div>
            `;
        }

        function getAccessTagForEndpoint(ep) {
            const s = [ep.params, ep.observacao, ep.description, ep.notes].filter(Boolean).join(' ').toLowerCase();
            const u = (ep.url || '').toLowerCase();
            if (u.includes('/api/auth/refresh') || u.includes('/api/auth/logout')) return 'Ambos';
            if (u.includes('/api/admin/')) return 'Admin';
            if (u.includes('/api/usuario/email')) return 'Ambos';
            if (ep.auth === false && !/usuarioid|jwt|token/.test(s)) return 'P√∫blico';
            if (/usuarioid da empresa|empresa extra√≠do|jwt da empresa|somente empresa/.test(s)) return 'Empresa';
            if (/usuarioid \(funcion√°rio\)|funcion√°rio extra√≠do|jwt do funcion√°rio/.test(s)) return 'Funcion√°rio';
            if (/jwt da empresa|jwt do funcion√°rio/.test(s)) return u.includes('empresa') ? 'Empresa' : 'Funcion√°rio';
            if (u.includes('/api/empresa/') && !u.includes('/funcionario/')) return 'Empresa';
            if (u.includes('/api/funcionario/perfil') || u.includes('/api/funcionario/ferias-afastamentos') || u.includes('/api/usuario/banco-horas')) return 'Funcion√°rio';
            if (u.includes('/api/registro-ponto/publico')) return 'Empresa';
            if (u.includes('/api/registro-ponto')) return 'Funcion√°rio';
            if (u.includes('/api/funcionario/')) return 'Empresa';
            if (u.includes('/api/usuario/')) return 'Ambos';
            return 'P√∫blico';
        }

        function getAccessTag(controllerKey, endpoints) {
            if (controllerKey === 'auth') return 'P√∫blico';
            if (controllerKey === 'admin') return 'Admin';
            if (controllerKey === 'usuarios') return 'Ambos';
            let empresa = false, funcionario = false, allPublic = true;
            for (const ep of endpoints) {
                const tag = getAccessTagForEndpoint(ep);
                if (tag === 'P√∫blico') { allPublic = allPublic && ep.auth === false; continue; }
                allPublic = false;
                if (tag === 'Empresa') empresa = true;
                if (tag === 'Funcion√°rio') funcionario = true;
                if (tag === 'Ambos') { empresa = true; funcionario = true; }
            }
            if (allPublic) return 'P√∫blico';
            if (empresa && funcionario) return 'Ambos';
            if (empresa) return 'Empresa';
            if (funcionario) return 'Funcion√°rio';
            return 'P√∫blico';
        }

        function renderEndpoints() {
            const container = document.getElementById('endpoints-container');
            if (!container) return;

            let html = '';
            for (const [key, list] of Object.entries(endpointsByController)) {
                const label = controllerLabels[key] || key;
                const count = list.length;
                const access = getAccessTag(key, list);
                const accessClass = access === 'Empresa' ? 'bg-blue-100 text-blue-800' : access === 'Funcion√°rio' ? 'bg-emerald-100 text-emerald-800' : access === 'Ambos' ? 'bg-amber-100 text-amber-800' : 'bg-stone-200 text-stone-600';
                const accessTagHtml = access ? `<span class="px-2 py-0.5 rounded text-xs font-medium ${accessClass}">${access}</span>` : '';
                html += `
                    <details class="endpoint-controller group border border-stone-200 rounded-xl overflow-hidden shadow-sm mb-4" open>
                        <summary class="flex items-center justify-between bg-stone-100 hover:bg-stone-200 px-5 py-4 font-semibold text-stone-800 list-none transition-colors">
                            <span class="flex items-center gap-2">
                                <span class="fold-chevron">‚ñ∂</span>
                                ${label}
                            </span>
                            <span class="flex items-center gap-2 text-sm font-normal text-stone-500">
                                <span>${count} endpoint${count !== 1 ? 's' : ''}</span>
                                ${accessTagHtml}
                            </span>
                        </summary>
                        <div class="space-y-6 p-5 pt-0 border-t border-stone-200">
                            ${list.map(renderEndpointCard).join('')}
                        </div>
                    </details>
                `;
            }
            container.innerHTML = html;
        }

        // --- Data Model Viewer Logic ---
        let currentJsonRaw = null; // Armazena o JSON original para copiar

        function showEntity(key) {
            const data = schemas[key];
            const codeEl = document.getElementById('json-content');
            const titleEl = document.getElementById('json-title');
            const explanationEl = document.getElementById('entity-explanation');
            const buttons = document.querySelectorAll('.entity-btn');

            // Highlight button
            buttons.forEach(b => {
                b.classList.remove('bg-blue-50', 'text-blue-700', 'border-l-4', 'border-blue-500');
                if(b.getAttribute('data-target') === key) {
                    b.classList.add('bg-blue-50', 'text-blue-700', 'border-l-4', 'border-blue-500');
                }
            });

            // Update Content
            titleEl.textContent = data.title;
            explanationEl.textContent = data.desc;
            
            // Armazena o JSON original
            currentJsonRaw = data.json;
            
            // Simple syntax highlighting via regex
            let formattedJson = data.json
                .replace(/"(\w+)":/g, '<span class="text-blue-300">"$1"</span>:') // Keys
                .replace(/: "(.+)"/g, ': <span class="text-orange-300">"$1"</span>') // String Values
                .replace(/: (true|false)/g, ': <span class="text-red-400">$1</span>') // Booleans
                .replace(/: (\d+|BigDecimal)/g, ': <span class="text-green-400">$1</span>') // Numbers/Types
                .replace(/\/\/ ‚îÄ‚îÄ‚îÄ (.+) ‚îÄ‚îÄ‚îÄ/g, '<span class="text-emerald-400 font-bold text-xs block mt-2 mb-1">// ‚îÄ‚îÄ‚îÄ $1 ‚îÄ‚îÄ‚îÄ</span>') // Section headers
                .replace(/\/\/ (.+)/g, '<span class="text-stone-500 italic">// $1</span>'); // Comments

            codeEl.innerHTML = formattedJson;
        }

        // --- Copy JSON Function ---
        function copyJson() {
            if (!currentJsonRaw) {
                return;
            }

            navigator.clipboard.writeText(currentJsonRaw).then(() => {
                // Feedback visual
                const copyBtn = document.getElementById('copy-btn');
                const copyIcon = document.getElementById('copy-icon');
                const copyText = document.getElementById('copy-text');
                
                const originalIcon = copyIcon.textContent;
                const originalText = copyText.textContent;
                
                copyIcon.textContent = '‚úì';
                copyText.textContent = 'Copiado!';
                copyBtn.classList.add('text-green-400');
                
                setTimeout(() => {
                    copyIcon.textContent = originalIcon;
                    copyText.textContent = originalText;
                    copyBtn.classList.remove('text-green-400');
                }, 2000);
            }).catch(err => {
                console.error('Erro ao copiar:', err);
                alert('Erro ao copiar para a √°rea de transfer√™ncia');
            });
        }

        // --- Project Chart Logic (Chart.js) ---
        let myChart = null;

        function renderChart() {
            const ctx = document.getElementById('projectChart').getContext('2d');
            
            if (myChart) myChart.destroy();

            myChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Projeto A (Declarado)', 'Projeto B (Declarado)', 'N√£o Alocado'],
                    datasets: [{
                        label: 'Horas',
                        data: [3, 4, 1], // Total 8h
                        backgroundColor: [
                            '#3B82F6', // Blue
                            '#8B5CF6', // Purple
                            '#E5E7EB'  // Gray
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { font: { family: "'Inter', sans-serif", size: 11 } }
                        },
                        title: {
                            display: true,
                            text: 'Jornada Di√°ria (8h)',
                            font: { family: "'Inter', sans-serif", size: 14, weight: 'bold' }
                        }
                    }
                }
            });
        }

        // --- Flow Simulation Logic ---
        function simulateFlow(step) {
            // Reset
            document.querySelectorAll('.flow-step').forEach(el => el.classList.remove('active'));
            
            // Activate current and previous
            for(let i = 1; i <= step; i++) {
                setTimeout(() => {
                    document.getElementById(`step-${i}`).classList.add('active');
                    logConsole(i);
                }, (i - 1) * 600);
            }
        }

        function runSimulation() {
            simulateFlow(4);
        }

        function logConsole(step) {
            const consoleEl = document.getElementById('simulation-console');
            const messages = {
                1: "> [INPUT] Recebido POST /ponto/registrar. Validando JWT...",
                2: "> [CORE] Regras validadas. Geo ok. Assinando registro digitalmente com certificado ICP-Brasil...",
                3: "> [KAFKA] Evento publicado no t√≥pico 'ponto.registrado'. Partition: 2.",
                4: "> [DB] Consumer processou evento. INSERT INTO registro_ponto (id, idempotency_key, ...) VALUES (...) - SUCCESS (Imut√°vel)"
            };
            
            const newLine = document.createElement('div');
            newLine.textContent = messages[step];
            consoleEl.appendChild(newLine);
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }

        // --- Calculate XP since Nov 2020 ---
        function calculateXP() {
            const startDate = new Date('2020-11-01');
            const now = new Date();
            const years = now.getFullYear() - startDate.getFullYear();
            const months = now.getMonth() - startDate.getMonth();
            const totalMonths = years * 12 + months;
            const xpYears = Math.ceil(totalMonths / 12);
            
            const xpElement = document.getElementById('xp-anos');
            if (xpElement) {
                xpElement.textContent = xpYears;
            }
        }

        // --- Prototype Modal Logic ---
        function getPrototypeHTML(screenId) {
            const prototypes = {
                'login': `
                    <div class="bg-white border border-stone-200 rounded-lg p-8 max-w-md mx-auto">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-bold text-stone-800 mb-2">Sistema de Ponto</h2>
                            <p class="text-stone-600">Fa√ßa login para continuar</p>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">Email</label>
                                <input type="email" class="w-full px-4 py-2 border border-stone-300 rounded-lg" placeholder="seu@email.com" disabled>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">Senha</label>
                                <input type="password" class="w-full px-4 py-2 border border-stone-300 rounded-lg" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" disabled>
                            </div>
                            <button class="w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700">Entrar</button>
                            <a href="#" class="block text-center text-sm text-blue-600 hover:underline">Esqueci minha senha</a>
                        </div>
                    </div>
                `,
                'registro-ponto': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6 max-w-md mx-auto">
                        <h3 class="text-xl font-bold text-stone-800 mb-4 text-center">Registrar Ponto</h3>
                        <div class="text-center mb-6">
                            <div class="text-4xl font-bold text-stone-800 mb-2">14:32</div>
                            <p class="text-sm text-stone-600">Segunda-feira, 15 Jan 2024</p>
                        </div>
                        <button class="w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg">REGISTRAR</button>
                        <div class="mt-4 p-3 bg-stone-50 rounded-lg">
                            <p class="text-xs text-stone-600">üìç Localiza√ß√£o: -23.5505, -46.6333</p>
                        </div>
                    </div>
                `,
                'dashboard': `
                    <div class="space-y-4">
                        <div class="flex justify-end gap-2 mb-4">
                            <button onclick="switchDashboardView('funcionario')" id="dashboard-btn-funcionario" class="px-3 py-1 rounded-lg text-sm font-medium bg-blue-600 text-white flex items-center gap-1">
                                <span>üë§</span> Funcion√°rio
                            </button>
                            <button onclick="switchDashboardView('empresa')" id="dashboard-btn-empresa" class="px-3 py-1 rounded-lg text-sm font-medium bg-stone-200 text-stone-700 hover:bg-stone-300 flex items-center gap-1">
                                <span>üè¢</span> Empresa
                            </button>
                        </div>
                        <div id="dashboard-funcionario-view">
                            <div class="grid grid-cols-3 gap-4">
                                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                    <p class="text-sm text-blue-600 font-medium">Horas Trabalhadas</p>
                                    <p class="text-2xl font-bold text-blue-800">8h 30min</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <p class="text-sm text-green-600 font-medium">Saldo Banco</p>
                                    <p class="text-2xl font-bold text-green-800">+2h 15min</p>
                                </div>
                                <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                    <p class="text-sm text-red-600 font-medium">Alertas</p>
                                    <p class="text-2xl font-bold text-red-800">3</p>
                                </div>
                            </div>
                            <div class="bg-white border border-stone-200 rounded-lg p-4 mt-4">
                                <h4 class="font-semibold text-stone-800 mb-3">√öltimos Registros</h4>
                                <div id="dashboard-registros-list" class="space-y-2">
                                    <div class="flex justify-between items-center py-2 border-b border-stone-100">
                                        <span class="text-sm text-stone-700">08:00 - Entrada</span>
                                        <span class="text-xs text-stone-500">Hoje</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 border-b border-stone-100">
                                        <span class="text-sm text-stone-700">12:00 - In√≠cio Intervalo</span>
                                        <span class="text-xs text-stone-500">Hoje</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 border-b border-stone-100 hidden">
                                        <span class="text-sm text-stone-700">13:00 - Fim Intervalo</span>
                                        <span class="text-xs text-stone-500">Hoje</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 border-b border-stone-100 hidden">
                                        <span class="text-sm text-stone-700">17:30 - Sa√≠da</span>
                                        <span class="text-xs text-stone-500">Hoje</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex justify-center items-center gap-1 mt-2">
                                <button onclick="dashboardPrevPage('registros')" class="p-1 rounded hover:bg-stone-100 text-stone-600 text-xs">
                                    <span>‚óÄ</span>
                                </button>
                                <span id="dashboard-registros-page" class="text-xs text-stone-600">1 / 2</span>
                                <button onclick="dashboardNextPage('registros')" class="p-1 rounded hover:bg-stone-100 text-stone-600 text-xs">
                                    <span>‚ñ∂</span>
                                </button>
                            </div>
                        </div>
                        <div id="dashboard-empresa-view" class="hidden">
                            <div class="grid grid-cols-3 gap-4">
                                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                                    <p class="text-sm text-purple-600 font-medium">Total Funcion√°rios</p>
                                    <p class="text-2xl font-bold text-purple-800">125</p>
                                </div>
                                <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                                    <p class="text-sm text-orange-600 font-medium">Registros Hoje</p>
                                    <p class="text-2xl font-bold text-orange-800">248</p>
                                </div>
                                <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                                    <p class="text-sm text-yellow-600 font-medium">Alertas Pendentes</p>
                                    <p class="text-2xl font-bold text-yellow-800">12</p>
                                </div>
                            </div>
                            <div class="bg-white border border-stone-200 rounded-lg p-4 mt-4">
                                <h4 class="font-semibold text-stone-800 mb-3">Funcion√°rios Recentes</h4>
                                <div id="dashboard-funcionarios-list" class="space-y-2">
                                    <div class="flex justify-between items-center py-2 border-b border-stone-100">
                                        <span class="text-sm text-stone-700">Jo√£o Silva</span>
                                        <span class="text-xs text-stone-500">Registrou h√° 5min</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 border-b border-stone-100">
                                        <span class="text-sm text-stone-700">Maria Santos</span>
                                        <span class="text-xs text-stone-500">Registrou h√° 12min</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 border-b border-stone-100 hidden">
                                        <span class="text-sm text-stone-700">Pedro Costa</span>
                                        <span class="text-xs text-stone-500">Registrou h√° 18min</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 border-b border-stone-100 hidden">
                                        <span class="text-sm text-stone-700">Ana Lima</span>
                                        <span class="text-xs text-stone-500">Registrou h√° 25min</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex justify-center items-center gap-1 mt-2">
                                <button onclick="dashboardPrevPage('funcionarios')" class="p-1 rounded hover:bg-stone-100 text-stone-600 text-xs">
                                    <span>‚óÄ</span>
                                </button>
                                <span id="dashboard-funcionarios-page" class="text-xs text-stone-600">1 / 2</span>
                                <button onclick="dashboardNextPage('funcionarios')" class="p-1 rounded hover:bg-stone-100 text-stone-600 text-xs">
                                    <span>‚ñ∂</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `,
                'perfil': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6 max-w-2xl mx-auto">
                        <div class="flex justify-end gap-2 mb-4">
                            <button onclick="switchPerfilView('funcionario')" id="perfil-btn-funcionario" class="px-3 py-1 rounded-lg text-sm font-medium bg-blue-600 text-white flex items-center gap-1">
                                <span>üë§</span> Funcion√°rio
                            </button>
                            <button onclick="switchPerfilView('empresa')" id="perfil-btn-empresa" class="px-3 py-1 rounded-lg text-sm font-medium bg-stone-200 text-stone-700 hover:bg-stone-300 flex items-center gap-1">
                                <span>üè¢</span> Empresa
                            </button>
                        </div>
                        <div id="perfil-funcionario-view">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-20 h-20 bg-stone-300 rounded-full flex items-center justify-center text-2xl">üë§</div>
                                <div>
                                    <h3 class="text-xl font-bold text-stone-800">Jo√£o Silva</h3>
                                    <p class="text-sm text-stone-600">joao.silva@empresa.com</p>
                                </div>
                            </div>
                            <div class="flex gap-2 mb-4 border-b border-stone-200 overflow-x-auto">
                                <button onclick="switchPerfilFuncionarioTab('dados')" id="perfil-func-tab-dados" class="px-4 py-2 text-sm font-medium border-b-2 border-blue-600 text-blue-600 whitespace-nowrap">Dados Pessoais</button>
                                <button onclick="switchPerfilFuncionarioTab('telefone')" id="perfil-func-tab-telefone" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-stone-800 whitespace-nowrap">Telefone</button>
                                <button onclick="switchPerfilFuncionarioTab('contrato')" id="perfil-func-tab-contrato" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-stone-800 whitespace-nowrap">Contrato</button>
                                <button onclick="switchPerfilFuncionarioTab('jornada')" id="perfil-func-tab-jornada" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-stone-800 whitespace-nowrap">Jornada</button>
                                <button onclick="switchPerfilFuncionarioTab('ponto')" id="perfil-func-tab-ponto" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-stone-800 whitespace-nowrap">Controle Ponto</button>
                            </div>
                            <div id="perfil-func-tab-dados-content">
                                <div class="space-y-4">
                                    <div class="flex items-center gap-2">
                                        <input type="checkbox" id="perfil-func-ativo" checked class="w-4 h-4" disabled>
                                        <label for="perfil-func-ativo" class="text-sm text-stone-700">Funcion√°rio Ativo</label>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Nome Completo</label>
                                            <input type="text" value="Jo√£o Silva" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">CPF</label>
                                            <input type="text" value="123.456.789-00" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Data Nascimento</label>
                                            <input type="date" value="1990-05-15" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Matr√≠cula</label>
                                            <input type="text" value="EMP001" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div class="col-span-2">
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Email</label>
                                            <input type="email" value="joao.silva@empresa.com" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                    </div>
                                    <button class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg">Salvar Altera√ß√µes</button>
                                </div>
                            </div>
                            <div id="perfil-func-tab-telefone-content" class="hidden">
                                <div class="space-y-4">
                                    <div class="grid grid-cols-4 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">C√≥digo Pa√≠s</label>
                                            <input type="text" value="+55" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">DDD</label>
                                            <input type="text" value="11" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div class="col-span-2">
                                            <label class="block text-sm font-medium text-stone-700 mb-1">N√∫mero</label>
                                            <input type="text" value="98765-4321" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                    </div>
                                    <button class="text-sm text-blue-600 hover:text-blue-800">+ Adicionar outro telefone</button>
                                    <button class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg block">Salvar Altera√ß√µes</button>
                                </div>
                            </div>
                            <div id="perfil-func-tab-contrato-content" class="hidden">
                                <div class="space-y-4">
                                    <div class="flex items-center gap-2">
                                        <input type="checkbox" id="perfil-func-contrato-ativo" checked class="w-4 h-4" disabled>
                                        <label for="perfil-func-contrato-ativo" class="text-sm text-stone-700">Contrato Ativo</label>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Cargo</label>
                                            <input type="text" value="Desenvolvedor" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Departamento</label>
                                            <input type="text" value="TI" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Tipo de Contrato</label>
                                            <select class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                                <option>CLT</option>
                                                <option>PJ</option>
                                                <option>Est√°gio</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Data de Admiss√£o</label>
                                            <input type="date" value="2020-01-15" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Data de Demiss√£o</label>
                                            <input type="date" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Sal√°rio Mensal</label>
                                            <input type="text" value="R$ 8.000,00" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Sal√°rio Hora (Calculado)</label>
                                            <input type="text" value="R$ 45,45" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-2">Adicionais de Trabalho</label>
                                        <div class="space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" id="perfil-func-adicional-noturno" class="w-4 h-4" disabled>
                                                <label for="perfil-func-adicional-noturno" class="text-sm text-stone-700">Adicional Noturno</label>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" id="perfil-func-adicional-periculosidade" class="w-4 h-4" disabled>
                                                <label for="perfil-func-adicional-periculosidade" class="text-sm text-stone-700">Periculosidade</label>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" id="perfil-func-adicional-insalubridade" class="w-4 h-4" disabled>
                                                <label for="perfil-func-adicional-insalubridade" class="text-sm text-stone-700">Insalubridade</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="perfil-func-tab-jornada-content" class="hidden">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Tipo de Escala</label>
                                        <select class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                            <option>5x2</option>
                                            <option>6x1</option>
                                            <option>12x36</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Carga Hor√°ria Di√°ria</label>
                                        <input type="time" value="08:00" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Carga Hor√°ria Semanal</label>
                                        <input type="number" value="40" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" placeholder="horas" disabled>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Entrada Padr√£o</label>
                                        <input type="time" value="08:00" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Sa√≠da Padr√£o</label>
                                        <input type="time" value="17:00" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Intervalo (Duration, ex: PT1H ou 01:00)</label>
                                        <input type="text" value="PT1H" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" placeholder="PT1H" disabled>
                                    </div>
                                </div>
                            </div>
                            <div id="perfil-func-tab-ponto-content" class="hidden">
                                <div class="space-y-4">
                                    <div class="flex items-center gap-2">
                                        <input type="checkbox" id="perfil-func-ponto-obrigatorio" checked class="w-4 h-4" disabled>
                                        <label for="perfil-func-ponto-obrigatorio" class="text-sm text-stone-700">Ponto Obrigat√≥rio</label>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Toler√¢ncia (Duration, ex: PT0S ou 00:15)</label>
                                            <input type="text" value="PT0S" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" placeholder="PT0S" disabled>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" id="perfil-func-gravar-geo" class="w-4 h-4" disabled>
                                            <label for="perfil-func-gravar-geo" class="text-sm text-stone-700">Gravar Geolocaliza√ß√£o Obrigat√≥ria</label>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-2">Tipos de Dispositivo Permitidos</label>
                                        <div class="space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" id="perfil-func-dispositivo-web" checked class="w-4 h-4" disabled>
                                                <label for="perfil-func-dispositivo-web" class="text-sm text-stone-700">Web</label>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" id="perfil-func-dispositivo-mobile" checked class="w-4 h-4" disabled>
                                                <label for="perfil-func-dispositivo-mobile" class="text-sm text-stone-700">Mobile</label>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" id="perfil-func-dispositivo-biometria" class="w-4 h-4" disabled>
                                                <label for="perfil-func-dispositivo-biometria" class="text-sm text-stone-700">Biometria</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="perfil-empresa-view" class="hidden">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-20 h-20 bg-stone-300 rounded-full flex items-center justify-center text-2xl">üè¢</div>
                                <div>
                                    <h3 class="text-xl font-bold text-stone-800">Empresa XYZ Ltda</h3>
                                    <p class="text-sm text-stone-600">contato@empresa.com</p>
                                </div>
                            </div>
                            <div class="flex gap-2 mb-4 border-b border-stone-200 overflow-x-auto">
                                <button onclick="switchPerfilEmpresaTab('fiscal')" id="perfil-emp-tab-fiscal" class="px-4 py-2 text-sm font-medium border-b-2 border-blue-600 text-blue-600 whitespace-nowrap">Dados Fiscais</button>
                                <button onclick="switchPerfilEmpresaTab('telefone')" id="perfil-emp-tab-telefone" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-stone-800 whitespace-nowrap">Telefone</button>
                                <button onclick="switchPerfilEmpresaTab('endereco')" id="perfil-emp-tab-endereco" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-stone-800 whitespace-nowrap">Endere√ßo</button>
                                <button onclick="switchPerfilEmpresaTab('jornada')" id="perfil-emp-tab-jornada" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-stone-800 whitespace-nowrap">Jornada Padr√£o</button>
                                <button onclick="switchPerfilEmpresaTab('compliance')" id="perfil-emp-tab-compliance" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-stone-800 whitespace-nowrap">Compliance</button>
                            </div>
                            <div id="perfil-emp-tab-fiscal-content">
                                <div class="space-y-4">
                                    <div class="flex items-center gap-2">
                                        <input type="checkbox" id="perfil-emp-ativo" checked class="w-4 h-4">
                                        <label for="perfil-emp-ativo" class="text-sm text-stone-700">Empresa Ativa</label>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">CNPJ</label>
                                            <input type="text" value="12.345.678/0001-90" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Raz√£o Social</label>
                                            <input type="text" value="Empresa XYZ Ltda" class="w-full px-3 py-2 border border-stone-300 rounded-lg bg-stone-100 cursor-not-allowed" disabled>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Nome Fantasia</label>
                                            <input type="text" value="XYZ" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Inscri√ß√£o Estadual</label>
                                            <input type="text" value="123.456.789.012" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">CNAE</label>
                                            <input type="text" value="6201-5/00" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Regime Tribut√°rio</label>
                                            <select class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                                <option>Simples Nacional</option>
                                                <option>Lucro Presumido</option>
                                                <option>Lucro Real</option>
                                            </select>
                                        </div>
                                        <div class="col-span-2">
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Email</label>
                                            <input type="email" value="contato@empresa.com" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="perfil-emp-tab-telefone-content" class="hidden">
                                <div class="space-y-4">
                                    <div class="grid grid-cols-4 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">C√≥digo Pa√≠s</label>
                                            <input type="text" value="+55" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">DDD</label>
                                            <input type="text" value="11" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div class="col-span-2">
                                            <label class="block text-sm font-medium text-stone-700 mb-1">N√∫mero</label>
                                            <input type="text" value="3456-7890" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                    </div>
                                    <button class="text-sm text-blue-600 hover:text-blue-800">+ Adicionar outro telefone</button>
                                </div>
                            </div>
                            <div id="perfil-emp-tab-endereco-content" class="hidden">
                                <div class="space-y-4">
                                    <div class="grid grid-cols-3 gap-4">
                                        <div class="col-span-2">
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Rua</label>
                                            <input type="text" value="Av. Paulista" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">N√∫mero</label>
                                            <input type="text" value="1000" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Complemento</label>
                                        <input type="text" value="Sala 100" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Bairro</label>
                                            <input type="text" value="Bela Vista" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Cidade</label>
                                            <input type="text" value="S√£o Paulo" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-3 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">UF</label>
                                            <input type="text" value="SP" maxlength="2" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">CEP</label>
                                            <input type="text" value="01310-100" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Timezone</label>
                                            <input type="text" value="America/Sao_Paulo" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="perfil-emp-tab-jornada-content" class="hidden">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Carga Di√°ria Padr√£o</label>
                                        <input type="time" value="08:00" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Carga Semanal Padr√£o</label>
                                        <input type="number" value="40" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="horas">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Toler√¢ncia Padr√£o (Duration, ex: PT0S ou 00:15)</label>
                                        <input type="text" value="PT0S" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="PT0S">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Intervalo Padr√£o (Duration, ex: PT1H ou 01:00)</label>
                                        <input type="text" value="PT1H" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="PT1H">
                                    </div>
                                </div>
                            </div>
                            <div id="perfil-emp-tab-compliance-content" class="hidden">
                                <div class="space-y-4">
                                    <div class="flex items-center gap-2">
                                        <input type="checkbox" id="perfil-emp-controle-ponto-obrigatorio" checked class="w-4 h-4">
                                        <label for="perfil-emp-controle-ponto-obrigatorio" class="text-sm text-stone-700">Controle de Ponto Obrigat√≥rio</label>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Tipo de Modelo de Ponto</label>
                                            <select class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                                <option>Eletr√¥nico</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Tempo de Reten√ß√£o (anos)</label>
                                            <input type="number" value="5" min="5" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="anos">
                                        </div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" id="perfil-emp-auditoria-ativa" checked class="w-4 h-4">
                                            <label for="perfil-emp-auditoria-ativa" class="text-sm text-stone-700">Auditoria Ativa</label>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" id="perfil-emp-assinatura-digital-obrigatoria" checked class="w-4 h-4">
                                            <label for="perfil-emp-assinatura-digital-obrigatoria" class="text-sm text-stone-700">Assinatura Digital Obrigat√≥ria</label>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" id="perfil-emp-gravar-geo-obrigatoria" class="w-4 h-4">
                                            <label for="perfil-emp-gravar-geo-obrigatoria" class="text-sm text-stone-700">Gravar Geolocaliza√ß√£o Obrigat√≥ria</label>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" id="perfil-emp-permite-ajuste-ponto" class="w-4 h-4">
                                            <label for="perfil-emp-permite-ajuste-ponto" class="text-sm text-stone-700">Permitir Ajuste de Ponto Direto</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg">Salvar Altera√ß√µes</button>
                        </div>
                    </div>
                `,
                'espelho-ponto': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-stone-800">Espelho de Ponto</h3>
                            <div class="flex gap-2">
                                <select class="px-3 py-2 border border-stone-300 rounded-lg text-sm">
                                    <option>Janeiro</option>
                                    <option>Fevereiro</option>
                                    <option>Mar√ßo</option>
                                    <option>Abril</option>
                                    <option>Maio</option>
                                    <option>Junho</option>
                                    <option>Julho</option>
                                    <option>Agosto</option>
                                    <option>Setembro</option>
                                    <option>Outubro</option>
                                    <option>Novembro</option>
                                    <option>Dezembro</option>
                                </select>
                                <select class="px-3 py-2 border border-stone-300 rounded-lg text-sm">
                                    <option>2024</option>
                                    <option>2023</option>
                                    <option>2022</option>
                                </select>
                            </div>
                        </div>
                        <div class="table-scroll-container">
                            <div class="table-scroll-top" id="table-scroll-top">
                                <div style="height: 1px; min-width: 1200px;"></div>
                            </div>
                            <div class="table-scroll-bottom table-scroll-sync" id="table-scroll-bottom">
                        <table class="w-full text-sm border-collapse min-w-full">
                            <thead class="bg-stone-50">
                                <tr>
                                    <th class="px-4 py-2 text-left text-stone-700">Data</th>
                                    <th class="px-4 py-2 text-left text-stone-700">Dia</th>
                                    <th class="px-4 py-2 text-left text-stone-700">Status</th>
                                    <th class="px-4 py-2 text-left text-stone-700">Entrada1</th>
                                    <th class="px-4 py-2 text-left text-stone-700">Sa√≠da1</th>
                                    <th class="px-4 py-2 text-left text-stone-700">Entrada2</th>
                                    <th class="px-4 py-2 text-left text-stone-700">Sa√≠da2</th>
                                    <th class="px-4 py-2 text-left text-stone-700">Total</th>
                                    <th class="px-4 py-2 text-left text-stone-700">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">01/01/2024</td>
                                    <td class="px-4 py-2">Segunda</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:30</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('01/01/2024', 'Segunda')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">02/01/2024</td>
                                    <td class="px-4 py-2">Ter√ßa</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Atraso</span></td>
                                    <td class="px-4 py-2">08:05</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:35</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('02/01/2024', 'Ter√ßa')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">03/01/2024</td>
                                    <td class="px-4 py-2">Quarta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:30</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('03/01/2024', 'Quarta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">04/01/2024</td>
                                    <td class="px-4 py-2">Quinta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Atraso</span></td>
                                    <td class="px-4 py-2">08:10</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:40</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('04/01/2024', 'Quinta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">05/01/2024</td>
                                    <td class="px-4 py-2">Sexta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:30</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('05/01/2024', 'Sexta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">08/01/2024</td>
                                    <td class="px-4 py-2">Segunda</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:30</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('08/01/2024', 'Segunda')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">09/01/2024</td>
                                    <td class="px-4 py-2">Ter√ßa</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Atraso</span></td>
                                    <td class="px-4 py-2">08:15</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:45</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('09/01/2024', 'Ter√ßa')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">10/01/2024</td>
                                    <td class="px-4 py-2">Quarta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">11:30</td>
                                    <td class="px-4 py-2">12:30</td>
                                    <td class="px-4 py-2">14:00</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('10/01/2024', 'Quarta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">11/01/2024</td>
                                    <td class="px-4 py-2">Quinta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Atraso</span></td>
                                    <td class="px-4 py-2">08:05</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:35</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('11/01/2024', 'Quinta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">12/01/2024</td>
                                    <td class="px-4 py-2">Sexta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:30</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('12/01/2024', 'Sexta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">15/01/2024</td>
                                    <td class="px-4 py-2">Segunda</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:30</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('15/01/2024', 'Segunda')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">16/01/2024</td>
                                    <td class="px-4 py-2">Ter√ßa</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Atraso</span></td>
                                    <td class="px-4 py-2">08:15</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:45</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('16/01/2024', 'Ter√ßa')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">17/01/2024</td>
                                    <td class="px-4 py-2">Quarta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">10:00</td>
                                    <td class="px-4 py-2">11:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('17/01/2024', 'Quarta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">18/01/2024</td>
                                    <td class="px-4 py-2">Quinta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Atraso</span></td>
                                    <td class="px-4 py-2">08:10</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:40</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('18/01/2024', 'Quinta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                                <tr class="border-b border-stone-200">
                                    <td class="px-4 py-2">19/01/2024</td>
                                    <td class="px-4 py-2">Sexta</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Normal</span></td>
                                    <td class="px-4 py-2">08:00</td>
                                    <td class="px-4 py-2">12:00</td>
                                    <td class="px-4 py-2">13:00</td>
                                    <td class="px-4 py-2">17:30</td>
                                    <td class="px-4 py-2 font-medium">8h 30min</td>
                                    <td class="px-4 py-2">
                                        <button onclick="openEditarDiaModal('19/01/2024', 'Sexta')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Editar</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                            </div>
                        </div>
                        <!-- Modal de Edi√ß√£o de Dia -->
                        <div id="editar-dia-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" onclick="if(event.target === this) closeEditarDiaModal()">
                            <div class="bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
                                <div class="flex justify-between items-center mb-2">
                                    <h3 class="text-xl font-bold text-stone-800" id="editar-dia-title">Editar Registros - </h3>
                                    <button onclick="openNovoRegistroModal()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">Novo Registro</button>
                                </div>
                                <p class="text-sm text-stone-600 mb-4" id="editar-dia-subtitle"></p>
                                <div id="editar-dia-registros" class="space-y-3">
                                    <!-- Registros ser√£o inseridos aqui via JavaScript -->
                                </div>
                                <div class="flex gap-2 mt-6">
                                    <button onclick="closeEditarDiaModal()" class="flex-1 px-4 py-2 border border-stone-300 rounded-lg text-stone-700 hover:bg-stone-50">Fechar</button>
                                </div>
                            </div>
                        </div>
                        <!-- Modal de Exclus√£o de Registro Individual -->
                        <div id="delete-registro-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" onclick="if(event.target === this) closeDeleteRegistroModal()">
                            <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4" onclick="event.stopPropagation()">
                                <h3 class="text-xl font-bold text-stone-800 mb-4">Excluir Registro de Ponto</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Justificativa *</label>
                                        <select id="delete-justificativa" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                            <option value="">Selecione uma justificativa</option>
                                            <option value="registro-duplicado">Registro Duplicado</option>
                                            <option value="registro-errado">Registro Errado</option>
                                            <option value="falha-sistema">Falha no Sistema</option>
                                            <option value="ajuste-manual">Ajuste Manual Necess√°rio</option>
                                            <option value="outro">Outro</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Observa√ß√£o</label>
                                        <textarea id="delete-observacao" rows="3" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="Descreva o motivo da exclus√£o..."></textarea>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-6">
                                    <button onclick="closeDeleteRegistroModal()" class="flex-1 px-4 py-2 border border-stone-300 rounded-lg text-stone-700 hover:bg-stone-50">Cancelar</button>
                                    <button onclick="confirmDeleteRegistro()" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Confirmar Exclus√£o</button>
                                </div>
                            </div>
                        </div>
                        <!-- Modal de Novo Registro -->
                        <div id="novo-registro-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" onclick="if(event.target === this) closeNovoRegistroModal()">
                            <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4" onclick="event.stopPropagation()">
                                <h3 class="text-xl font-bold text-stone-800 mb-4">Novo Registro de Ponto</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Hor√°rio *</label>
                                        <input type="time" id="novo-registro-horario" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Justificativa *</label>
                                        <select id="novo-registro-justificativa" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                            <option value="">Selecione uma justificativa</option>
                                            <option value="ajuste-manual">Ajuste Manual</option>
                                            <option value="falha-sistema">Falha no Sistema</option>
                                            <option value="esqueci-bater">Esqueci de Bater</option>
                                            <option value="outro">Outro</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Observa√ß√£o</label>
                                        <textarea id="novo-registro-observacao" rows="3" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="Descreva o motivo do registro..."></textarea>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-6">
                                    <button onclick="closeNovoRegistroModal()" class="flex-1 px-4 py-2 border border-stone-300 rounded-lg text-stone-700 hover:bg-stone-50">Cancelar</button>
                                    <button onclick="confirmNovoRegistro()" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Adicionar Registro</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'alertas': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-stone-800 mb-4">Alertas e Diverg√™ncias</h3>
                        <div id="alertas-list" class="space-y-3">
                            <div class="border-l-4 border-red-500 bg-red-50 p-4 rounded">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-red-800">Atraso na Entrada</p>
                                        <p class="text-sm text-red-600">15/01/2024 - Chegou √†s 08:15 (15min de atraso)</p>
                                    </div>
                                    <span class="px-2 py-1 bg-red-200 text-red-800 text-xs rounded">ALTA</span>
                                </div>
                            </div>
                            <div class="border-l-4 border-yellow-500 bg-yellow-50 p-4 rounded">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-yellow-800">Falta de Registro</p>
                                        <p class="text-sm text-yellow-600">16/01/2024 - Ausente registro de sa√≠da</p>
                                    </div>
                                    <span class="px-2 py-1 bg-yellow-200 text-yellow-800 text-xs rounded">M√âDIA</span>
                                </div>
                            </div>
                            <div class="border-l-4 border-orange-500 bg-orange-50 p-4 rounded hidden">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-orange-800">Horas Excedidas</p>
                                        <p class="text-sm text-orange-600">17/01/2024 - Trabalhou 10h (2h acima do limite)</p>
                                    </div>
                                    <span class="px-2 py-1 bg-orange-200 text-orange-800 text-xs rounded">ALTA</span>
                                </div>
                            </div>
                            <div class="border-l-4 border-yellow-500 bg-yellow-50 p-4 rounded hidden">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-yellow-800">Sa√≠da Antecipada</p>
                                        <p class="text-sm text-yellow-600">18/01/2024 - Saiu √†s 16:30 (30min antes)</p>
                                    </div>
                                    <span class="px-2 py-1 bg-yellow-200 text-yellow-800 text-xs rounded">M√âDIA</span>
                                </div>
                            </div>
                            <div class="border-l-4 border-blue-500 bg-blue-50 p-4 rounded hidden">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-blue-800">Diverg√™ncia Espelhamento</p>
                                        <p class="text-sm text-blue-600">19/01/2024 - Diferen√ßa entre registros</p>
                                    </div>
                                    <span class="px-2 py-1 bg-blue-200 text-blue-800 text-xs rounded">BAIXA</span>
                                </div>
                            </div>
                            <div class="border-l-4 border-red-500 bg-red-50 p-4 rounded hidden">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-red-800">Atraso na Entrada</p>
                                        <p class="text-sm text-red-600">20/01/2024 - Chegou √†s 08:20 (20min de atraso)</p>
                                    </div>
                                    <span class="px-2 py-1 bg-red-200 text-red-800 text-xs rounded">ALTA</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-center items-center gap-1 mt-2">
                            <button onclick="alertasPrevPage()" class="p-1 rounded hover:bg-stone-100 text-stone-600 text-xs">
                                <span>‚óÄ</span>
                            </button>
                            <span id="alertas-page" class="text-xs text-stone-600">1 / 2</span>
                            <button onclick="alertasNextPage()" class="p-1 rounded hover:bg-stone-100 text-stone-600 text-xs">
                                <span>‚ñ∂</span>
                            </button>
                        </div>
                    </div>
                `,
                'configuracoes': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6 max-w-2xl mx-auto">
                        <h3 class="text-xl font-bold text-stone-800 mb-4">Configura√ß√µes da Empresa</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">Raz√£o Social</label>
                                <input type="text" value="Empresa XYZ Ltda" class="w-full px-3 py-2 border border-stone-300 rounded-lg" disabled>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">CNPJ</label>
                                <input type="text" value="12.345.678/0001-90" class="w-full px-3 py-2 border border-stone-300 rounded-lg" disabled>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" checked disabled>
                                <label class="text-sm text-stone-700">Permitir ajuste de ponto direto</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" checked disabled>
                                <label class="text-sm text-stone-700">Assinatura digital obrigat√≥ria</label>
                            </div>
                        </div>
                    </div>
                `,
                'funcionarios': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-stone-800">Funcion√°rios</h3>
                            <button onclick="openPerfilFuncionario(null)" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm">Novo Funcion√°rio</button>
                        </div>
                        <div class="mb-4">
                            <input type="text" placeholder="Buscar funcion√°rio..." class="w-full px-4 py-2 border border-stone-300 rounded-lg">
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between p-3 border border-stone-200 rounded-lg hover:bg-stone-50">
                                <div>
                                    <p class="font-medium text-stone-800">Jo√£o Silva</p>
                                    <p class="text-sm text-stone-600">joao.silva@empresa.com</p>
                                </div>
                                <div class="flex items-center gap-2">
                                    <button onclick="openPerfilFuncionario('joao-silva')" class="p-1.5 rounded hover:bg-stone-100 text-stone-600 hover:text-blue-600 transition-colors" title="Configurar funcion√°rio">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Ativo</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 border border-stone-200 rounded-lg hover:bg-stone-50">
                                <div>
                                    <p class="font-medium text-stone-800">Maria Santos</p>
                                    <p class="text-sm text-stone-600">maria.santos@empresa.com</p>
                                </div>
                                <div class="flex items-center gap-2">
                                    <button onclick="openPerfilFuncionario('maria-santos')" class="p-1.5 rounded hover:bg-stone-100 text-stone-600 hover:text-blue-600 transition-colors" title="Configurar funcion√°rio">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Ativo</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'banco-horas': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6 max-w-md mx-auto">
                        <h3 class="text-xl font-bold text-stone-800 mb-4 text-center">Banco de Horas</h3>
                        <div class="text-center mb-6">
                            <div class="text-4xl font-bold text-green-600 mb-2">+2h 15min</div>
                            <p class="text-sm text-stone-600">Saldo Ativo</p>
                        </div>
                        <div class="space-y-3 mb-4">
                            <div class="bg-stone-50 p-3 rounded-lg">
                                <p class="text-sm font-medium text-stone-700">Limite Positivo</p>
                                <p class="text-lg font-bold text-stone-800">10 horas</p>
                            </div>
                            <div class="bg-stone-50 p-3 rounded-lg">
                                <p class="text-sm font-medium text-stone-700">Validade</p>
                                <p class="text-lg font-bold text-stone-800">180 dias</p>
                            </div>
                        </div>
                        <div class="border-t border-stone-200 pt-4">
                            <h4 class="font-semibold text-stone-800 mb-2">Hist√≥rico</h4>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-stone-600">15/01 - Cr√©dito</span>
                                    <span class="font-medium text-green-600">+30min</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-stone-600">10/01 - Compensa√ß√£o</span>
                                    <span class="font-medium text-red-600">-1h</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'relatorios': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-stone-800 mb-4">Relat√≥rios</h3>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <select class="px-3 py-2 border border-stone-300 rounded-lg">
                                <option>Per√≠odo</option>
                            </select>
                            <select class="px-3 py-2 border border-stone-300 rounded-lg">
                                <option>Funcion√°rio</option>
                            </select>
                        </div>
                        <div class="space-y-3">
                            <button class="w-full text-left p-4 border border-stone-200 rounded-lg hover:bg-stone-50">
                                <p class="font-semibold text-stone-800">Relat√≥rio de Horas</p>
                                <p class="text-sm text-stone-600">An√°lise de horas trabalhadas</p>
                            </button>
                            <button class="w-full text-left p-4 border border-stone-200 rounded-lg hover:bg-stone-50">
                                <p class="font-semibold text-stone-800">Relat√≥rio de Banco de Horas</p>
                                <p class="text-sm text-stone-600">Saldo e movimenta√ß√µes</p>
                            </button>
                        </div>
                    </div>
                `,
                'geofence': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-stone-800">Geofences</h3>
                            <button onclick="openGeofenceModal('novo', 'Novo Geofence')" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700">Novo Geofence</button>
                        </div>
                        <div class="space-y-3">
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-2">
                                            <h4 class="font-semibold text-stone-800">Sede Principal</h4>
                                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Ativo</span>
                                            <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Todos os Funcion√°rios</span>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3 text-sm">
                                            <div>
                                                <p class="text-stone-500 text-xs mb-1">Coordenadas</p>
                                                <p class="text-stone-700 font-mono">-23.5505, -46.6333</p>
                                            </div>
                                            <div>
                                                <p class="text-stone-500 text-xs mb-1">Raio</p>
                                                <p class="text-stone-700">100 metros</p>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <p class="text-stone-500 text-xs mb-1">Tipo</p>
                                            <p class="text-stone-700 text-sm">Empresa</p>
                                        </div>
                                    </div>
                                    <button onclick="openGeofenceModal('sede-principal', 'Sede Principal')" class="p-1.5 rounded hover:bg-stone-100 text-stone-600 hover:text-blue-600 transition-colors" title="Configurar geofence">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="text-xs text-stone-500 mt-2 pt-2 border-t border-stone-100">
                                    <p>Criado em: 15/01/2024 10:30</p>
                                    <p>Atualizado em: 20/01/2024 14:15</p>
                                </div>
                            </div>
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-2">
                                            <h4 class="font-semibold text-stone-800">Filial Centro</h4>
                                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Ativo</span>
                                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Parcial (3 funcion√°rios)</span>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3 text-sm">
                                            <div>
                                                <p class="text-stone-500 text-xs mb-1">Coordenadas</p>
                                                <p class="text-stone-700 font-mono">-23.5489, -46.6388</p>
                                            </div>
                                            <div>
                                                <p class="text-stone-500 text-xs mb-1">Raio</p>
                                                <p class="text-stone-700">150 metros</p>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <p class="text-stone-500 text-xs mb-1">Tipo</p>
                                            <p class="text-stone-700 text-sm">Empresa</p>
                                        </div>
                                        <div class="mt-2">
                                            <p class="text-stone-500 text-xs mb-1">Funcion√°rios com Acesso</p>
                                            <div class="flex flex-wrap gap-1 mt-1">
                                                <span class="px-2 py-0.5 bg-stone-100 text-stone-700 text-xs rounded">Jo√£o Silva</span>
                                                <span class="px-2 py-0.5 bg-stone-100 text-stone-700 text-xs rounded">Maria Santos</span>
                                                <span class="px-2 py-0.5 bg-stone-100 text-stone-700 text-xs rounded">Pedro Costa</span>
                                            </div>
                                        </div>
                                    </div>
                                    <button onclick="openGeofenceModal('filial-centro', 'Filial Centro')" class="p-1.5 rounded hover:bg-stone-100 text-stone-600 hover:text-blue-600 transition-colors" title="Configurar geofence">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="text-xs text-stone-500 mt-2 pt-2 border-t border-stone-100">
                                    <p>Criado em: 18/01/2024 09:00</p>
                                    <p>Atualizado em: 22/01/2024 16:45</p>
                                </div>
                            </div>
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-2">
                                            <h4 class="font-semibold text-stone-800">Escrit√≥rio Remoto</h4>
                                            <span class="px-2 py-1 bg-stone-100 text-stone-800 text-xs rounded">Inativo</span>
                                            <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Todos os Funcion√°rios</span>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3 text-sm">
                                            <div>
                                                <p class="text-stone-500 text-xs mb-1">Coordenadas</p>
                                                <p class="text-stone-700 font-mono">-23.5321, -46.6254</p>
                                            </div>
                                            <div>
                                                <p class="text-stone-500 text-xs mb-1">Raio</p>
                                                <p class="text-stone-700">200 metros</p>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <p class="text-stone-500 text-xs mb-1">Tipo</p>
                                            <p class="text-stone-700 text-sm">Empresa</p>
                                        </div>
                                    </div>
                                    <button onclick="openGeofenceModal('escritorio-remoto', 'Escrit√≥rio Remoto')" class="p-1.5 rounded hover:bg-stone-100 text-stone-600 hover:text-blue-600 transition-colors" title="Configurar geofence">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="text-xs text-stone-500 mt-2 pt-2 border-t border-stone-100">
                                    <p>Criado em: 10/01/2024 11:20</p>
                                    <p>Atualizado em: 15/01/2024 10:30</p>
                                </div>
                            </div>
                        </div>
                        <!-- Modal de Configura√ß√£o de Geofence -->
                        <div id="geofence-config-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" onclick="if(event.target === this) closeGeofenceModal()">
                            <div class="bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
                                <h3 class="text-xl font-bold text-stone-800 mb-4" id="geofence-modal-title">Configura√ß√µes do Geofence</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Descri√ß√£o *</label>
                                        <input type="text" id="geofence-descricao" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="Nome do geofence">
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Latitude *</label>
                                            <input type="number" step="any" id="geofence-latitude" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="-23.5505">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-stone-700 mb-1">Longitude *</label>
                                            <input type="number" step="any" id="geofence-longitude" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="-46.6333">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Raio (metros) *</label>
                                        <input type="number" id="geofence-raio" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="100" min="1" value="100">
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <input type="checkbox" id="geofence-ativo" class="w-4 h-4" checked>
                                        <label for="geofence-ativo" class="text-sm text-stone-700">Ativo</label>
                                    </div>
                                    <div class="border-t border-stone-200 pt-4">
                                        <h4 class="font-semibold text-stone-800 mb-3">Configura√ß√£o de Acesso</h4>
                                        <div class="flex items-center gap-2 mb-3">
                                            <input type="checkbox" id="geofence-ativo-parcial" class="w-4 h-4" onchange="toggleGeofenceFuncionarios()">
                                            <label for="geofence-ativo-parcial" class="text-sm text-stone-700">Acesso Parcial (selecionar funcion√°rios espec√≠ficos)</label>
                                        </div>
                                        <div id="geofence-funcionarios-container" class="hidden">
                                            <label class="block text-sm font-medium text-stone-700 mb-2">Funcion√°rios com Acesso</label>
                                            <div class="border border-stone-200 rounded-lg p-3 max-h-48 overflow-y-auto">
                                                <div class="space-y-2">
                                                    <label class="flex items-center gap-2">
                                                        <input type="checkbox" class="geofence-funcionario-checkbox" value="joao-silva">
                                                        <span class="text-sm text-stone-700">Jo√£o Silva</span>
                                                    </label>
                                                    <label class="flex items-center gap-2">
                                                        <input type="checkbox" class="geofence-funcionario-checkbox" value="maria-santos">
                                                        <span class="text-sm text-stone-700">Maria Santos</span>
                                                    </label>
                                                    <label class="flex items-center gap-2">
                                                        <input type="checkbox" class="geofence-funcionario-checkbox" value="pedro-costa">
                                                        <span class="text-sm text-stone-700">Pedro Costa</span>
                                                    </label>
                                                    <label class="flex items-center gap-2">
                                                        <input type="checkbox" class="geofence-funcionario-checkbox" value="ana-oliveira">
                                                        <span class="text-sm text-stone-700">Ana Oliveira</span>
                                                    </label>
                                                    <label class="flex items-center gap-2">
                                                        <input type="checkbox" class="geofence-funcionario-checkbox" value="carlos-souza">
                                                        <span class="text-sm text-stone-700">Carlos Souza</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-6">
                                    <button onclick="closeGeofenceModal()" class="flex-1 px-4 py-2 border border-stone-300 rounded-lg text-stone-700 hover:bg-stone-50">Cancelar</button>
                                    <button onclick="salvarGeofence()" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Salvar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'jornada': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6 max-w-md mx-auto">
                        <h3 class="text-xl font-bold text-stone-800 mb-4">Configura√ß√£o de Jornada</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">Escala</label>
                                <select class="w-full px-3 py-2 border border-stone-300 rounded-lg" disabled>
                                    <option>5x2 (Segunda a Sexta)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">Carga Hor√°ria Di√°ria</label>
                                <input type="time" value="08:00" class="w-full px-3 py-2 border border-stone-300 rounded-lg" disabled>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">Entrada Padr√£o</label>
                                <input type="time" value="08:00" class="w-full px-3 py-2 border border-stone-300 rounded-lg" disabled>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">Sa√≠da Padr√£o</label>
                                <input type="time" value="17:00" class="w-full px-3 py-2 border border-stone-300 rounded-lg" disabled>
                            </div>
                        </div>
                    </div>
                `,
                'auditoria': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-stone-800 mb-4">Log de Auditoria</h3>
                        <div class="mb-4">
                            <input type="text" placeholder="Filtrar..." class="w-full px-4 py-2 border border-stone-300 rounded-lg">
                        </div>
                        <div class="space-y-2">
                            <div class="border-l-4 border-blue-500 bg-blue-50 p-3 rounded">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-medium text-blue-800">CREATE - registro_ponto</p>
                                        <p class="text-xs text-blue-600">15/01/2024 08:00 - Usu√°rio: Jo√£o Silva</p>
                                    </div>
                                    <span class="px-2 py-1 bg-green-200 text-green-800 text-xs rounded">Sucesso</span>
                                </div>
                            </div>
                            <div class="border-l-4 border-purple-500 bg-purple-50 p-3 rounded">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-medium text-purple-800">UPDATE - funcionario</p>
                                        <p class="text-xs text-purple-600">14/01/2024 14:30 - Usu√°rio: Admin</p>
                                    </div>
                                    <span class="px-2 py-1 bg-green-200 text-green-800 text-xs rounded">Sucesso</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'notificacoes': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-stone-800 mb-4">Notifica√ß√µes</h3>
                        <div class="space-y-3">
                            <div class="border border-stone-200 rounded-lg p-4 bg-blue-50">
                                <div class="flex justify-between items-start mb-1">
                                    <p class="font-semibold text-stone-800">Novo alerta de diverg√™ncia</p>
                                    <span class="px-2 py-1 bg-blue-200 text-blue-800 text-xs rounded">Nova</span>
                                </div>
                                <p class="text-sm text-stone-600">Atraso detectado no registro de ponto</p>
                                <p class="text-xs text-stone-500 mt-1">H√° 2 horas</p>
                            </div>
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-1">
                                    <p class="font-semibold text-stone-800">Solicita√ß√£o aprovada</p>
                                    <span class="px-2 py-1 bg-green-200 text-green-800 text-xs rounded">Lida</span>
                                </div>
                                <p class="text-sm text-stone-600">Sua solicita√ß√£o de ajuste foi aprovada</p>
                                <p class="text-xs text-stone-500 mt-1">Ontem</p>
                            </div>
                        </div>
                    </div>
                `,
                'recuperacao-senha': `
                    <div class="bg-white border border-stone-200 rounded-lg p-8 max-w-md mx-auto">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-bold text-stone-800 mb-2">Recuperar Senha</h2>
                            <p class="text-stone-600">Digite seu email para receber o link de recupera√ß√£o</p>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">Email</label>
                                <input type="email" class="w-full px-4 py-2 border border-stone-300 rounded-lg" placeholder="seu@email.com" disabled>
                            </div>
                            <button class="w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700">Enviar Link</button>
                            <a href="#" class="block text-center text-sm text-blue-600 hover:underline">Voltar ao login</a>
                        </div>
                    </div>
                `,
                'solicitacoes-ponto': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-stone-800">Solicita√ß√µes de Ponto</h3>
                            <div class="flex gap-2">
                                <button onclick="openNovoRegistroModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700">Criar Registro</button>
                                <button onclick="openDeleteRegistroModal('solicitacao')" class="bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700">Excluir Registro</button>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="font-semibold text-stone-800">Criar Registro</p>
                                        <p class="text-sm text-stone-600">15/01/2024 08:00</p>
                                        <p class="text-xs text-stone-500 mt-1">Motivo: Esqueci de registrar</p>
                                    </div>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Pendente</span>
                                </div>
                            </div>
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="font-semibold text-stone-800">Remover Registro</p>
                                        <p class="text-sm text-stone-600">14/01/2024 17:30</p>
                                        <p class="text-xs text-stone-500 mt-1">Motivo: Registro duplicado</p>
                                    </div>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Aprovado</span>
                                </div>
                            </div>
                        </div>
                        <!-- Modal de Exclus√£o de Registro Individual -->
                        <div id="delete-registro-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" onclick="if(event.target === this) closeDeleteRegistroModal()">
                            <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4" onclick="event.stopPropagation()">
                                <h3 class="text-xl font-bold text-stone-800 mb-4">Excluir Registro de Ponto</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Justificativa *</label>
                                        <select id="delete-justificativa" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                            <option value="">Selecione uma justificativa</option>
                                            <option value="registro-duplicado">Registro Duplicado</option>
                                            <option value="registro-errado">Registro Errado</option>
                                            <option value="falha-sistema">Falha no Sistema</option>
                                            <option value="ajuste-manual">Ajuste Manual Necess√°rio</option>
                                            <option value="outro">Outro</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Observa√ß√£o</label>
                                        <textarea id="delete-observacao" rows="3" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="Descreva o motivo da exclus√£o..."></textarea>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-6">
                                    <button onclick="closeDeleteRegistroModal()" class="flex-1 px-4 py-2 border border-stone-300 rounded-lg text-stone-700 hover:bg-stone-50">Cancelar</button>
                                    <button onclick="confirmDeleteRegistro()" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Confirmar Exclus√£o</button>
                                </div>
                            </div>
                        </div>
                        <!-- Modal de Novo Registro -->
                        <div id="novo-registro-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" onclick="if(event.target === this) closeNovoRegistroModal()">
                            <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4" onclick="event.stopPropagation()">
                                <h3 class="text-xl font-bold text-stone-800 mb-4">Novo Registro de Ponto</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Hor√°rio *</label>
                                        <input type="time" id="novo-registro-horario" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Justificativa *</label>
                                        <select id="novo-registro-justificativa" class="w-full px-3 py-2 border border-stone-300 rounded-lg">
                                            <option value="">Selecione uma justificativa</option>
                                            <option value="ajuste-manual">Ajuste Manual</option>
                                            <option value="falha-sistema">Falha no Sistema</option>
                                            <option value="esqueci-bater">Esqueci de Bater</option>
                                            <option value="outro">Outro</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-stone-700 mb-1">Observa√ß√£o</label>
                                        <textarea id="novo-registro-observacao" rows="3" class="w-full px-3 py-2 border border-stone-300 rounded-lg" placeholder="Descreva o motivo do registro..."></textarea>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-6">
                                    <button onclick="closeNovoRegistroModal()" class="flex-1 px-4 py-2 border border-stone-300 rounded-lg text-stone-700 hover:bg-stone-50">Cancelar</button>
                                    <button onclick="confirmNovoRegistro()" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Adicionar Registro</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'ferias-afastamentos': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-stone-800">F√©rias e Afastamentos</h3>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm">Novo Afastamento</button>
                        </div>
                        <div class="space-y-3">
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="font-semibold text-stone-800">F√©rias</p>
                                        <p class="text-sm text-stone-600">01/02/2024 - 28/02/2024</p>
                                        <p class="text-xs text-stone-500">20 dias √∫teis</p>
                                    </div>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Agendado</span>
                                </div>
                            </div>
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="font-semibold text-stone-800">Licen√ßa M√©dica</p>
                                        <p class="text-sm text-stone-600">10/01/2024 - 15/01/2024</p>
                                        <p class="text-xs text-stone-500">5 dias √∫teis</p>
                                    </div>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Ativo</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'sessoes-ativas': `
                    <div class="bg-white border border-stone-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-stone-800 mb-4">Sess√µes Ativas</h3>
                        <div class="space-y-3">
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="font-semibold text-stone-800">Chrome - Windows</p>
                                        <p class="text-sm text-stone-600">192.168.1.100</p>
                                        <p class="text-xs text-stone-500">√öltimo acesso: h√° 5 minutos</p>
                                    </div>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Ativa</span>
                                </div>
                                <button class="mt-2 text-sm text-red-600 hover:underline">Encerrar Sess√£o</button>
                            </div>
                            <div class="border border-stone-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="font-semibold text-stone-800">Mobile - Android</p>
                                        <p class="text-sm text-stone-600">192.168.1.101</p>
                                        <p class="text-xs text-stone-500">√öltimo acesso: h√° 2 horas</p>
                                    </div>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Ativa</span>
                                </div>
                                <button class="mt-2 text-sm text-red-600 hover:underline">Encerrar Sess√£o</button>
                            </div>
                        </div>
                    </div>
                `
            };
            
            return prototypes[screenId] || '<p class="text-stone-500">Prot√≥tipo n√£o dispon√≠vel</p>';
        }

        function openPrototypeModal(screenId) {
            const modal = document.getElementById('prototype-modal');
            const titleEl = document.getElementById('modal-title');
            const contentEl = document.getElementById('modal-content');
            
            const titles = {
                'login': 'Login',
                'registro-ponto': 'Registro de Ponto',
                'dashboard': 'Dashboard',
                'perfil': 'Perfil',
                'espelho-ponto': 'Espelho de Ponto',
                'alertas': 'Alertas',
                'configuracoes': 'Configura√ß√µes',
                'funcionarios': 'Funcion√°rios',
                'banco-horas': 'Banco de Horas',
                'relatorios': 'Relat√≥rios',
                'geofence': 'Geofence',
                'jornada': 'Jornada',
                'auditoria': 'Auditoria',
                'notificacoes': 'Notifica√ß√µes',
                'recuperacao-senha': 'Recupera√ß√£o de Senha',
                'solicitacoes-ponto': 'Solicita√ß√µes de Ponto',
                'ferias-afastamentos': 'F√©rias/Afastamentos',
                'sessoes-ativas': 'Sess√µes Ativas'
            };
            
            titleEl.textContent = titles[screenId] || 'Prot√≥tipo';
            contentEl.innerHTML = getPrototypeHTML(screenId);
            modal.classList.remove('hidden');
            
            // Reset pagination when opening dashboard
            if (screenId === 'dashboard') {
                dashboardRegistrosPage = 1;
                dashboardFuncionariosPage = 1;
                setTimeout(() => {
                    updateDashboardPagination('registros');
                    updateDashboardPagination('funcionarios');
                }, 100);
            }
            
            // Reset pagination when opening alertas
            if (screenId === 'alertas') {
                alertasPage = 1;
                setTimeout(() => {
                    updateAlertasPagination();
                }, 100);
            }
            
            // Sync table scrollbars for espelho-ponto
            if (screenId === 'espelho-ponto') {
                setTimeout(() => {
                    const scrollTop = document.getElementById('table-scroll-top');
                    const scrollBottom = document.getElementById('table-scroll-bottom');
                    const table = scrollBottom?.querySelector('table');
                    
                    if (scrollTop && scrollBottom && table) {
                        // Set same width for both scroll containers
                        const tableWidth = table.scrollWidth;
                        scrollTop.querySelector('div').style.minWidth = tableWidth + 'px';
                        
                        // Sync scroll from bottom to top
                        scrollBottom.addEventListener('scroll', function() {
                            scrollTop.scrollLeft = scrollBottom.scrollLeft;
                        });
                        
                        // Sync scroll from top to bottom
                        scrollTop.addEventListener('scroll', function() {
                            scrollBottom.scrollLeft = scrollTop.scrollLeft;
                        });
                    }
                }, 100);
            }
        }

        function closePrototypeModal() {
            const modal = document.getElementById('prototype-modal');
            modal.classList.add('hidden');
        }

        let currentRegistroId = null;

        function openDeleteRegistroModal(registroId) {
            currentRegistroId = registroId;
            const modal = document.getElementById('delete-registro-modal');
            if (modal) {
                modal.classList.remove('hidden');
                // Limpar campos
                document.getElementById('delete-justificativa').value = '';
                document.getElementById('delete-observacao').value = '';
            }
        }

        function closeDeleteRegistroModal() {
            const modal = document.getElementById('delete-registro-modal');
            if (modal) {
                modal.classList.add('hidden');
            }
            currentRegistroId = null;
        }

        function confirmDeleteRegistro() {
            const justificativa = document.getElementById('delete-justificativa').value;
            const observacao = document.getElementById('delete-observacao').value;
            
            if (!justificativa) {
                alert('Por favor, selecione uma justificativa.');
                return;
            }
            
            // Aqui voc√™ faria a chamada ao backend para excluir o registro
            // Por enquanto, apenas fecha o modal e mostra uma mensagem
            alert(`Registro ${currentRegistroId} exclu√≠do com sucesso!\n\nJustificativa: ${justificativa}\nObserva√ß√£o: ${observacao || 'Nenhuma'}`);
            closeDeleteRegistroModal();
            
            // Atualizar o modal de edi√ß√£o removendo o registro exclu√≠do
            if (currentDiaData) {
                openEditarDiaModal(currentDiaData, currentDiaNome);
            }
        }

        let currentDiaData = null;
        let currentDiaNome = null;

        function openEditarDiaModal(data, dia) {
            currentDiaData = data;
            currentDiaNome = dia;
            
            const modal = document.getElementById('editar-dia-modal');
            const titleEl = document.getElementById('editar-dia-title');
            const subtitleEl = document.getElementById('editar-dia-subtitle');
            const registrosEl = document.getElementById('editar-dia-registros');
            
            if (modal && titleEl && subtitleEl && registrosEl) {
                titleEl.textContent = `Editar Registros - ${dia}`;
                subtitleEl.textContent = data;
                
                // Dados mockados dos registros por dia
                const registrosPorDia = {
                    '01/01/2024': [
                        { id: 'reg-01-1', tipo: 'Entrada', horario: '08:00', dispositivo: 'Web' },
                        { id: 'reg-01-2', tipo: 'Sa√≠da', horario: '12:00', dispositivo: 'Web' },
                        { id: 'reg-01-3', tipo: 'Entrada', horario: '13:00', dispositivo: 'Web' },
                        { id: 'reg-01-4', tipo: 'Sa√≠da', horario: '17:30', dispositivo: 'Web' }
                    ],
                    '02/01/2024': [
                        { id: 'reg-02-1', tipo: 'Entrada', horario: '08:05', dispositivo: 'Mobile' },
                        { id: 'reg-02-2', tipo: 'Sa√≠da', horario: '12:00', dispositivo: 'Mobile' },
                        { id: 'reg-02-3', tipo: 'Entrada', horario: '13:00', dispositivo: 'Mobile' },
                        { id: 'reg-02-4', tipo: 'Sa√≠da', horario: '17:35', dispositivo: 'Mobile' }
                    ],
                    '10/01/2024': [
                        { id: 'reg-08-1', tipo: 'Entrada', horario: '08:00', dispositivo: 'Web' },
                        { id: 'reg-08-2', tipo: 'Sa√≠da', horario: '11:30', dispositivo: 'Web' },
                        { id: 'reg-08-3', tipo: 'Entrada', horario: '12:30', dispositivo: 'Web' },
                        { id: 'reg-08-4', tipo: 'Sa√≠da', horario: '14:00', dispositivo: 'Web' },
                        { id: 'reg-08-5', tipo: 'Entrada', horario: '15:00', dispositivo: 'Web' },
                        { id: 'reg-08-6', tipo: 'Sa√≠da', horario: '17:30', dispositivo: 'Web' }
                    ],
                    '17/01/2024': [
                        { id: 'reg-13-1', tipo: 'Entrada', horario: '08:00', dispositivo: 'Biometria' },
                        { id: 'reg-13-2', tipo: 'Sa√≠da', horario: '10:00', dispositivo: 'Biometria' },
                        { id: 'reg-13-3', tipo: 'Entrada', horario: '11:00', dispositivo: 'Biometria' },
                        { id: 'reg-13-4', tipo: 'Sa√≠da', horario: '13:00', dispositivo: 'Biometria' },
                        { id: 'reg-13-5', tipo: 'Entrada', horario: '14:00', dispositivo: 'Biometria' },
                        { id: 'reg-13-6', tipo: 'Sa√≠da', horario: '17:30', dispositivo: 'Biometria' }
                    ]
                };
                
                const registros = registrosPorDia[data] || [
                    { id: 'reg-default-1', tipo: 'Entrada', horario: '08:00', dispositivo: 'Web' },
                    { id: 'reg-default-2', tipo: 'Sa√≠da', horario: '12:00', dispositivo: 'Web' },
                    { id: 'reg-default-3', tipo: 'Entrada', horario: '13:00', dispositivo: 'Web' },
                    { id: 'reg-default-4', tipo: 'Sa√≠da', horario: '17:30', dispositivo: 'Web' }
                ];
                
                registrosEl.innerHTML = registros.map(reg => `
                    <div class="flex items-center justify-between p-3 border border-stone-200 rounded-lg">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="px-2 py-1 ${reg.tipo === 'Entrada' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'} text-xs rounded">${reg.tipo}</span>
                                    <span class="px-2 py-1 bg-stone-100 text-stone-700 text-xs rounded">${reg.dispositivo}</span>
                                </div>
                                <p class="text-sm text-stone-600">${reg.horario}</p>
                            </div>
                        </div>
                        <button onclick="openDeleteRegistroModal('${reg.id}')" class="px-3 py-1 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors">Apagar</button>
                    </div>
                `).join('');
                
                modal.classList.remove('hidden');
            }
        }

        function closeEditarDiaModal() {
            const modal = document.getElementById('editar-dia-modal');
            if (modal) {
                modal.classList.add('hidden');
            }
            currentDiaData = null;
            currentDiaNome = null;
        }

        function openNovoRegistroModal() {
            const modal = document.getElementById('novo-registro-modal');
            if (modal) {
                // Limpar campos
                document.getElementById('novo-registro-horario').value = '';
                document.getElementById('novo-registro-justificativa').value = '';
                document.getElementById('novo-registro-observacao').value = '';
                modal.classList.remove('hidden');
            }
        }

        function closeNovoRegistroModal() {
            const modal = document.getElementById('novo-registro-modal');
            if (modal) {
                modal.classList.add('hidden');
            }
        }

        function confirmNovoRegistro() {
            const horario = document.getElementById('novo-registro-horario').value;
            const justificativa = document.getElementById('novo-registro-justificativa').value;
            const observacao = document.getElementById('novo-registro-observacao').value;

            if (!horario || !justificativa) {
                alert('Por favor, preencha todos os campos obrigat√≥rios.');
                return;
            }

            // Aqui voc√™ pode adicionar a l√≥gica para salvar o novo registro
            // Por enquanto, apenas fecha o modal e recarrega a lista
            alert(`Registro √†s ${horario} adicionado com sucesso!`);
            closeNovoRegistroModal();
            
            // Recarregar o modal de edi√ß√£o se estiver aberto
            if (currentDiaData) {
                openEditarDiaModal(currentDiaData, currentDiaNome);
            }
        }

        let currentGeofenceId = null;

        function openGeofenceModal(geofenceId, geofenceNome) {
            currentGeofenceId = geofenceId;
            const modal = document.getElementById('geofence-config-modal');
            const titleEl = document.getElementById('geofence-modal-title');
            
            if (modal && titleEl) {
                titleEl.textContent = geofenceId === 'novo' ? 'Novo Geofence' : `Configura√ß√µes - ${geofenceNome}`;
                
                // Se for novo geofence, limpar campos
                if (geofenceId === 'novo') {
                    document.getElementById('geofence-descricao').value = '';
                    document.getElementById('geofence-latitude').value = '';
                    document.getElementById('geofence-longitude').value = '';
                    document.getElementById('geofence-raio').value = '100';
                    document.getElementById('geofence-ativo').checked = true;
                    document.getElementById('geofence-ativo-parcial').checked = false;
                    document.getElementById('geofence-funcionarios-container').classList.add('hidden');
                    // Limpar checkboxes de funcion√°rios
                    document.querySelectorAll('.geofence-funcionario-checkbox').forEach(cb => cb.checked = false);
                } else {
                    // Preencher com dados do geofence (simulado)
                    const dadosGeofence = {
                        'sede-principal': {
                            descricao: 'Sede Principal',
                            latitude: '-23.5505',
                            longitude: '-46.6333',
                            raio: '100',
                            ativo: true,
                            ativoParcial: false,
                            funcionarios: []
                        },
                        'filial-centro': {
                            descricao: 'Filial Centro',
                            latitude: '-23.5489',
                            longitude: '-46.6388',
                            raio: '150',
                            ativo: true,
                            ativoParcial: true,
                            funcionarios: ['joao-silva', 'maria-santos', 'pedro-costa']
                        },
                        'escritorio-remoto': {
                            descricao: 'Escrit√≥rio Remoto',
                            latitude: '-23.5321',
                            longitude: '-46.6254',
                            raio: '200',
                            ativo: false,
                            ativoParcial: false,
                            funcionarios: []
                        }
                    };
                    
                    const dados = dadosGeofence[geofenceId] || {};
                    document.getElementById('geofence-descricao').value = dados.descricao || '';
                    document.getElementById('geofence-latitude').value = dados.latitude || '';
                    document.getElementById('geofence-longitude').value = dados.longitude || '';
                    document.getElementById('geofence-raio').value = dados.raio || '100';
                    document.getElementById('geofence-ativo').checked = dados.ativo !== undefined ? dados.ativo : true;
                    document.getElementById('geofence-ativo-parcial').checked = dados.ativoParcial || false;
                    
                    // Mostrar/ocultar container de funcion√°rios
                    if (dados.ativoParcial) {
                        document.getElementById('geofence-funcionarios-container').classList.remove('hidden');
                        // Marcar funcion√°rios selecionados
                        document.querySelectorAll('.geofence-funcionario-checkbox').forEach(cb => {
                            cb.checked = dados.funcionarios.includes(cb.value);
                        });
                    } else {
                        document.getElementById('geofence-funcionarios-container').classList.add('hidden');
                        document.querySelectorAll('.geofence-funcionario-checkbox').forEach(cb => cb.checked = false);
                    }
                }
                
                modal.classList.remove('hidden');
            }
        }

        function closeGeofenceModal() {
            const modal = document.getElementById('geofence-config-modal');
            if (modal) {
                modal.classList.add('hidden');
            }
            currentGeofenceId = null;
        }

        function toggleGeofenceFuncionarios() {
            const ativoParcial = document.getElementById('geofence-ativo-parcial').checked;
            const container = document.getElementById('geofence-funcionarios-container');
            
            if (ativoParcial) {
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
                // Limpar sele√ß√µes
                document.querySelectorAll('.geofence-funcionario-checkbox').forEach(cb => cb.checked = false);
            }
        }

        function salvarGeofence() {
            const descricao = document.getElementById('geofence-descricao').value;
            const latitude = document.getElementById('geofence-latitude').value;
            const longitude = document.getElementById('geofence-longitude').value;
            const raio = document.getElementById('geofence-raio').value;
            const ativo = document.getElementById('geofence-ativo').checked;
            const ativoParcial = document.getElementById('geofence-ativo-parcial').checked;
            
            if (!descricao || !latitude || !longitude || !raio) {
                alert('Por favor, preencha todos os campos obrigat√≥rios.');
                return;
            }
            
            // Coletar funcion√°rios selecionados se for parcial
            const funcionariosSelecionados = [];
            if (ativoParcial) {
                document.querySelectorAll('.geofence-funcionario-checkbox:checked').forEach(cb => {
                    funcionariosSelecionados.push(cb.value);
                });
                
                if (funcionariosSelecionados.length === 0) {
                    alert('Selecione pelo menos um funcion√°rio quando o acesso for parcial.');
                    return;
                }
            }
            
            // Aqui voc√™ pode adicionar a l√≥gica para salvar o geofence
            const acao = currentGeofenceId === 'novo' ? 'criado' : 'atualizado';
            alert(`Geofence "${descricao}" ${acao} com sucesso!`);
            closeGeofenceModal();
            
            // Recarregar a lista de geofences (abrir modal de geofence novamente)
            setTimeout(() => {
                openPrototypeModal('geofence');
            }, 100);
        }

        function openPerfilFuncionario(funcionarioId) {
            const modal = document.getElementById('prototype-modal');
            const titleEl = document.getElementById('modal-title');
            const contentEl = document.getElementById('modal-content');
            
            // Dados mockados dos funcion√°rios
            const funcionariosData = {
                'joao-silva': {
                    nome: 'Jo√£o Silva',
                    email: 'joao.silva@empresa.com',
                    cpf: '123.456.789-00',
                    dataNascimento: '1990-05-15',
                    matricula: 'EMP001',
                    ativo: true,
                    cargo: 'Desenvolvedor',
                    departamento: 'TI',
                    tipoContrato: 'CLT',
                    contratoAtivo: true,
                    dataAdmissao: '2020-01-15',
                    dataDemissao: '',
                    salarioMensal: 'R$ 8.000,00',
                    salarioHora: 'R$ 45,45',
                    telefone: { codigoPais: '+55', ddd: '11', numero: '98765-4321' },
                    jornada: { tipoEscala: '5x2', cargaDiaria: '08:00', cargaSemanal: '40', entrada: '08:00', saida: '17:00', intervalo: '60' },
                    ponto: { obrigatorio: true, tolerancia: '0', gravarGeo: false, dispositivos: { web: true, mobile: true, biometria: false } }
                },
                'maria-santos': {
                    nome: 'Maria Santos',
                    email: 'maria.santos@empresa.com',
                    cpf: '987.654.321-00',
                    dataNascimento: '1985-03-20',
                    matricula: 'EMP002',
                    ativo: true,
                    cargo: 'Analista de RH',
                    departamento: 'RH',
                    tipoContrato: 'CLT',
                    contratoAtivo: true,
                    dataAdmissao: '2019-06-10',
                    dataDemissao: '',
                    salarioMensal: 'R$ 6.500,00',
                    salarioHora: 'R$ 36,93',
                    telefone: { codigoPais: '+55', ddd: '21', numero: '99876-5432' },
                    jornada: { tipoEscala: '5x2', cargaDiaria: '08:00', cargaSemanal: '40', entrada: '09:00', saida: '18:00', intervalo: '60' },
                    ponto: { obrigatorio: true, tolerancia: '5', gravarGeo: true, dispositivos: { web: true, mobile: true, biometria: true } }
                }
            };
            
            const dados = funcionarioId ? funcionariosData[funcionarioId] : null;
            
            titleEl.textContent = funcionarioId ? 'Editar Funcion√°rio' : 'Novo Funcion√°rio';
            contentEl.innerHTML = getPrototypeHTML('perfil');
            modal.classList.remove('hidden');
            
            // Modificar para modo RH - tornar todos os campos edit√°veis
            setTimeout(() => {
                // Esconder os bot√µes de toggle Funcion√°rio/Empresa
                const toggleButtons = contentEl.querySelector('.flex.justify-end.gap-2.mb-4');
                if (toggleButtons) {
                    toggleButtons.style.display = 'none';
                }
                
                // Mostrar apenas a view de funcion√°rio
                document.getElementById('perfil-funcionario-view').classList.remove('hidden');
                document.getElementById('perfil-empresa-view').classList.add('hidden');
                
                // Atualizar dados se for edi√ß√£o
                if (dados) {
                    // Dados pessoais (cabe√ßalho)
                    const nomeEl = contentEl.querySelector('#perfil-funcionario-view h3');
                    const emailEl = contentEl.querySelector('#perfil-funcionario-view p.text-stone-600');
                    if (nomeEl) nomeEl.textContent = dados.nome;
                    if (emailEl) emailEl.textContent = dados.email;
                    
                    // Aba Dados - usar seletores por ordem
                    const dadosInputs = contentEl.querySelectorAll('#perfil-func-tab-dados-content input');
                    if (dadosInputs.length >= 6) {
                        dadosInputs[1].value = dados.nome; // Nome Completo
                        dadosInputs[2].value = dados.cpf; // CPF
                        dadosInputs[3].value = dados.dataNascimento; // Data Nascimento
                        dadosInputs[4].value = dados.matricula; // Matr√≠cula
                        dadosInputs[5].value = dados.email; // Email
                    }
                    const ativoCheckbox = contentEl.querySelector('#perfil-func-ativo');
                    if (ativoCheckbox) ativoCheckbox.checked = dados.ativo;
                    
                    // Aba Telefone
                    const telefoneInputs = contentEl.querySelectorAll('#perfil-func-tab-telefone-content input');
                    if (telefoneInputs.length >= 3) {
                        telefoneInputs[0].value = dados.telefone.codigoPais;
                        telefoneInputs[1].value = dados.telefone.ddd;
                        telefoneInputs[2].value = dados.telefone.numero;
                    }
                    
                    // Aba Contrato
                    const contratoInputs = contentEl.querySelectorAll('#perfil-func-tab-contrato-content input[type="text"], #perfil-func-tab-contrato-content input[type="date"]');
                    const contratoSelect = contentEl.querySelector('#perfil-func-tab-contrato-content select');
                    if (contratoInputs.length >= 6) {
                        contratoInputs[0].value = dados.cargo ?? '';           // Cargo
                        contratoInputs[1].value = dados.departamento ?? '';   // Departamento
                        contratoInputs[2].value = dados.dataAdmissao ?? '';   // Data Admiss√£o
                        contratoInputs[3].value = dados.dataDemissao ?? '';   // Data Demiss√£o
                        contratoInputs[4].value = dados.salarioMensal ?? '';  // Sal√°rio Mensal
                        contratoInputs[5].value = dados.salarioHora ?? '';    // Sal√°rio Hora
                    }
                    if (contratoSelect) contratoSelect.value = dados.tipoContrato;
                    const contratoAtivoCheckbox = contentEl.querySelector('#perfil-func-contrato-ativo');
                    if (contratoAtivoCheckbox) contratoAtivoCheckbox.checked = dados.contratoAtivo !== undefined ? dados.contratoAtivo : true;
                    
                    // Aba Jornada
                    const jornadaSelect = contentEl.querySelector('#perfil-func-tab-jornada-content select');
                    const jornadaInputs = contentEl.querySelectorAll('#perfil-func-tab-jornada-content input');
                    if (jornadaSelect) jornadaSelect.value = dados.jornada.tipoEscala;
                    if (jornadaInputs.length >= 6) {
                        jornadaInputs[0].value = dados.jornada.cargaDiaria ?? ''; // Carga Hor√°ria Di√°ria (Duration ex: PT8H)
                        jornadaInputs[1].value = dados.jornada.cargaSemanal ?? ''; // Carga Hor√°ria Semanal (Duration ex: PT44H)
                        jornadaInputs[2].value = dados.jornada.entrada ?? ''; // Entrada Padr√£o
                        jornadaInputs[3].value = dados.jornada.saida ?? ''; // Sa√≠da Padr√£o
                        jornadaInputs[4].value = dados.jornada.toleranciaPadrao ?? 'PT0S'; // Toler√¢ncia (Duration ISO-8601, ex: PT15M)
                        jornadaInputs[5].value = dados.jornada.intervaloPadrao ?? 'PT0S'; // Intervalo (Duration ISO-8601, ex: PT1H)
                    } else if (jornadaInputs.length >= 5) {
                        jornadaInputs[0].value = dados.jornada.cargaDiaria ?? '';
                        jornadaInputs[1].value = dados.jornada.cargaSemanal ?? '';
                        jornadaInputs[2].value = dados.jornada.entrada ?? '';
                        jornadaInputs[3].value = dados.jornada.saida ?? '';
                        jornadaInputs[4].value = dados.jornada.intervaloPadrao ?? dados.jornada.intervalo ?? 'PT0S';
                    }
                    
                    // Aba Ponto
                    const pontoObrigatorioCheckbox = contentEl.querySelector('#perfil-func-ponto-obrigatorio');
                    const toleranciaInput = contentEl.querySelector('#perfil-func-tab-ponto-content input[type="number"]');
                    const gravarGeoCheckbox = contentEl.querySelector('#perfil-func-gravar-geo');
                    const dispositivoWebCheckbox = contentEl.querySelector('#perfil-func-dispositivo-web');
                    const dispositivoMobileCheckbox = contentEl.querySelector('#perfil-func-dispositivo-mobile');
                    const dispositivoBiometriaCheckbox = contentEl.querySelector('#perfil-func-dispositivo-biometria');
                    
                    if (pontoObrigatorioCheckbox) pontoObrigatorioCheckbox.checked = dados.ponto.obrigatorio;
                    if (toleranciaInput) toleranciaInput.value = dados.ponto.tolerancia;
                    if (gravarGeoCheckbox) gravarGeoCheckbox.checked = dados.ponto.gravarGeo;
                    if (dispositivoWebCheckbox) dispositivoWebCheckbox.checked = dados.ponto.dispositivos.web;
                    if (dispositivoMobileCheckbox) dispositivoMobileCheckbox.checked = dados.ponto.dispositivos.mobile;
                    if (dispositivoBiometriaCheckbox) dispositivoBiometriaCheckbox.checked = dados.ponto.dispositivos.biometria;
                } else {
                    // Limpar todos os campos para novo funcion√°rio
                    // Cabe√ßalho
                    const nomeEl = contentEl.querySelector('#perfil-funcionario-view h3');
                    const emailEl = contentEl.querySelector('#perfil-funcionario-view p.text-stone-600');
                    if (nomeEl) nomeEl.textContent = 'Novo Funcion√°rio';
                    if (emailEl) emailEl.textContent = '';
                    
                    // Aba Dados
                    const dadosInputs = contentEl.querySelectorAll('#perfil-func-tab-dados-content input');
                    dadosInputs.forEach((input, index) => {
                        if (input.type === 'checkbox') {
                            input.checked = index === 0; // Funcion√°rio Ativo checked por padr√£o
                        } else if (input.type === 'text' || input.type === 'email') {
                            input.value = '';
                        } else if (input.type === 'date') {
                            input.value = '';
                        }
                    });
                    
                    // Aba Telefone
                    const telefoneInputs = contentEl.querySelectorAll('#perfil-func-tab-telefone-content input');
                    telefoneInputs.forEach(input => {
                        if (input.value === '+55') {
                            input.value = '+55'; // Manter c√≥digo pa√≠s padr√£o
                        } else {
                            input.value = '';
                        }
                    });
                    
                    // Aba Contrato
                    const contratoInputs = contentEl.querySelectorAll('#perfil-func-tab-contrato-content input[type="text"], #perfil-func-tab-contrato-content input[type="date"]');
                    contratoInputs.forEach(input => input.value = '');
                    const contratoSelect = contentEl.querySelector('#perfil-func-tab-contrato-content select');
                    if (contratoSelect) contratoSelect.selectedIndex = 0;
                    const contratoAtivoCheckbox = contentEl.querySelector('#perfil-func-contrato-ativo');
                    if (contratoAtivoCheckbox) contratoAtivoCheckbox.checked = true;
                    
                    // Aba Jornada
                    const jornadaSelect = contentEl.querySelector('#perfil-func-tab-jornada-content select');
                    if (jornadaSelect) jornadaSelect.selectedIndex = 0;
                    const jornadaInputs = contentEl.querySelectorAll('#perfil-func-tab-jornada-content input');
                    jornadaInputs.forEach((input, index) => {
                        if (input.type === 'time') {
                            input.value = index === 0 ? '08:00' : index === 1 ? '17:00' : '08:00';
                        } else if (input.type === 'number' || input.type === 'text') {
                            // Dura√ß√µes: PT8H, PT44H, PT0S, PT1H (Duration ISO-8601)
                            input.value = index === 0 ? 'PT8H' : index === 1 ? 'PT44H' : index === 2 ? 'PT0S' : 'PT1H';
                        }
                    });
                    
                    // Aba Ponto
                    const pontoObrigatorioCheckbox = contentEl.querySelector('#perfil-func-ponto-obrigatorio');
                    const toleranciaInput = contentEl.querySelector('#perfil-func-tab-ponto-content input[type="number"]');
                    const gravarGeoCheckbox = contentEl.querySelector('#perfil-func-gravar-geo');
                    const dispositivoWebCheckbox = contentEl.querySelector('#perfil-func-dispositivo-web');
                    const dispositivoMobileCheckbox = contentEl.querySelector('#perfil-func-dispositivo-mobile');
                    const dispositivoBiometriaCheckbox = contentEl.querySelector('#perfil-func-dispositivo-biometria');
                    
                    if (pontoObrigatorioCheckbox) pontoObrigatorioCheckbox.checked = true;
                    if (toleranciaInput) toleranciaInput.value = '0';
                    if (gravarGeoCheckbox) gravarGeoCheckbox.checked = false;
                    if (dispositivoWebCheckbox) dispositivoWebCheckbox.checked = true;
                    if (dispositivoMobileCheckbox) dispositivoMobileCheckbox.checked = true;
                    if (dispositivoBiometriaCheckbox) dispositivoBiometriaCheckbox.checked = false;
                }
                
                // Remover disabled de todos os campos
                const allInputs = contentEl.querySelectorAll('input, select, textarea');
                allInputs.forEach(input => {
                    input.removeAttribute('disabled');
                    input.classList.remove('bg-stone-100', 'cursor-not-allowed');
                });
                
                // Adicionar bot√£o salvar em todas as abas que n√£o t√™m
                const tabs = ['dados', 'telefone', 'contrato', 'jornada', 'ponto'];
                tabs.forEach(tab => {
                    const tabContent = document.getElementById(`perfil-func-tab-${tab}-content`);
                    if (tabContent) {
                        const existingButton = tabContent.querySelector('button.bg-blue-600');
                        if (!existingButton && tab !== 'dados' && tab !== 'telefone') {
                            const saveButton = document.createElement('button');
                            saveButton.className = 'mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg';
                            saveButton.textContent = 'Salvar Altera√ß√µes';
                            tabContent.appendChild(saveButton);
                        }
                    }
                });
            }, 100);
        }

        function switchDashboardView(view) {
            const funcionarioView = document.getElementById('dashboard-funcionario-view');
            const empresaView = document.getElementById('dashboard-empresa-view');
            const btnFuncionario = document.getElementById('dashboard-btn-funcionario');
            const btnEmpresa = document.getElementById('dashboard-btn-empresa');
            
            if (view === 'funcionario') {
                funcionarioView.classList.remove('hidden');
                empresaView.classList.add('hidden');
                btnFuncionario.classList.remove('bg-stone-200', 'text-stone-700', 'hover:bg-stone-300');
                btnFuncionario.classList.add('bg-blue-600', 'text-white');
                btnEmpresa.classList.remove('bg-blue-600', 'text-white');
                btnEmpresa.classList.add('bg-stone-200', 'text-stone-700', 'hover:bg-stone-300');
            } else {
                funcionarioView.classList.add('hidden');
                empresaView.classList.remove('hidden');
                btnEmpresa.classList.remove('bg-stone-200', 'text-stone-700', 'hover:bg-stone-300');
                btnEmpresa.classList.add('bg-blue-600', 'text-white');
                btnFuncionario.classList.remove('bg-blue-600', 'text-white');
                btnFuncionario.classList.add('bg-stone-200', 'text-stone-700', 'hover:bg-stone-300');
            }
        }

        function switchPerfilView(view) {
            const funcionarioView = document.getElementById('perfil-funcionario-view');
            const empresaView = document.getElementById('perfil-empresa-view');
            const btnFuncionario = document.getElementById('perfil-btn-funcionario');
            const btnEmpresa = document.getElementById('perfil-btn-empresa');
            
            if (view === 'funcionario') {
                funcionarioView.classList.remove('hidden');
                empresaView.classList.add('hidden');
                btnFuncionario.classList.remove('bg-stone-200', 'text-stone-700', 'hover:bg-stone-300');
                btnFuncionario.classList.add('bg-blue-600', 'text-white');
                btnEmpresa.classList.remove('bg-blue-600', 'text-white');
                btnEmpresa.classList.add('bg-stone-200', 'text-stone-700', 'hover:bg-stone-300');
            } else {
                funcionarioView.classList.add('hidden');
                empresaView.classList.remove('hidden');
                btnEmpresa.classList.remove('bg-stone-200', 'text-stone-700', 'hover:bg-stone-300');
                btnEmpresa.classList.add('bg-blue-600', 'text-white');
                btnFuncionario.classList.remove('bg-blue-600', 'text-white');
                btnFuncionario.classList.add('bg-stone-200', 'text-stone-700', 'hover:bg-stone-300');
            }
        }

        function switchPerfilFuncionarioTab(tab) {
            const tabs = ['dados', 'telefone', 'contrato', 'jornada', 'ponto'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById(`perfil-func-tab-${t}`);
                const tabContent = document.getElementById(`perfil-func-tab-${t}-content`);
                
                if (t === tab) {
                    tabBtn.classList.add('border-b-2', 'border-blue-600', 'text-blue-600');
                    tabBtn.classList.remove('text-stone-600');
                    if (tabContent) tabContent.classList.remove('hidden');
                } else {
                    tabBtn.classList.remove('border-b-2', 'border-blue-600', 'text-blue-600');
                    tabBtn.classList.add('text-stone-600');
                    if (tabContent) tabContent.classList.add('hidden');
                }
            });
        }

        function switchPerfilEmpresaTab(tab) {
            const tabs = ['fiscal', 'telefone', 'endereco', 'jornada', 'compliance'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById(`perfil-emp-tab-${t}`);
                const tabContent = document.getElementById(`perfil-emp-tab-${t}-content`);
                
                if (t === tab) {
                    tabBtn.classList.add('border-b-2', 'border-blue-600', 'text-blue-600');
                    tabBtn.classList.remove('text-stone-600');
                    if (tabContent) tabContent.classList.remove('hidden');
                } else {
                    tabBtn.classList.remove('border-b-2', 'border-blue-600', 'text-blue-600');
                    tabBtn.classList.add('text-stone-600');
                    if (tabContent) tabContent.classList.add('hidden');
                }
            });
        }

        let dashboardRegistrosPage = 1;
        let dashboardFuncionariosPage = 1;
        let alertasPage = 1;

        function dashboardNextPage(type) {
            if (type === 'registros') {
                if (dashboardRegistrosPage < 2) {
                    dashboardRegistrosPage++;
                    updateDashboardPagination('registros');
                }
            } else if (type === 'funcionarios') {
                if (dashboardFuncionariosPage < 2) {
                    dashboardFuncionariosPage++;
                    updateDashboardPagination('funcionarios');
                }
            }
        }

        function dashboardPrevPage(type) {
            if (type === 'registros') {
                if (dashboardRegistrosPage > 1) {
                    dashboardRegistrosPage--;
                    updateDashboardPagination('registros');
                }
            } else if (type === 'funcionarios') {
                if (dashboardFuncionariosPage > 1) {
                    dashboardFuncionariosPage--;
                    updateDashboardPagination('funcionarios');
                }
            }
        }

        function updateDashboardPagination(type) {
            if (type === 'registros') {
                const items = document.querySelectorAll('#dashboard-registros-list > div');
                const pageEl = document.getElementById('dashboard-registros-page');
                pageEl.textContent = `${dashboardRegistrosPage} / 2`;
                
                items.forEach((item, index) => {
                    const start = (dashboardRegistrosPage - 1) * 2;
                    const end = start + 2;
                    if (index >= start && index < end) {
                        item.classList.remove('hidden');
                    } else {
                        item.classList.add('hidden');
                    }
                });
            } else if (type === 'funcionarios') {
                const items = document.querySelectorAll('#dashboard-funcionarios-list > div');
                const pageEl = document.getElementById('dashboard-funcionarios-page');
                pageEl.textContent = `${dashboardFuncionariosPage} / 2`;
                
                items.forEach((item, index) => {
                    const start = (dashboardFuncionariosPage - 1) * 2;
                    const end = start + 2;
                    if (index >= start && index < end) {
                        item.classList.remove('hidden');
                    } else {
                        item.classList.add('hidden');
                    }
                });
            }
        }

        function alertasNextPage() {
            const totalItems = document.querySelectorAll('#alertas-list > div').length;
            const totalPages = Math.ceil(totalItems / 5);
            if (alertasPage < totalPages) {
                alertasPage++;
                updateAlertasPagination();
            }
        }

        function alertasPrevPage() {
            if (alertasPage > 1) {
                alertasPage--;
                updateAlertasPagination();
            }
        }

        function updateAlertasPagination() {
            const items = document.querySelectorAll('#alertas-list > div');
            const totalItems = items.length;
            const totalPages = Math.ceil(totalItems / 5);
            const pageEl = document.getElementById('alertas-page');
            pageEl.textContent = `${alertasPage} / ${totalPages}`;
            
            items.forEach((item, index) => {
                const start = (alertasPage - 1) * 5;
                const end = start + 5;
                if (index >= start && index < end) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });
        }


        // Fechar modal ao clicar fora
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('prototype-modal');
            if (e.target === modal) {
                closePrototypeModal();
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            calculateXP();
            showEntity('funcionario');
            // Render chart initially invisible so it's ready
            renderChart();
        });

    </script>
</body>
</html>